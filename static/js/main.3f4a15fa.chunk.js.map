{"version":3,"sources":["assets/banner.png","assets/work_flow.png","config/index.js","store/history.js","utils/safe_storage.js","config/constants.js","network/aoi.js","network/auth.js","network/status.js","network/changeset.js","network/osmcha_blacklist.js","store/modal_actions.js","network/osmcha_whitelist.js","store/whitelist_actions.js","store/blacklist_actions.js","utils/filters.js","network/changesets_page.js","utils/query_params.js","network/reasons_tags.js","store/aoi_actions.js","store/filters_actions.js","store/changesets_page_actions.js","config/notifications.js","utils/cmap.js","utils/routing.js","store/changeset_actions.js","store/auth_actions.js","store/auth_reducer.js","store/changesets_page_reducer.js","store/changeset_reducer.js","store/modal_reducer.js","store/filters_reducer.js","store/whitelist_reducer.js","store/blacklist_reducer.js","store/aoi_reducer.js","store/sagas.js","store/index.js","utils/promise.js","components/changeset/floater.js","components/create_delete_modify.js","components/assembly_anchor.js","components/changeset/translate_button.js","components/reasons.js","components/changeset/details.js","components/changeset/header.js","components/avatar.js","utils/create_popup.js","utils/handle_popup_callback.js","components/changeset/sign_in_button.js","components/button.js","components/dropdown.js","components/changeset/trust_watch_user.js","components/changeset/user.js","components/loading.js","components/sign_in.js","utils/dispatch_event.js","views/map.js","components/changeset/features.js","components/changeset/tag_changes.js","components/changeset/box.js","components/changeset/comment.js","components/changeset/discussions.js","components/changeset/map_options.js","components/changeset/control.js","config/bindings.js","components/changeset/control_layout.js","utils/component.js","components/keyboard_enhancer.js","components/fetch_data_enhancer.js","network/openstreetmap.js","network/whosthat.js","components/changeset/index.js","views/changeset.js","views/about.js","views/stats.js","components/filters/radio.js","components/filters/text.js","components/filters/multi_select.js","components/filters/location.js","network/nominatim.js","components/filters/wrapper.js","components/filters/meta.js","components/filters/date.js","components/bbox_picker.js","components/loading_enhancer.js","components/filters/filters_list.js","utils/analytics.js","components/filters/filters_header.js","views/filters.js","components/list/secondary_line.js","components/list/primary_line.js","components/list/title.js","components/list/row.js","components/list/index.js","utils/element_in_view.js","components/list/page_range.js","components/list/footer.js","components/list/header.js","utils/number_with_commas.js","components/changeset/tags.js","views/changesets_list.js","components/navbar.js","components/changeset/verify.js","components/changeset/open_in.js","views/navbar_changeset.js","views/navbar_sidebar.js","views/home.js","views/modal.js","components/user/details.js","views/user.js","components/customURL.js","components/user/block_markup.js","views/saved_filters.js","components/user/blacklist_user.js","components/user/whitelist_user.js","components/user/save_user.js","views/trusted_users.js","views/watchlist.js","network/mapping_team.js","views/teams.js","views/edit_team.js","app.js","index.js","serviceworker.js","assets/thumbs-up.svg","assets/thumbs-down.svg","components/user.jpg"],"names":["module","exports","__webpack_require__","p","isDev","process","isStaging","isProd","isLocal","appVersion","url","window","debug_info","concat","toString","API_URL","historyConfig","basename","history","createBrowserHistory","getItem","key","localStorage","err","console","warn","setItem","value","removeItem","PAGE_SIZE","mapboxAccessToken","statusUrl","osmchaSocialTokenUrl","osmAuthUrl","apiOSM","whosThat","nominatimUrl","DEFAULT_FROM_DATE","DEFAULT_TO_DATE","getString","input","JSON","stringify","handleErrors","response","ok","json","then","r","status","Error","detail","statusText","Promise","reject","createAOI","token","name","filters","serverFilters","forEach","v","k","Iterable","isIterable","filter","x","get","map","join","fetch","method","headers","Content-Type","Authorization","body","res","fetchAOI","aoiId","fetchAllAOIs","resolve","updateAOI","deleteAOI","postFinalTokensOSMCha","oauth_token","oauth_token_secret","oauth_verifier","request","post","type","send","catch","e","error","postTokensOSMCha","fetchUserDetails","updateUserDetails","message_good","message_bad","comment_feature","getStatus","fetchChangeset","id","setHarmful","harmful","createForm","obj","formData","FormData","Object","keys","append","setTag","tag","remove","arguments","length","undefined","Number","isNaN","parseInt","tag_pk","fetchBlackList","deleteFromBlackList","uid","postUserToBlackList","data","username","blacklist_user","watchModal","handleModal","SHOW_MODAL","ACTIVATE_MODAL_CALLBACK","DISMISS_MODAL","modal","_ref","_ref$kind","kind","title","_ref$dismiss","dismiss","_ref$autoDismiss","autoDismiss","_ref$position","position","_ref$description","description","callback","callbackArgs","callbackLabel","message","payload","action","objectSpread","regenerator_default","a","wrap","_context","prev","next","takeEvery","stop","_marked","_ref2","uidOriginal","_yield$take","_context2","Date","getTime","Math","random","put","abrupt","take","sent","call","delay","apply","toConsumableArray","_marked2","deleteFromWhiteList","postUserToWhiteList","whitelist_user","watchWhitelist","addToWhitelistSaga","removeFromWhitelistSaga","WHITELIST","define","add","clear","tokenSelector","state","auth","addToWhitelist","removeFromWhitelist","all","whitelist_actions_marked","select","t0","whitelist_actions_marked2","_context3","_marked3","watchBlacklist","addToBlacklistSaga","removeFromBlacklistSaga","BLACKLIST","addToBlacklist","removeFromBlacklist","blacklist_actions_marked","blacklist_actions_marked2","blacklist_actions_marked3","validateFilters","Map","isMap","valid","List","isList","vv","has","test","getDefaultFromDate","defaultDate","moment","subtract","format","fromJS","date__gte","label","appendDefaultDate","merge","utc","date__lte","getDefaultToDate","fetchChangesetsPage","pageIndex","nocache","flatFilters","filterJoined","encodeURIComponent","getSearchObj","searchParam","result","parse","getObjAsQueryParam","defineProperty","fetchReasons","fetchTags","watchAOI","fetchAOISaga","createAOISaga","updateAOISaga","AOI","fetched","create","update","loading","takeLatest","aoi_actions_marked","reasons","tags","aoi","getIn","split","o","i","hasOwnProperty","SyntaxError","options","aoi_actions_marked2","location","locationSelector","push","pathname","search","aoi_actions_marked3","_context4","FILTERS","set","CHANGESETS_PAGE","_marked4","routing","watchFilters","watchLocationChange","applyFilterSaga","filtersSaga","modify","checkNew","updateNewCount","checkNewLoading","applyFilters","filters_actions_marked","lastTask","lastSearchString","_action","LOCATION_CHANGE","cancel","fork","filters_actions_marked2","toJS","filters_actions_marked3","_getSearchObj$toObjec","_location","toObject","filters_actions_marked4","filtersSelector","watchChangesetsPage","fetchChangesetsPageSaga","modifyChangesetPageSaga","checkForNewChangesetsSaga","getChangesetsPage","checkForNewChangesets","changesets_page_actions_marked","pageIndexSelector","changesetsPage","aoiIdSelector","oldPageIndex","thisPage","changesets_page_actions_marked2","currentPageAndIndexSelector","changesetId","changeset","_yield$select","_yield$select2","currentPage","features","index","slicedToArray","findIndex","f","setIn","changesets_page_actions_marked3","_ref3","_yield$select3","_yield$select4","newData","oldData","diff","toSet","size","changesets_page_actions_marked4","cmap","notifications","NOT_LOGGED_IN","MODIFY_SUCCESS","importChangesetMap","t","bind","m","log","getParam","param","path","match","matchPath","params","getChangesetIdFromLocation","checkForLegacyURL","watchChangeset","shouldUpdateSaga","watchModifyChangeset","fetchChangesetAction","fetchChangesetMapAction","setHarmfulAction","setTagActions","CHANGESET","change","CHANGESET_MODIFY","revert","CHANGESET_MAP","changesetTask","changesetMapTask","changeset_actions_marked","legacy","replace","changeset_actions_marked2","modifyAction","oldChangeset","newChangeset","t1","changeset_actions_marked3","changesetsSelector","changesets","changeset_actions_marked4","changesetMapModule","getCMapData","changesetMapSelector","changesetMaps","changesetMap","_context5","_marked5","_context6","_marked6","existingTags","_context7","delete","_marked7","watchUserDetails","watchAuth","logoutFlow","authTokenFlow","updateUserDetailsSaga","AUTH","postSocialToken","saveOAuth","getFinalToken","saveToken","logout","clearSession","loginError","userDetails","clearUserDetails","logUserOut","changesetIdSelector","delayPromise","DELAY","auth_actions_marked","delayBy","whitelist","blacklist","t2","t3","t4","t5","t6","auth_actions_marked2","auth_actions_marked3","_yield$call","_yield$call2","auth_actions_marked4","auth_actions_marked5","initialState","oAuthToken","oAuthTokenSecret","changesetsInitial","diffLoading","initial","errorChangeset","loadingChangesetMap","errorChangesetMap","duration","filtersInitial","aoiInitial","rootSaga","sagas_marked","reducers","combineReducers","routerReducer","item","sagaMiddleware","createSagaMiddleware","middlewares","routerMiddleware","appliedMiddlewares","applyMiddleware","persistedState","safeStorage","store","createStore","run","sagas","cancelablePromise","promise","hasCanceled_","val","isCanceled","Floater","_React$PureComponent","inherits","_super","_createSuper","classCallCheck","this","createClass","react_default","createElement","className","props","style","children","React","PureComponent","CreateDeleteModify","showZero","AssemblyAnchor","href","target","TranslateButton","text","rel","xlinkHref","Reasons","underline","color","extraClass","Details","properties","source","editor","imagery","comment","urlRegex","RegExp","sourceMatch","indexOf","imageryMatch","lib_default","Array","isArray","Header","is_whitelisted","is_blacklisted","user","date","destroy","whitelisted","blacklisted","dir","onClick","toggleUser","userEditCount","fromNow","connect","Avatar","avatar_createSuper","_this","_len","args","_key","loaded","setState","nextProps","Placeholder","slice","background","alt","src","onLoad","handleImageLoaded","onError","handleImageErrored","createPopup","width","height","settings","innerWidth","innerHeight","popup","open","parseQueryString","queryString","query","pair","_pair$split","_pair$split2","decodeURIComponent","handlePopupCallback","rej","authComplete","creds","SignInButton","handleLoginClick","oAuthObj","extraClasses","getChangeset","Button","iconName","DropdownContent","isActive","_step","_iterator","_createForOfIteratorHelper","s","n","done","handleClick","onChange","ourObj","isRemove","onRemove","newArray","multi","onAdd","toggleDropdown","_this2","display","data-label","data-payload","checked","deletable","preventDefault","stopPropagation","_Dropdown","_React$PureComponent2","_super2","dropdown_createSuper","_this3","_len2","_key2","handleClickOutside","_step2","_iterator2","dropdown_DropdownContent","assign","eventTypes","Dropdown","onClickOutside","TrustWatchUser","handleVerify","arr","handleVerifyClear","includes","User","user_createSuper","UserDescriptionHTML","showdown","Converter","noHeaderId","simplifiedAutoLink","makeHtml","avatar_Avatar","trust_watch_user_TrustWatchUser","Link","to","users","dangerouslySetInnerHTML","__html","sign_in_button_SignInButton","Loading","SignIn","dispatchEvent","messageId","payLoad","event","CustomEvent","document","currentChangesetMap","cMapRender","getMapInstance","selectFeature","emit","minDebounce","debounce","container","getElementById","render","max","disableSidebar","CMap","visible","ref","setRef","setDimensions","rect","parentNode","getBoundingClientRect","instance","resize","onresize","prevProp","content","timeOut","visibility","CSSTransitionGroup_default","transitionName","transitionAppearTimeout","transitionAppear","transitionEnterTimeout","transitionLeaveTimeout","loading_Loading","Feature","changesetReasons","reason","contains","charAt","Features","features_Feature","processFeatures","finalReport","analyzedFeatures","feature","newVersion","oldVersion","oldVersionKeys","newVersionKeys","addedTags","deletedTags","changedValues","analyzeFeature","FeatureListItem","ChangeItem","tag_changes_createSuper","opened","handleChange","assertThisInitialized","last_space","lastIndexOf","verticalAlign","TagChanges","changes","is","changeReport","featureIDs","sort","tag_changes_ChangeItem","Box","pullDown","pullUp","bg","CommentForm","comment_createSuper","success","postComment","postCommentPromise","handleSubmit","updateValue","userCommentedBefore","discussions","changesetIsHarmful","placeholder","clicked","Discussions","_this$props","_this$props2","renderComments","comment_CommentForm","MapOptions","map_options_createSuper","actions","mapStyle","filterLayers","toggleSatellite","renderMap","toggleDark","toggleStreet","toggleBing","bingStyle","version","sources","raster-tiles","tiles","attribution","layers","minzoom","maxzoom","defaultChecked","Control","active","FILTER_BINDING","bindings","HELP_BINDING","NEXT_CHANGESET","PREV_CHANGESET","REFRESH_CHANGESETS","CHANGESET_DETAILS_DETAILS","CHANGESET_DETAILS_SUSPICIOUS","CHANGESET_DETAILS_TAGS","CHANGESET_DETAILS_DISCUSSIONS","CHANGESET_DETAILS_USER","CHANGESET_DETAILS_MAP","VERIFY_GOOD","VERIFY_BAD","VERIFY_CLEAR","OPEN_IN_JOSM","OPEN_IN_ID","OPEN_IN_OSM","OPEN_IN_LEVEL0","OPEN_IN_ACHAVI","OPEN_IN_HDYC","FILTER_BY_USER","ControlLayout","bindingsState","toggleDetails","toggleFeatures","toggleTags","toggleDiscussions","toggleMapOptions","floater_Floater","marginTop","marginLeft","getDisplayName","WrappedComponent","displayName","keyboardToggleEnhancer","exclusive","_class","_temp","wrapper","keyboard_enhancer_createSuper","lastKeyStroke","toggleKey","exclusiveKeyToggle","newBindingState","prevBindingValue","Mousetrap","b","unbind","withFetchDataSilent","dataToFetch","onUpdate","FetchDataEnhancer","fetch_data_enhancer_createSuper","_initFetching","fetchedData","reloadData","initFetching","getUserDetails","fromOSM","xml","DOMParser","parseFromString","getElementsByTagName","userXml","count","getAttribute","accountCreated","innerHTML","img","fromOSMCha","r1","r2","getUsers","_Changeset","changeset_createSuper","showFloaters","currentChangeset","box_Box","header_Header","tag_changes_TagChanges","discussions_Discussions","user_User","changesetUsername","map_options_MapOptions","prevProps","getUserDetailsPromise","getWhosThatPromise","names","defaultProps","Changeset","osmComments","filterChangesetsByUser","userName","showChangeset","components_changeset_Changeset","converter","ghCompatibleHeaderId","extensions","regex","setFlavor","setOption","About","about_createSuper","about","cancellablePromise","markdown","Stats","Radio","radio_createSuper","onChangeLocal","react_select_es","Text","_React$Component","text_createSuper","isValid","handleFormChange","validity","min","Component","MultiSelect","multi_select_createSuper","allToggle","getAsyncOptions","dataURL","d","for_changeset","sendData","processed","renderSelect","promptTextCreator","loadOptions","handleToggle","showAllToggle","left","top","MappingTeamMultiSelect","_MultiSelect","trusted","LocationSelect","location_createSuper","geometry","queryType","lastSearch","queryTypeOptions","draw","clearBeforeDraw","mode","clearMap","changeMode","deleteAll","getSource","setData","getLayer","removeLayer","drawingUpdate","drawingData","getAll","updateMap","cb","nominatimSearch","display_name","geojson","simplified_bounds","simplify","tolerance","handleQueryTypeChange","addSource","addLayer","paint","fill-color","fill-opacity","geom_bbox","bbox","fitBounds","padding","getGL","mapboxgl","accessToken","MapboxDraw","displayControlsDefault","controls","polygon","addControl","on","TypeError","simpleValue","zIndex","Wrapper","_ref$handleFocus","handleFocus","hasValue","onFocus","Meta","meta_createSuper","activeFilters","metaOf","replaceFiltersState","findCurrentValue","option","handleDateChange","momentObj","react_datepicker_min_default","dateFormat","isClearable","selected","placeholderText","minDate","maxDate","BBoxPicker","bbox_picker_createSuper","bounds","getBounds","getSouth","toFixed","w","getWest","getNorth","wsen","getEast","clearBbox","loadingEnhancer","PureRendered","loading_enhancer_createSuper","filtersData","ignore","FiltersList","renderFilters","propsToSend","data_url","wrapperProps","range","gteValue","lteValue","text_Text","today","_Date","location_LocationSelect","radio_Radio","find","fi","meta_Meta","handleToggleAll","endsWith","multi_select_MappingTeamMultiSelect","multi_select_MultiSelect","bbox_picker_BBoxPicker","ReactGA","SaveAOI","editing","onKeyDown","keyCode","aoiList","FiltersHeader","onAoiSelect","getAois","getAoisPromise","_this4","_this5","navigator","clipboard","writeText","dropdown","save_aoi","filters_header_SaveAOI","aoiName","renderFilterInfo","renderAoiLink","renderRssLink","handleClear","handleApply","gaPageView","page","pageview","require","NEW_AOI","noDateGte","Filters","toJSON","sendToAnalytics","interval","setTimeout","category","values","loadAoiId","getAOIName","getAOIId","removeAOI","applyCreateAOI","applyUpdateAOI","filters_header_FiltersHeader","filters_list_FiltersList","SecondaryLine","thumbsDown","thumbsUp","PrimaryLine","Title","wasOpen","Row","row_createSuper","inputRef","other","objectWithoutProperties","borderClass","backgroundClass","handleScroll","element","bottom","right","elementInViewport","scrollIntoView","block","behavior","activeChangesetId","row_Row","PageRange","page_range_createSuper","_onClick","disabled","RANGE","Footer","start","end","base","maxPageCount","ceil","page_range_PageRange","Range","handleFilterOrderBy","reloadCurrentPage","valueData","filtersConfig","NavLink","activeStyle","fontWeight","cacheTagsData","ChangesetsList","checkUpdate","Infinity","goUpDownToChangeset","direction","nextFeature","mergedFilters","startsWith","_console","keySeq","first","toggleFilters","toggleHelp","list_header_Header","list_List","Tags","tags_createSuper","allTags","tagsData","selectData","is_visible","handleChangesetModifyTag","defaultValue","Navbar","buttons","Verify","onClear","checkUser","isHarmful","OpenIn","coordinates","NavbarChangeset","handleChangesetModifyHarmful","tags_Tags","NavbarSidebar","isMenuOpen","onUserMenuSelect","openMenu","renderUserMenuOptions","disable","avatar","getOAuthToken","Home","banner","work_flow","Modal","sendNotification","addNotification","level","dismissible","activateModalCallback","dismissModalCallback","addRef","NotificationSystem_default","EditUserDetails","onChangeMessageGood","onChangeMessageBad","applyUpdateUserDetails","isGood","renderGoodBadImg","userValues","onUserChange","alignSelf","details_EditUserDetails","CustomURL","BlockMarkup","SaveButton","onCreate","onSave","AOIsBlock","activeAoiId","removeAoi","block_markup_BlockMarkup","ListFortified","TargetBlock","propsToPass","SaveComp","SavedFilters","addToBlackList","removeFromBlackList","addToWhiteList","_ref4","removeFromWhiteList","createAOIPromise","saved_filters_ListFortified","saved_filters_SaveButton","BlackListUser","blacklist_user_createSuper","isValidUsername","isValidUid","verified","setUsername","setUid","fetchUsername","fetchUid","verifyInput","resp","alert","WhiteListUser","whitelist_user_createSuper","SaveUser","save_user_createSuper","showInput","forBlacklist","blacklist_user_BlackListUser","whitelist_user_WhiteListUser","WhiteListBlock","TrustedUsers","trustedUsers","sortBy","localeCompare","trusted_users_ListFortified","save_user_SaveUser","BlackListBlock","Watchlist","blackList","watchlist_ListFortified","deleteMappingTeam","onChangeTeamName","teamName","onChangeTeamUsers","teamUsers","activeTeam","validation","validateData","validationErrorMessage","from","fromEntries","userIsOwner","TeamsBlock","removeTeam","editTeam","MappingTeams","addingTeam","createTeam","createTeamPromise","createMappingTeam","teamId","teams_ListFortified","teams_SaveButton","teams","owner","EditMappingTeam","updateTeamPromise","updateMappingTeam","team","App","_Component","app_createSuper","navbar_sidebar_NavbarSidebar","changesets_list_ChangesetsList","Route","exact","component","map_CMap","modal_Modal","initialize","gaOptions","anonymizeIp","screenResolution","screen","availWidth","availHeight","appName","Raven","config","release","environment","debug","install","ReactDOM","react_redux_es","es","app_App","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.3f4a15fa.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/banner.ed2bb0d2.png\";","module.exports = __webpack_public_path__ + \"static/media/work_flow.195ff4f9.png\";","// @flow\nexport const isDev = process.env.REACT_APP_STACK === 'DEV';\nexport const isStaging = process.env.REACT_APP_STACK === 'STAGING';\nexport const isProd = process.env.REACT_APP_STACK === 'PRODUCTION';\nexport const isLocal = process.env.NODE_ENV === 'development';\nexport const stack = process.env.REACT_APP_STACK;\nexport const appVersion = process.env.REACT_APP_VERSION;\n\nlet url = 'https://staging.osmcha.org/api/v1';\n\nif (isProd) {\n  url = 'https://osmcha.org/api/v1';\n}\n\nwindow.debug_info = () =>\n  `isDev=${isDev.toString()} isStaging=${isStaging.toString()} isProd=${isProd.toString()} isLocal=${isLocal.toString()} stack=${stack ||\n    'null'} appVersion=${appVersion || 'null'} url=${url}`;\n\nexport const API_URL = url;\n","import { createBrowserHistory } from 'history';\nimport { isDev } from '../config';\nlet historyConfig = {};\nif (isDev) {\n  historyConfig.basename = '/osmcha-frontend';\n}\n\nconst history = createBrowserHistory(historyConfig);\nexport { history };\n","// @flow\n\n// Transparent wrapper over Window.localStorage\n// Adheres to the Web Storage API:\n// https://developer.mozilla.org/en-US/docs/Web/API/Storage\n\n/**\n * Wraps localStorage.getItem in a try/catch. Return null\n * if the key does not exist or localStorage fails.\n */\nfunction getItem(key: string): ?string {\n  try {\n    return localStorage.getItem(key) || null;\n  } catch (err) {\n    console.warn('Could not read from localStorage.');\n    return null;\n  }\n}\n\n/**\n * Wraps localStorage.setItem in a try/catch.\n */\nfunction setItem(key: string, value: string): void {\n  try {\n    localStorage.setItem(key, value);\n  } catch (err) {\n    console.warn('Could not write to localStorage.');\n  }\n}\n\n/**\n * Wraps localStorage.removeItem in a try/catch.\n */\nfunction removeItem(key: string): void {\n  try {\n    localStorage.removeItem(key);\n  } catch (err) {\n    console.warn('Could not delete from localStorage.');\n  }\n}\n\nexport { getItem, setItem, removeItem };\n","//@flow\nimport { API_URL } from './';\n\nexport const PAGE_SIZE = 75;\nexport const overpassBase = '//overpass.maptime.in/api/interpreter';\nexport const osmBase = '//www.openstreetmap.org/api/0.6/';\nexport const mapboxAccessToken =\n  'pk.eyJ1Ijoib3BlbnN0cmVldG1hcCIsImEiOiJjam10OXpmc2YwMXI5M3BqeTRiMDBqMHVyIn0.LIcIDe3TZLSDdTWDoojzNg';\nexport const statusUrl =\n  'https://raw.githubusercontent.com/mapbox/osmcha-frontend/status/status.json';\n\nexport const osmchaSocialTokenUrl = `${API_URL}/social-auth/`;\n\nexport const osmAuthUrl = 'https://www.openstreetmap.org/oauth/authorize';\nexport const apiOSM = 'https://api.openstreetmap.org/api/0.6';\n\nexport const whosThat =\n  'https://rksbsqdel4.execute-api.us-east-1.amazonaws.com/testing?action=names&id=';\n\nexport const nominatimUrl = 'https://nominatim.openstreetmap.org/search.php';\n\n// set a default from date x days before today\nexport const DEFAULT_FROM_DATE = 7;\n// exclude changesets newer than x minutes. It's needed because of the difference\n// between the time a changeset is processed by OSMCha and the time its map\n// visualization is available\nexport const DEFAULT_TO_DATE = 5;\n","// @flow\nimport { Iterable } from 'immutable';\n\nimport { API_URL } from '../config';\nimport type { filtersType, filterType } from '../components/filters';\n\nexport function getString(input) {\n  if (typeof input === 'object') {\n    return JSON.stringify(input);\n  } else {\n    return input;\n  }\n}\n\nexport function handleErrors(response: Object) {\n  if (!response.ok) {\n    return response.json().then(r => {\n      if (response.status === 401) {\n        throw new Error(\n          'Authentication error. Sign in again and repeat the operation.'\n        );\n      }\n      if (response.status === 401) {\n        throw new Error('Operation not allowed.');\n      }\n      if (response.status === 404) {\n        throw new Error('Resource not found.');\n      }\n      if (r && r.detail) throw new Error(r.detail);\n      if (response.statusText) throw new Error(response.statusText);\n      return Promise.reject('network request failed');\n    });\n  }\n  return response;\n}\n\nexport function createAOI(\n  token: string,\n  name: string,\n  filters: filtersType\n): Promise<*> {\n  let serverFilters = {};\n  filters.forEach((v: filterType, k: string) => {\n    if (!Iterable.isIterable(v)) return;\n    let filter = v;\n    serverFilters[k] = filter\n      .filter(x => Iterable.isIterable(x) && x.get('value') !== '')\n      .map(x => getString(x.get('value')))\n      .join(',');\n  });\n  return fetch(`${API_URL}/aoi/`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: token ? `Token ${token}` : ''\n    },\n    body: JSON.stringify({\n      name,\n      filters: serverFilters\n    })\n  })\n    .then(handleErrors)\n    .then(res => {\n      return res.json();\n    });\n}\n\nexport function fetchAOI(token: string, aoiId: number): Promise<*> {\n  return fetch(`${API_URL}/aoi/${aoiId}/`, {\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: token ? `Token ${token}` : ''\n    }\n  })\n    .then(handleErrors)\n    .then(res => {\n      return res.json();\n    });\n}\n\nexport function fetchAllAOIs(token?: string): Promise<*> {\n  if (token == null) return Promise.resolve();\n  return fetch(`${API_URL}/aoi/`, {\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: token ? `Token ${token}` : ''\n    }\n  })\n    .then(handleErrors)\n    .then(res => {\n      return res.json();\n    });\n}\n\nexport function updateAOI(\n  token: string,\n  aoiId: number,\n  name: string,\n  filters: filtersType\n): Promise<*> {\n  let serverFilters = {};\n  filters.forEach((v: filterType, k: string) => {\n    if (!Iterable.isIterable(v)) return;\n    let filter = v;\n    serverFilters[k] = filter\n      .filter(x => Iterable.isIterable(x) && x.get('value') !== '')\n      .map(x => getString(x.get('value')))\n      .join(',');\n  });\n  return fetch(`${API_URL}/aoi/${aoiId}/`, {\n    method: 'PUT',\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: token ? `Token ${token}` : ''\n    },\n    body: JSON.stringify({\n      name,\n      filters: serverFilters\n    })\n  })\n    .then(handleErrors)\n    .then(res => {\n      return res.json();\n    });\n}\n\nexport function deleteAOI(token: string, aoiId: string): Promise<*> {\n  return fetch(`${API_URL}/aoi/${aoiId}/`, {\n    method: 'DELETE',\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: token ? `Token ${token}` : ''\n    }\n  }).then(handleErrors);\n}\n","// @flow\nimport request from 'superagent';\nimport { osmchaSocialTokenUrl } from '../config/constants';\nimport { API_URL } from '../config';\nimport { handleErrors } from './aoi';\n\nexport function postFinalTokensOSMCha(\n  oauth_token: string,\n  oauth_token_secret: string,\n  oauth_verifier: string\n) {\n  return request\n    .post(osmchaSocialTokenUrl)\n    .type('form')\n    .send({ oauth_token: oauth_token })\n    .send({ oauth_verifier: oauth_verifier })\n    .send({ oauth_token_secret: oauth_token_secret })\n    .then(r => {\n      return r.body;\n    })\n    .catch(e => {\n      console.error(e);\n      return Promise.reject(e);\n    });\n}\nexport function postTokensOSMCha() {\n  return request\n    .post(osmchaSocialTokenUrl)\n    .type('form')\n    .then(r => r.body)\n    .catch(e => {\n      console.error(e);\n      return Promise.reject(e);\n    });\n}\n\nexport function fetchUserDetails(token: string) {\n  return fetch(`${API_URL}/users/`, {\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: token ? `Token ${token}` : ''\n    }\n  })\n    .then(handleErrors)\n    .then(res => {\n      return res.json();\n    });\n}\n\nexport function updateUserDetails(\n  token: string,\n  message_good: string,\n  message_bad: string,\n  comment_feature: boolean\n) {\n  return fetch(`${API_URL}/users/`, {\n    method: 'PATCH',\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: token ? `Token ${token}` : ''\n    },\n    body: JSON.stringify({\n      message_good,\n      message_bad,\n      comment_feature\n    })\n  })\n    .then(handleErrors)\n    .then(res => {\n      return res.json();\n    });\n}\n","import { statusUrl } from '../config/constants';\nimport { handleErrors } from './aoi';\n\nexport function getStatus(input, type): Promise<*> {\n  return fetch(`${statusUrl}`, {\n    method: 'GET'\n  })\n    .then(handleErrors)\n    .then(response => {\n      return response.json();\n    });\n}\n","// @flow\nimport { API_URL } from '../config';\nimport { handleErrors } from './aoi';\n\nexport function fetchChangeset(id: number, token: ?string) {\n  return fetch(`${API_URL}/changesets/${id}/`, {\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: token ? `Token ${token}` : ''\n    }\n  })\n    .then(handleErrors)\n    .then(res => {\n      return res.json();\n    });\n}\n\nexport function setHarmful(id: number, token: string, harmful: boolean | -1) {\n  // -1 is for unsetting\n  let url;\n  if (harmful === -1) {\n    url = `${API_URL}/changesets/${id}/uncheck/`;\n  } else {\n    url = `${API_URL}/changesets/${id}/${\n      harmful ? 'set-harmful' : 'set-good'\n    }/`;\n  }\n\n  return fetch(url, {\n    method: 'PUT',\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: token ? `Token ${token}` : ''\n    }\n  })\n    .then(handleErrors)\n    .then(res => {\n      return res.json();\n    });\n}\n\nexport const createForm = (obj: Object) => {\n  var formData = new FormData();\n  Object.keys(obj).forEach(k => {\n    formData.append(k, obj[k]);\n  });\n  return formData;\n};\n\nexport function setTag(\n  id: number,\n  token: string,\n  tag: Object,\n  remove: boolean = false\n) {\n  if (Number.isNaN(parseInt(tag.value, 10))) {\n    throw new Error('tag is not a valid number');\n  }\n  return fetch(`${API_URL}/changesets/${id}/tags/${tag.value}/`, {\n    method: remove ? 'DELETE' : 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: token ? `Token ${token}` : ''\n    },\n    body: createForm({\n      tag_pk: tag,\n      id\n    })\n  })\n    .then(handleErrors)\n    .then(res => {\n      return res.json();\n    });\n}\n\nexport function postComment(id: number, token: string, comment: string) {\n  return fetch(`${API_URL}/changesets/${id}/comment/`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: token ? `Token ${token}` : ''\n    },\n    body: JSON.stringify({\n      comment: comment\n    })\n  })\n    .then(handleErrors)\n    .then(res => {\n      return res.json();\n    });\n}\n","// @flow\nimport { handleErrors } from './aoi';\nimport { API_URL } from '../config';\n\nexport function fetchBlackList(token: string): Promise<*> {\n  return fetch(`${API_URL}/blacklisted-users/`, {\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: token ? `Token ${token}` : ''\n    }\n  })\n    .then(handleErrors)\n    .then(res => {\n      return res.json();\n    });\n}\n\nexport function deleteFromBlackList(token: string, uid: string): Promise<*> {\n  return fetch(`${API_URL}/blacklisted-users/${uid}/`, {\n    method: 'DELETE',\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: token ? `Token ${token}` : ''\n    }\n  }).then(handleErrors);\n}\n\nexport function postUserToBlackList(token: string, data: object): Promise<*> {\n  return fetch(`${API_URL}/blacklisted-users/`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: token ? `Token ${token}` : ''\n    },\n    body: JSON.stringify({\n      username: data.blacklist_user.username,\n      uid: data.blacklist_user.uid\n    })\n  })\n    .then(handleErrors)\n    .then(res => {\n      return res.json();\n    });\n}\n","// @flow\nimport { put, call, take, takeEvery } from 'redux-saga/effects';\nimport { delay } from 'redux-saga';\n\nexport const SHOW_MODAL = 'SHOW_MODAL';\nexport const INIT_MODAL = 'INIT_MODAL';\nexport const ACTIVATE_MODAL_CALLBACK = 'ACTIVATE_MODAL_CALLBACK';\nexport const DISMISS_MODAL = 'DISMISS_MODAL';\n\n// public\n// starting point for react component to start fetch\n\nexport function modal({\n  kind = 'error',\n  error,\n  title,\n  dismiss = true,\n  autoDismiss = 5,\n  position = 'tr',\n  description = 'Please reload the application. If it still doesnt work please refer to usage guide.',\n  callback,\n  callbackArgs,\n  callbackLabel\n}: {\n  kind?: string,\n  error?: Error,\n  title?: string,\n  dismiss?: boolean,\n  autoDismiss?: number,\n  position?: string,\n  description?: string,\n  callback?: Function,\n  callbackArgs?: Array<any>,\n  callbackLabel?: string\n}) {\n  if (error && error.message) {\n    description = error.message;\n  }\n  if (error && error.name) {\n    title = error.name;\n  }\n  if (kind === 'error') {\n    autoDismiss = 10;\n  }\n  return {\n    type: 'INIT_MODAL',\n    payload: {\n      kind,\n      error,\n      callbackLabel,\n      title,\n      dismiss,\n      autoDismiss,\n      position,\n      description\n    },\n    callback,\n    callbackArgs\n  };\n}\n\nexport function action(type: string, payload: ?Object) {\n  return { type, ...payload };\n}\n\nexport const activateModalCallback = (uid: number) =>\n  action(ACTIVATE_MODAL_CALLBACK, { uid });\n\nexport const dismissModalCallback = (uid: number) =>\n  action(DISMISS_MODAL, { uid });\n\nexport function* watchModal(): any {\n  yield takeEvery('INIT_MODAL', handleModal);\n}\n\nfunction* handleModal({ payload, callback, callbackArgs }: Object): any {\n  var uidOriginal = new Date().getTime() + parseInt(1000 * Math.random(), 10);\n  payload.uid = uidOriginal;\n  yield put(action(SHOW_MODAL, payload));\n  if (!callback) return;\n  while (true) {\n    const { type, uid } = yield take([ACTIVATE_MODAL_CALLBACK, DISMISS_MODAL]);\n    if (type === DISMISS_MODAL && uidOriginal === uid) {\n      return;\n    }\n    if (type === ACTIVATE_MODAL_CALLBACK && uidOriginal === uid) {\n      yield call(delay, 500);\n      yield put(callback(...callbackArgs));\n      return;\n    }\n  }\n}\n","// @flow\nimport { handleErrors } from './aoi';\nimport { API_URL } from '../config';\n\nexport function fetchWhiteList(token: string): Promise<*> {\n  return fetch(`${API_URL}/whitelist-user/`, {\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: token ? `Token ${token}` : ''\n    }\n  })\n    .then(handleErrors)\n    .then(res => {\n      return res.json();\n    });\n}\n\nexport function deleteFromWhiteList(\n  token: string,\n  username: string\n): Promise<*> {\n  return fetch(`${API_URL}/whitelist-user/${username}/`, {\n    method: 'DELETE',\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: token ? `Token ${token}` : ''\n    }\n  }).then(handleErrors);\n}\n\nexport function postUserToWhiteList(\n  token: string,\n  whitelist_user: string\n): Promise<*> {\n  return fetch(`${API_URL}/whitelist-user/`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: token ? `Token ${token}` : ''\n    },\n    body: JSON.stringify({\n      whitelist_user\n    })\n  })\n    .then(handleErrors)\n    .then(res => {\n      return res.json();\n    });\n}\n","import { all, put, call, takeEvery, select } from 'redux-saga/effects';\n\nimport {\n  postUserToWhiteList,\n  deleteFromWhiteList\n} from '../network/osmcha_whitelist.js';\nimport { modal } from './modal_actions';\n\nimport type { RootStateType } from './';\n\nexport const WHITELIST = {\n  define: 'WHITELIST.define',\n  add: 'WHITELIST.add',\n  remove: 'WHITELIST.remove',\n  clear: 'WHITELIST.clear'\n};\n\nexport function action(type: string, payload: ?Object) {\n  return { type, ...payload };\n}\n\nexport const tokenSelector = (state: RootStateType) => state.auth.get('token');\n\nexport const addToWhitelist = (whitelist_user: string) =>\n  action(WHITELIST.add, { whitelist_user });\n\nexport const removeFromWhitelist = (whitelist_user: string) =>\n  action(WHITELIST.remove, { whitelist_user });\n\nexport function* watchWhitelist(): any {\n  yield all([\n    takeEvery(WHITELIST.add, addToWhitelistSaga),\n    takeEvery(WHITELIST.remove, removeFromWhitelistSaga)\n  ]);\n}\n\nexport function* addToWhitelistSaga(whitelist_user: string): any {\n  try {\n    const token = yield select(tokenSelector);\n    yield call(postUserToWhiteList, token, whitelist_user.whitelist_user);\n    yield put(\n      modal({\n        title: 'Success',\n        description: `User ${\n          whitelist_user.whitelist_user\n        } added to your Trusted Users list.`,\n        kind: 'success'\n      })\n    );\n  } catch (e) {\n    console.error(e);\n    yield put(\n      modal({\n        error: e\n      })\n    );\n  }\n}\nexport function* removeFromWhitelistSaga(whitelist_user: string): any {\n  try {\n    const token = yield select(tokenSelector);\n    yield call(deleteFromWhiteList, token, whitelist_user.whitelist_user);\n    yield put(\n      modal({\n        title: 'Success',\n        description: `User ${\n          whitelist_user.whitelist_user\n        } removed from your Trusted Users list.`,\n        kind: 'success'\n      })\n    );\n  } catch (e) {\n    console.error(e);\n    yield put(\n      modal({\n        error: e\n      })\n    );\n  }\n}\n","import { all, put, call, takeEvery, select } from 'redux-saga/effects';\n\nimport {\n  postUserToBlackList,\n  deleteFromBlackList\n} from '../network/osmcha_blacklist.js';\nimport { modal } from './modal_actions';\n\nimport type { RootStateType } from './';\n\nexport const BLACKLIST = {\n  define: 'BLACKLIST.define',\n  add: 'BLACKLIST.add',\n  remove: 'BLACKLIST.remove',\n  clear: 'BLACKLIST.clear'\n};\n\nexport function action(type: string, payload: ?Object) {\n  return { type, ...payload };\n}\n\nexport const tokenSelector = (state: RootStateType) => state.auth.get('token');\n\nexport const addToBlacklist = (blacklist_user: string, uid: string) =>\n  action(BLACKLIST.add, { blacklist_user, uid });\n\nexport const removeFromBlacklist = (blacklist_user: string) =>\n  action(BLACKLIST.remove, { blacklist_user });\n\nexport function* watchBlacklist(): any {\n  yield all([\n    takeEvery(BLACKLIST.add, addToBlacklistSaga),\n    takeEvery(BLACKLIST.remove, removeFromBlacklistSaga)\n  ]);\n}\n\nexport function* addToBlacklistSaga(blacklist_user: object): any {\n  try {\n    const token = yield select(tokenSelector);\n    yield call(postUserToBlackList, token, blacklist_user);\n    yield put(\n      modal({\n        title: 'Success',\n        description: `User ${blacklist_user.blacklist_user.username} (${\n          blacklist_user.blacklist_user.uid\n        }) added to your watchlist.`,\n        kind: 'success'\n      })\n    );\n  } catch (e) {\n    console.error(e);\n    yield put(\n      modal({\n        error: e\n      })\n    );\n  }\n}\nexport function* removeFromBlacklistSaga(blacklist_user: string): any {\n  try {\n    const token = yield select(tokenSelector);\n    yield call(deleteFromBlackList, token, blacklist_user.blacklist_user);\n    yield put(\n      modal({\n        title: 'Success',\n        description: `User ${\n          blacklist_user.blacklist_user\n        } removed from your watchlist.`,\n        kind: 'success'\n      })\n    );\n  } catch (e) {\n    console.error(e);\n    yield put(\n      modal({\n        error: e\n      })\n    );\n  }\n}\n","// @flow\nimport { List, Map, fromJS } from 'immutable';\nimport moment from 'moment';\n\nimport { DEFAULT_FROM_DATE, DEFAULT_TO_DATE } from '../config/constants';\nimport type { filtersType } from '../components/filters';\n\nexport function validateFilters(filters: filtersType): boolean {\n  var test = function() {\n    if (!Map.isMap(filters)) return false;\n    let valid = true;\n    filters.forEach((v, k) => {\n      if (!List.isList(v)) {\n        // check for list\n        valid = false;\n      } else {\n        v.forEach(vv => {\n          if (!(Map.isMap(vv) && vv.has('label') && vv.has('value'))) {\n            valid = false;\n          }\n          if (!Map.isMap(vv)) {\n            valid = false;\n          }\n        });\n      }\n    });\n    return valid;\n  };\n  if (!test()) {\n    throw new Error('The filters that you applied were not correct.');\n  } else {\n    return true;\n  }\n}\n\nexport function getDefaultFromDate(): filtersType {\n  const defaultDate = moment()\n    .subtract(DEFAULT_FROM_DATE, 'days')\n    .format('YYYY-MM-DD');\n  return fromJS({\n    date__gte: [\n      {\n        label: defaultDate,\n        value: defaultDate\n      }\n    ]\n  });\n}\n\nexport function getDefaultToDate(): filtersType {\n  const defaultDate = moment()\n    .subtract(DEFAULT_TO_DATE, 'minutes')\n    .utc()\n    .format('YYYY-MM-DD HH:mm');\n  return fromJS({\n    date__lte: [\n      {\n        label: '',\n        value: defaultDate\n      }\n    ]\n  });\n}\n\nexport function appendDefaultDate(filters: filtersType) {\n  if (filters && !filters.has('date__gte') && !filters.has('date__lte')) {\n    filters = filters.merge(getDefaultFromDate());\n  }\n  if (filters && !filters.has('date__lte')) {\n    filters = filters.merge(getDefaultToDate());\n  }\n  return filters;\n}\n","// @flow\nimport { Iterable, List, Map } from 'immutable';\nimport { API_URL } from '../config';\nimport { PAGE_SIZE } from '../config/constants';\nimport { appendDefaultDate } from '../utils/filters';\nimport { handleErrors, getString } from './aoi';\nimport type { filtersType } from '../components/filters';\n\nexport function fetchChangesetsPage(\n  pageIndex: number,\n  filters: filtersType = Map(),\n  token: ?string,\n  nocache: boolean,\n  aoiId: ?string\n) {\n  let flatFilters = '';\n  filters = appendDefaultDate(filters);\n  filters.forEach((v: List<Object>, k: string) => {\n    if (!Iterable.isIterable(v)) return;\n    let filter = v;\n    let filterJoined = filter\n      .filter(x => Iterable.isIterable(x) && x.get('value') !== '')\n      .map(x => getString(x.get('value')))\n      .join(',');\n\n    if (filterJoined === '') return;\n    flatFilters += `&${k}=${encodeURIComponent(filterJoined)}`;\n  });\n  let url = `${API_URL}/changesets/?${\n    nocache // for cache busting of this pattern /\\/changesets\\/#nocache\\?page=/\n      ? `page_size=${PAGE_SIZE}&page=${pageIndex + 1}`\n      : `page=${pageIndex + 1}&page_size=${PAGE_SIZE}`\n  }${flatFilters}`;\n  if (aoiId) {\n    url = `${API_URL}/aoi/${aoiId}/changesets/?${\n      nocache\n        ? `page_size=${PAGE_SIZE}&page=${pageIndex + 1}`\n        : `page=${pageIndex + 1}&page_size=${PAGE_SIZE}`\n    }`;\n  }\n  return fetch(url, {\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: token ? `Token ${token}` : ''\n    }\n  }).then(res => {\n    if (res.status === 401) {\n      return Promise.reject(\n        Error('Authentication error. Sign in again and repeat the operation.')\n      );\n    }\n    if (res.status === 403) {\n      return Promise.reject(Error('Operation not allowed.'));\n    }\n    if (res.status >= 400 && res.status < 600) {\n      return Promise.reject(\n        Error(\n          'Bad request. Please check your filters or your network connection.'\n        )\n      );\n    }\n    return res.json();\n  });\n}\n\nexport function fetchAOIChangesetPage(\n  pageIndex: number,\n  aoiId: string,\n  token: string\n) {\n  return fetch(\n    `${API_URL}/aoi/${aoiId}/changesets/?page_size=${PAGE_SIZE}&page=${pageIndex +\n      1}`,\n    {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: token ? `Token ${token}` : ''\n      }\n    }\n  )\n    .then(handleErrors)\n    .then(res => {\n      return res.json();\n    });\n}\n","// @flow\nimport { parse, stringify } from 'query-string';\nimport { fromJS, Map } from 'immutable';\n\nexport function getSearchObj(searchParam: string = ''): Map<string, *> {\n  let result = {};\n  try {\n    result = parse(searchParam);\n    if (result.filters) {\n      result.filters = JSON.parse(result.filters);\n    }\n  } catch (e) {\n    console.error(e);\n  } finally {\n    return fromJS(result);\n  }\n}\n\nexport function getObjAsQueryParam(key: string, obj: Object) {\n  if (!obj || Object.keys(obj).length === 0) {\n    return '';\n  }\n  return stringify({\n    [key]: JSON.stringify(obj)\n  });\n}\n","// @flow\nimport { API_URL } from '../config';\nimport { handleErrors } from './aoi';\n\nexport function fetchReasons(token: ?string) {\n  return fetch(`${API_URL}/suspicion-reasons/`, {\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: token ? `Token ${token}` : ''\n    }\n  })\n    .then(handleErrors)\n    .then(res => {\n      return res.json();\n    });\n}\n\nexport function fetchTags(token: ?string) {\n  return fetch(`${API_URL}/tags/`, {\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: token ? `Token ${token}` : ''\n    }\n  })\n    .then(handleErrors)\n    .then(res => {\n      return res.json();\n    });\n}\n","// @flow\nimport { put, call, select, all, takeLatest } from 'redux-saga/effects';\nimport { fromJS, Map } from 'immutable';\nimport { push } from 'react-router-redux';\n\nimport { fetchAOI, createAOI, updateAOI } from '../network/aoi';\nimport { fetchReasons, fetchTags } from '../network/reasons_tags';\nimport { validateFilters } from '../utils/filters';\nimport { CHANGESETS_PAGE, FILTERS } from './filters_actions';\nimport { tokenSelector } from './auth_actions';\nimport { modal } from './modal_actions';\nimport type { filtersType } from '../components/filters';\nimport type { RootStateType } from './';\n\nexport const AOI = {\n  fetch: 'AOI.fetch',\n  clear: 'AOI.clear',\n  fetched: 'AOI.fetched',\n  create: 'AOI.create',\n  update: 'AOI.update',\n  loading: 'AOI.loading',\n  error: 'AOI.error'\n};\n\nexport function action(type: string, payload: ?Object) {\n  return { type, ...payload };\n}\n\nexport const applyUpdateAOI = (\n  aoiId: string,\n  name: string,\n  filters: filtersType\n) => action(AOI.update, { aoiId, name, filters });\n\nexport const applyCreateAOI = (name: string, filters: filtersType) =>\n  action(AOI.create, { name, filters });\n\nexport function* watchAOI(): any {\n  yield all([\n    takeLatest(AOI.update, updateAOISaga),\n    takeLatest(AOI.create, createAOISaga)\n  ]);\n}\n\nexport function* fetchAOISaga(aoiId: string): any {\n  yield put(action(AOI.loading, { loading: true }));\n  const token = yield select(tokenSelector);\n  const data = yield call(fetchAOI, token, aoiId);\n  const reasons = yield call(fetchReasons, token);\n  const tags = yield call(fetchTags, token);\n  const aoi = fromJS(data);\n  yield put(action(AOI.fetched, { aoi }));\n  let filters = aoi.getIn(['properties', 'filters'], Map());\n  filters = filters.map((v, k) => {\n    if (k === 'reasons') {\n      return fromJS(\n        v.split(',').map(o => ({\n          value: o,\n          label: reasons.filter(i => i.id == o)[0]['name']\n        }))\n      );\n    }\n    if (k === 'tags') {\n      return fromJS(\n        v.split(',').map(o => ({\n          value: o,\n          label: tags.filter(i => i.id == o)[0]['name']\n        }))\n      );\n    }\n    try {\n      if (JSON.parse(v) && JSON.parse(v).hasOwnProperty('coordinates')) {\n        return fromJS([\n          {\n            value: JSON.parse(v),\n            label: JSON.parse(v)\n          }\n        ]);\n      } else {\n        throw SyntaxError;\n      }\n    } catch (e) {\n      const options = v.split(',');\n      return fromJS(\n        options.map(o => ({\n          value: o,\n          label: o\n        }))\n      );\n    }\n  });\n  return filters;\n}\n\nexport function* createAOISaga({\n  name,\n  filters\n}: {\n  name: string,\n  filters: filtersType\n}): any {\n  try {\n    yield put(action(AOI.loading, { loading: true }));\n    const token = yield select(tokenSelector);\n    const data = yield call(createAOI, token, name, filters);\n    const aoi = fromJS(data);\n    yield put(action(AOI.fetched, { aoi }));\n    let location = yield select(locationSelector);\n    yield put(\n      push({\n        ...location,\n        pathname: location.pathname,\n        search: `aoi=${data.id}`\n      })\n    );\n  } catch (e) {\n    console.error(e);\n    yield put(\n      modal({\n        error: e\n      })\n    );\n  }\n}\n\nexport function* updateAOISaga({\n  aoiId,\n  name,\n  filters\n}: {\n  aoiId: string,\n  name: string,\n  filters: filtersType\n}): any {\n  try {\n    yield put(action(AOI.loading, { loading: true }));\n    const token = yield select(tokenSelector);\n    const data = yield call(updateAOI, token, aoiId, name, filters);\n    const aoi = fromJS(data);\n    yield put(action(AOI.fetched, { aoi }));\n    yield call(validateFilters, filters);\n    yield put(\n      action(FILTERS.set, {\n        filters\n      })\n    );\n    yield put(\n      action(CHANGESETS_PAGE.fetch, { pageIndex: 0, aoiId: aoiId, filters })\n    );\n  } catch (e) {\n    console.error(e);\n    yield put(\n      modal({\n        error: e\n      })\n    );\n  }\n}\n\nexport const locationSelector = (state: RootStateType) =>\n  state.routing.location;\n","// @flow\nimport {\n  put,\n  call,\n  take,\n  fork,\n  select,\n  cancel,\n  all,\n  takeLatest\n} from 'redux-saga/effects';\nimport { LOCATION_CHANGE } from 'react-router-redux';\nimport { Map } from 'immutable';\nimport { push } from 'react-router-redux';\n\nimport { getSearchObj, getObjAsQueryParam } from '../utils/query_params';\nimport { validateFilters } from '../utils/filters';\nimport { fetchAOISaga, AOI } from './aoi_actions';\n\nimport { modal } from './modal_actions';\n\nimport type { RootStateType } from './';\nimport type { filtersType } from '../components/filters';\n\nexport const CHANGESETS_PAGE = {\n  fetch: 'CHANGESETS_PAGE_FETCH',\n  fetched: 'CHANGESETS_PAGE_FETCHED',\n  modify: 'CHANGESETS_PAGE_MODIFY_CHANGESET',\n  loading: 'CHANGESETS_PAGE_LOADING',\n  error: 'CHANGESETS_PAGE_ERROR',\n  checkNew: 'CHANGESETS_PAGE_CHECK_NEW_CHANGESETS',\n  updateNewCount: 'CHANGESETS_PAGE_UPDATE_NEW_COUNT',\n  checkNewLoading: 'CHANGESETS_PAGE_CHECK_NEW_LOADING'\n};\n\nexport const FILTERS = {\n  set: 'FILTERS_SET',\n  apply: 'FILTERS_APPLY'\n};\n\nexport function action(type: string, payload: ?Object) {\n  return { type, ...payload };\n}\n\nexport const applyFilters = (filters: filtersType, pathname: ?string) =>\n  action(FILTERS.apply, { filters, pathname });\n\nexport function* watchFilters(): any {\n  yield all([\n    watchLocationChange(),\n    takeLatest(FILTERS.apply, applyFilterSaga)\n  ]);\n}\n\nexport function* watchLocationChange(): any {\n  let lastTask;\n  let lastSearchString;\n  while (true) {\n    const action = yield take(LOCATION_CHANGE);\n    const location = action.payload;\n\n    if (lastSearchString === location.search) {\n      continue;\n    }\n    lastSearchString = location.search;\n\n    if (lastTask) {\n      yield cancel(lastTask);\n    }\n    lastTask = yield fork(filtersSaga, location);\n  }\n}\n\nexport function* applyFilterSaga({\n  filters,\n  pathname\n}: {\n  filters: filtersType,\n  pathname: string\n}): any {\n  const search = getObjAsQueryParam('filters', filters.toJS());\n  let location = yield select(locationSelector);\n  // I could find one comment on `push(location)` in the readme\n  // ref: https://github.com/ReactTraining/react-router/tree/master/packages/react-router-redux\n  yield put(\n    push({\n      ...location,\n      pathname: pathname || location.pathname,\n      search // update the search\n    })\n  );\n}\n\nexport function* filtersSaga(location: Object): any {\n  try {\n    // the url can only contain two things `filters` or `aoiId`\n    let { filters, aoi: aoiId } = getSearchObj(location.search).toObject();\n\n    if (!filters) filters = Map();\n\n    if (aoiId) {\n      filters = yield call(fetchAOISaga, aoiId);\n    } else {\n      // if there is no active AOI in use\n      // we might want to clear so that other\n      // sagas continue using regular filters.\n      yield put(action(AOI.clear));\n    }\n    // NOTE! `validateFilters` will throw an Error if invalid\n    yield call(validateFilters, filters);\n    yield put(\n      action(FILTERS.set, {\n        filters\n      })\n    );\n    if (aoiId) {\n      yield put(\n        action(CHANGESETS_PAGE.fetch, { pageIndex: 0, filters, aoiId })\n      );\n    } else {\n      yield put(action(CHANGESETS_PAGE.fetch, { pageIndex: 0, filters }));\n    }\n  } catch (e) {\n    console.error(e);\n    const location = yield select(locationSelector);\n    location.search = '';\n    yield all([\n      put(\n        modal({\n          error: e\n        })\n      ),\n      put(push(location))\n    ]);\n  }\n}\n\nexport const locationSelector = (state: RootStateType) =>\n  state.routing.location;\n\n/** Sagas **/\n\nexport const filtersSelector = (state: RootStateType) =>\n  state.filters.get('filters');\n","// @flow\nimport { put, call, takeLatest, select, all } from 'redux-saga/effects';\nimport { delay } from 'redux-saga';\n\nimport { fromJS, List, Map } from 'immutable';\nimport { fetchChangesetsPage } from '../network/changesets_page';\nimport { filtersSelector } from './filters_actions';\n\nimport { modal } from './modal_actions';\n\nimport type { RootStateType } from './';\nimport type { filtersType } from '../components/filters';\n\nexport const CHANGESETS_PAGE = {\n  fetch: 'CHANGESETS_PAGE_FETCH',\n  fetched: 'CHANGESETS_PAGE_FETCHED',\n  modify: 'CHANGESETS_PAGE_MODIFY_CHANGESET',\n  loading: 'CHANGESETS_PAGE_LOADING',\n  error: 'CHANGESETS_PAGE_ERROR',\n  checkNew: 'CHANGESETS_PAGE_CHECK_NEW_CHANGESETS',\n  updateNewCount: 'CHANGESETS_PAGE_UPDATE_NEW_COUNT',\n  checkNewLoading: 'CHANGESETS_PAGE_CHECK_NEW_LOADING'\n};\n\nexport function action(type: string, payload: ?Object) {\n  return { type, ...payload };\n}\n\n// public\n// starting point for react component to start fetch\nexport const getChangesetsPage = (pageIndex: number, nocache: boolean) =>\n  action(CHANGESETS_PAGE.fetch, { pageIndex, nocache });\n\n// this just checks for new changesets and updates the\n// `changesetsPage/diff` in the store.\n// @param nocache - to avoid cache busting.\nexport const checkForNewChangesets = (nocache: boolean) =>\n  action(CHANGESETS_PAGE.checkNew, { nocache });\n\nexport function* watchChangesetsPage(): any {\n  yield all([\n    takeLatest(CHANGESETS_PAGE.fetch, fetchChangesetsPageSaga),\n    takeLatest(CHANGESETS_PAGE.modify, modifyChangesetPageSaga),\n    takeLatest(CHANGESETS_PAGE.checkNew, checkForNewChangesetsSaga)\n  ]);\n}\n\nexport const locationSelector = (state: RootStateType) =>\n  state.routing.location;\n\n/** Sagas **/\n\nexport const pageIndexSelector = (state: RootStateType) => [\n  state.changesetsPage.getIn(['pageIndex'], 0)\n];\nexport const tokenSelector = (state: RootStateType) => state.auth.get('token');\n\nexport const aoiIdSelector = (state: RootStateType) =>\n  state.aoi.getIn(['aoi', 'id']);\n\nexport function* fetchChangesetsPageSaga({\n  pageIndex,\n  nocache,\n  filters,\n  aoiId\n}: {\n  pageIndex?: number,\n  nocache: boolean,\n  filters?: filtersType,\n  aoiId?: string\n}): Object {\n  if (!filters) {\n    filters = yield select(filtersSelector);\n  }\n  if (!aoiId) {\n    aoiId = yield select(aoiIdSelector);\n  }\n  let oldPageIndex: number = yield select(pageIndexSelector);\n\n  // checks both undefined and null\n  if (pageIndex == null) {\n    pageIndex = oldPageIndex;\n  }\n  yield put(\n    action(CHANGESETS_PAGE.loading, {\n      pageIndex\n    })\n  );\n  try {\n    let token = yield select(tokenSelector);\n    let thisPage;\n    if (aoiId) {\n      thisPage = yield call(\n        fetchChangesetsPage,\n        pageIndex,\n        filters,\n        token,\n        nocache,\n        aoiId\n      );\n    } else {\n      thisPage = yield call(\n        fetchChangesetsPage,\n        pageIndex,\n        filters,\n        token,\n        nocache\n      );\n    }\n    yield put(\n      action(CHANGESETS_PAGE.fetched, {\n        data: fromJS(thisPage),\n        pageIndex\n      })\n    );\n  } catch (error) {\n    yield put(\n      action(CHANGESETS_PAGE.error, {\n        pageIndex: oldPageIndex,\n        error\n      })\n    );\n    error.name = `Failed to load page ${pageIndex}`;\n    yield put(\n      modal({\n        error,\n        callback: action,\n        callbackLabel: 'Retry',\n        callbackArgs: [CHANGESETS_PAGE.fetch, { pageIndex }]\n      })\n    );\n  }\n}\n\nexport const currentPageAndIndexSelector = (state: RootStateType) => [\n  state.changesetsPage.getIn(['currentPage'], Map()),\n  state.changesetsPage.getIn(['pageIndex'], 0)\n];\n\nexport function* modifyChangesetPageSaga({\n  changesetId,\n  changeset\n}: Object): any {\n  try {\n    // try to modify the changeset inside the page\n    // to reflect any kind of changes in the changesetList\n    let [currentPage, pageIndex] = yield select(currentPageAndIndexSelector);\n\n    let features: List<Map<string, *>> = currentPage.get('features');\n\n    const index = features.findIndex(f => f.get('id') === changesetId);\n    if (index > -1) {\n      currentPage = currentPage.setIn(['features', index], changeset);\n      yield put(\n        action(CHANGESETS_PAGE.fetched, {\n          data: currentPage,\n          pageIndex\n        })\n      );\n      // check for new changesets\n      yield put(action(CHANGESETS_PAGE.checkNew));\n    }\n  } catch (e) {\n    console.error(e);\n  }\n}\n\nexport function* checkForNewChangesetsSaga({\n  nocache\n}: {\n  nocache: boolean\n}): any {\n  try {\n    yield put(action(CHANGESETS_PAGE.checkNewLoading));\n    yield call(delay, 3000 + Math.random() * 2000);\n    const [\n      filters: filtersType,\n      pageIndex: number,\n      token,\n      aoiId\n    ] = yield select((state: RootStateType) => [\n      state.filters.get('filters'),\n      state.changesetsPage.get('pageIndex'),\n      state.auth.get('token'),\n      state.aoi.get('aoi').get('id')\n    ]);\n    let newData = yield call(\n      fetchChangesetsPage,\n      pageIndex,\n      filters,\n      token,\n      nocache,\n      aoiId\n    );\n    let oldData = yield select((state: RootStateType) =>\n      state.changesetsPage.get('currentPage')\n    );\n    let diff = 0;\n    if (oldData) {\n      newData = fromJS(newData.features.map(f => f.id)).toSet();\n      oldData = oldData\n        .get('features')\n        .map(f => f.get('id'))\n        .toSet();\n      diff = newData.subtract(oldData).size;\n    }\n    yield put(\n      action(CHANGESETS_PAGE.updateNewCount, {\n        diff\n      })\n    );\n  } catch (e) {\n    console.error(e);\n  }\n}\n","export default {\n  NOT_LOGGED_IN: {\n    kind: 'error',\n    title: 'Sign in required',\n    description: 'This action requires you to sign in first.'\n  },\n  MODIFY_SUCCESS: {\n    kind: 'success',\n    title: 'Successful',\n    autoDismiss: 2,\n    description: changesetId =>\n      `The changeset ${changesetId} was successfully modified.`\n  }\n};\n","// @flow\nlet cmap;\nexport function importChangesetMap(module: string): Promise<*> {\n  if (cmap) return Promise.resolve(cmap[module]);\n  return import('changeset-map')\n    .then(function(m) {\n      cmap = m;\n      return cmap[module];\n    })\n    .catch(function(err) {\n      console.error(err);\n      console.log('Failed to load module changeset-map');\n    });\n}\n","// @flow\nimport { matchPath } from 'react-router';\n\nexport function getParam(param: string, location: Object, path: string) {\n  const match = matchPath(location.pathname, path);\n  if (!match) return null;\n  return match.params[param];\n}\n\nexport function getChangesetIdFromLocation(location: Object) {\n  const changesetId = parseInt(getParam('id', location, '/changesets/:id'), 10);\n  if (!changesetId || Number.isNaN(changesetId)) {\n    return null;\n  }\n  return changesetId;\n}\n\nexport function checkForLegacyURL(location: Object) {\n  const changesetId = parseInt(getParam('id', location, '/:id'), 10);\n  if (!changesetId || Number.isNaN(changesetId)) {\n    return null;\n  }\n  return changesetId;\n}\n","// @flow\nimport { put, call, take, fork, select, cancel } from 'redux-saga/effects';\n\nimport { fromJS, Map, List } from 'immutable';\nimport { LOCATION_CHANGE, replace, push } from 'react-router-redux';\nimport notifications from '../config/notifications';\n\nimport { fetchChangeset, setHarmful, setTag } from '../network/changeset';\nimport { importChangesetMap } from '../utils/cmap';\n\nimport {\n  getChangesetIdFromLocation,\n  checkForLegacyURL\n} from '../utils/routing';\n\nimport type { RootStateType } from './';\nimport { modal } from './modal_actions';\n\nimport { CHANGESETS_PAGE } from './changesets_page_actions';\n\nexport const CHANGESET = {\n  fetch: 'CHANGESET.fetch',\n  fetched: 'CHANGESET.fetched',\n  change: 'CHANGESET.change',\n  loading: 'CHANGESET.loading',\n  error: 'CHANGESET.error'\n};\nexport const CHANGESET_MODIFY = {\n  modify: 'CHANGESET_MODIFY.modify',\n  harmful: 'CHANGESET_MODIFY.harmful',\n  revert: 'CHANGESET_MODIFY.revert',\n  tag: 'CHANGESET_MODIFY.tag'\n};\nexport const CHANGESET_MAP = {\n  fetched: 'CHANGESET_MAP.fetched',\n  loading: 'CHANGESET_MAP.loading',\n  change: 'CHANGESET_MAP.change',\n  error: 'CHANGESET_MAP.error'\n};\n\nexport function action(type: string, payload: ?Object) {\n  return { type, ...payload };\n}\n\n// public\n// starting point for react component to start fetch\nexport const getChangeset = (changesetId: number) =>\n  action(CHANGESET.fetch, { changesetId });\n\nexport const handleChangesetModifyHarmful = (\n  changesetId: number,\n  changeset: Map<string, *>,\n  harmful: boolean | -1\n) =>\n  action(CHANGESET_MODIFY.harmful, {\n    oldChangeset: changeset,\n    changesetId,\n    harmful\n  });\n\nexport const handleChangesetModifyTag = (\n  changesetId: number,\n  changeset: Map<string, *>,\n  tag: Object,\n  remove: boolean\n) =>\n  action(CHANGESET_MODIFY.tag, {\n    oldChangeset: changeset,\n    changesetId,\n    tag,\n    remove\n  });\n\n// watches for LOCATION_CHANGE and only\n// dispatches the latest one to get changeset\n// and cMap details. It cancels the ongoign tasks\n// if route changes in between.\nexport function* watchChangeset(): any {\n  let changesetTask;\n  let changesetMapTask;\n  while (true) {\n    const { payload: location } = yield take(LOCATION_CHANGE);\n    const changesetId = yield call(shouldUpdateSaga, location);\n    if (changesetId) {\n      /**\n       *  cancel any existing changeset tasks,\n       *  even if it doesnt change to `changesets/:id`\n       *  we anway would like to suspend the ongoing task\n       *  to save resouces\n       */\n      if (changesetTask) yield cancel(changesetTask);\n      if (changesetMapTask) yield cancel(changesetMapTask);\n\n      changesetTask = yield fork(fetchChangesetAction, changesetId);\n      changesetMapTask = yield fork(fetchChangesetMapAction, changesetId);\n    }\n  }\n}\n\nexport function* shouldUpdateSaga(location: Object): any {\n  // checks for the old osmcha style urls\n  // eg osmcha.org/34354242 and redirects them\n  // to osmcha.org/changesets/3432434\n  const legacy = checkForLegacyURL(location);\n  if (legacy) {\n    yield put(\n      replace({\n        ...location,\n        pathname: '/changesets/' + legacy\n      })\n    );\n    return false;\n  }\n  let changesetId = getChangesetIdFromLocation(location);\n\n  if (!changesetId) return false;\n\n  let oldChangesetId = yield select(\n    (state: RootStateType) =>\n      !state.changeset.get('errorChangeset') &&\n      !state.changeset.get('errorChangesetMap') &&\n      state.changeset.get('changesetId')\n  );\n\n  if (oldChangesetId !== changesetId) {\n    return changesetId;\n  }\n}\n\nexport function* watchModifyChangeset(): any {\n  while (true) {\n    const modifyAction = yield take([\n      CHANGESET_MODIFY.harmful,\n      CHANGESET_MODIFY.tag\n    ]); // scope for multiple modify actions in future\n    const { token, username } = yield select((state: RootStateType) => ({\n      token: state.auth.get('token'),\n      username: state.auth.getIn(['userDetails', 'username'])\n    }));\n    if (!token) {\n      yield put(\n        modal({\n          ...notifications.NOT_LOGGED_IN\n        })\n      );\n      continue;\n    }\n    // all modify actions should have changesetId, oldChangeset\n    const { changesetId, oldChangeset } = modifyAction;\n\n    if (!oldChangeset) {\n      continue;\n    }\n    let newChangeset;\n    try {\n      switch (modifyAction.type) {\n        case CHANGESET_MODIFY.harmful: {\n          const harmful = modifyAction.harmful;\n          newChangeset = yield call(setHarmfulAction, {\n            changesetId,\n            oldChangeset,\n            token,\n            harmful,\n            username\n          });\n          break;\n        }\n        case CHANGESET_MODIFY.tag: {\n          const { tag, remove } = modifyAction;\n          newChangeset = yield call(setTagActions, {\n            changesetId,\n            oldChangeset,\n            token,\n            tag,\n            remove\n          });\n          break;\n        }\n        default: {\n          continue;\n        }\n      }\n    } catch (error) {\n      yield put(\n        action(CHANGESET_MODIFY.revert, {\n          changesetId,\n          changeset: oldChangeset\n        })\n      );\n      yield put(\n        modal({\n          error\n        })\n      );\n    }\n    // update the change in changeset list also aka changesetP\n    if (newChangeset) {\n      yield put(\n        action(CHANGESETS_PAGE.modify, {\n          changesetId,\n          changeset: newChangeset\n        })\n      );\n    }\n  }\n}\n\nexport const changesetsSelector = (state: RootStateType) => {\n  return state.changeset.getIn(['changesets'], Map());\n};\nexport const tokenSelector = (state: RootStateType) => state.auth.get('token');\nexport const locationSelector = (state: RootStateType) =>\n  state.routing.location;\n\n/** Sagas **/\nexport function* fetchChangesetAction(changesetId: number): Object {\n  let changesets = yield select(changesetsSelector);\n  let changeset = changesets.get(changesetId);\n  // check if the changeset already exists\n  // if it does! make it active and exit\n  if (changeset) {\n    yield put(\n      action(CHANGESET.change, {\n        changesetId\n      })\n    );\n    return;\n  }\n\n  yield put(\n    action(CHANGESET.loading, {\n      changesetId\n    })\n  );\n\n  try {\n    let token = yield select(tokenSelector);\n    changeset = yield call(fetchChangeset, changesetId, token);\n    yield put(\n      action(CHANGESET.fetched, {\n        data: fromJS(changeset),\n        changesetId\n      })\n    );\n  } catch (error) {\n    yield put(\n      action(CHANGESET.error, {\n        changesetId,\n        error\n      })\n    );\n    const location = yield select(locationSelector);\n    error.name = `Changeset:${changesetId} failed`;\n    yield put(\n      modal({\n        error,\n        callback: push,\n        callbackArgs: [location],\n        callbackLabel: 'Retry'\n      })\n    );\n  }\n}\n\nexport function changesetMapModule(changesetId: number): any {\n  return importChangesetMap('getChangeset').then((getCMapData: any) =>\n    getCMapData(changesetId)\n  );\n}\nexport const changesetMapSelector = (state: RootStateType) =>\n  state.changeset.getIn(['changesetMap'], Map());\n\nexport function* fetchChangesetMapAction(changesetId: number): Object {\n  const changesetMaps = yield select(changesetMapSelector);\n  let changesetMap = changesetMaps.get(changesetId);\n\n  if (changesetMap) {\n    yield put(\n      action(CHANGESET_MAP.change, {\n        changesetId\n      })\n    );\n    return;\n  }\n  yield put(\n    action(CHANGESET_MAP.loading, {\n      changesetId\n    })\n  );\n  try {\n    changesetMap = yield call(changesetMapModule, changesetId);\n    yield put(\n      action(CHANGESET_MAP.fetched, {\n        data: changesetMap,\n        changesetId\n      })\n    );\n  } catch (error) {\n    yield put(\n      action(CHANGESET_MAP.error, {\n        changesetId,\n        error\n      })\n    );\n    const location = yield select(locationSelector);\n    error.name = `Changeset:${changesetId} Map failed`;\n    yield put(\n      modal({\n        error,\n        callback: push,\n        callbackArgs: [location],\n        callbackLabel: 'Retry'\n      })\n    );\n  }\n}\n\nexport function* setHarmfulAction({\n  changesetId,\n  oldChangeset,\n  token,\n  harmful,\n  username\n}: Object): any {\n  const newChangeset = oldChangeset\n    .setIn(['properties', 'check_user'], harmful === -1 ? null : username)\n    // .setIn(\n    //   ['properties', 'tags'],\n    //   harmful === -1 ? List() : oldChangeset.getIn(['properties', 'tags'])\n    // )\n    .setIn(['properties', 'checked'], harmful === -1 ? false : true)\n    .setIn(['properties', 'harmful'], harmful === -1 ? null : harmful);\n\n  // update changeset list\n  yield put(\n    action(CHANGESET_MODIFY.modify, {\n      changesetId,\n      changeset: newChangeset\n    })\n  );\n  yield call(setHarmful, changesetId, token, harmful);\n  return newChangeset;\n}\n\nexport function* setTagActions({\n  changesetId,\n  oldChangeset,\n  token,\n  tag,\n  remove\n}: Object): any {\n  if (oldChangeset.getIn(['properties', 'checked'])) {\n    // TOFIX also check for user\n    let newChangeset = oldChangeset;\n    let existingTags: List<*>;\n    if (remove) {\n      existingTags = oldChangeset.getIn(['properties', 'tags']);\n      let key;\n      existingTags.forEach((t, i) => {\n        if (t.get('id') === tag.value) {\n          key = i;\n        }\n      });\n      newChangeset = oldChangeset.setIn(\n        ['properties', 'tags'],\n        existingTags.delete(key)\n      );\n    } else {\n      // TOFIX consolidate the convention of backend using id and name\n      // and I using label and value.\n      existingTags = oldChangeset.getIn(['properties', 'tags']);\n      newChangeset = oldChangeset.setIn(\n        ['properties', 'tags'],\n        existingTags.push(new Map().set('id', tag.value).set('name', tag.label))\n      );\n    }\n\n    yield put(\n      action(CHANGESET_MODIFY.modify, {\n        changesetId,\n        changeset: newChangeset\n      })\n    );\n    yield call(setTag, changesetId, token, tag, remove);\n    return newChangeset;\n  } else {\n    throw new Error('Only allowed on checked changesets');\n  }\n}\n","// @flow\nimport { put, call, take, select, all, takeLatest } from 'redux-saga/effects';\nimport { delay as delayPromise } from 'redux-saga';\nimport { push } from 'react-router-redux';\nimport { fromJS } from 'immutable';\n\nimport {\n  postTokensOSMCha,\n  postFinalTokensOSMCha,\n  fetchUserDetails,\n  updateUserDetails\n} from '../network/auth';\nimport { getStatus } from '../network/status';\nimport { fetchChangeset } from '../network/changeset';\nimport { fetchBlackList } from '../network/osmcha_blacklist';\nimport { setItem, removeItem } from '../utils/safe_storage';\nimport { modal } from './modal_actions';\nimport { WHITELIST } from './whitelist_actions';\nimport { BLACKLIST } from './blacklist_actions';\nimport { pageIndexSelector, CHANGESETS_PAGE } from './changesets_page_actions';\nimport { CHANGESET } from './changeset_actions';\n\nimport type { RootStateType } from './';\n\nexport const AUTH = {\n  postSocialToken: 'AUTH_POST_SOCIAL_TOKEN',\n  saveOAuth: 'AUTH_SAVE_OAUTH_OBJ',\n  getFinalToken: 'AUTH_GET_FINAL_TOKEN',\n  saveToken: 'AUTH_SAVE_TOKEN',\n  logout: 'AUTH_LOGOUT',\n  clearSession: 'AUTH_CLEAR_SESSION',\n  loginError: 'AUTH_LOGIN_ERROR',\n  userDetails: 'AUTH_USER_DETAILS',\n  clearUserDetails: 'AUTH_CLEAR_USER_DETAILS',\n  updateUserDetails: 'UPDATE_USER_DETAILS'\n};\n\nexport function action(type: string, payload: ?Object) {\n  return { type, ...payload };\n}\n\n// public\n// starting point for react component to start fetch\nexport const getOAuthToken = () => action(AUTH.postSocialToken);\n\nexport const getFinalToken = (oauth_verifier: string) =>\n  action(AUTH.getFinalToken, { oauth_verifier });\n\nexport const logUserOut = () => action(AUTH.logout);\n\nexport const tokenSelector = (state: RootStateType) => state.auth.get('token');\n\nexport const locationSelector = (state: RootStateType) =>\n  state.routing.location;\n\nexport const changesetIdSelector = (state: RootStateType) =>\n  state.changeset.get('changesetId');\n\nconst delay = process.env.NODE_ENV === 'test' ? () => {} : delayPromise;\nconst DELAY = 1000;\n\nexport const applyUpdateUserDetails = (\n  message_good: string,\n  message_bad: string,\n  comment_feature: boolean\n) =>\n  action(AUTH.updateUserDetails, {\n    message_good,\n    message_bad,\n    comment_feature\n  });\n\nexport function* watchUserDetails(): any {\n  yield all([takeLatest(AUTH.updateUserDetails, updateUserDetailsSaga)]);\n}\n\nexport function* watchAuth(): any {\n  // get the token from localStorage.\n  // if it exists we just need to wait for\n  // logout action.\n  let delayBy = 1000;\n  let token = yield select(tokenSelector);\n\n  // wrapping it in a for loop allows us to\n  // pause or resume our auth workflow\n  // info: https://redux-saga.js.org/docs/advanced/NonBlockingCalls.html\n  while (true) {\n    try {\n      if (!token) {\n        token = yield call(authTokenFlow);\n      }\n      const userDetails = fromJS(yield call(fetchUserDetails, token));\n      const whitelist = userDetails.get('whitelists');\n      const blacklist = fromJS(yield call(fetchBlackList, token));\n      const status = fromJS(yield call(getStatus));\n      yield put(action(WHITELIST.define, { whitelist }));\n      yield put(action(BLACKLIST.define, { blacklist }));\n      yield put(action(AUTH.userDetails, { userDetails }));\n      let pageIndex = yield select(pageIndexSelector);\n      if (pageIndex) {\n        yield put(action(CHANGESETS_PAGE.fetch, { pageIndex }));\n      }\n      let changesetId = yield select(changesetIdSelector);\n      if (changesetId) {\n        let changeset = yield call(fetchChangeset, changesetId, token);\n        yield put(\n          action(CHANGESET.fetched, {\n            data: fromJS(changeset),\n            changesetId\n          })\n        );\n      }\n      // show status notification\n      if (status.get('status') !== 'success') {\n        yield put(\n          modal({\n            title: 'OSMCha Status',\n            description: status.get('message'),\n            kind: status.get('status'),\n            autoDismiss: 20,\n            position: 'bc'\n          })\n        );\n      }\n\n      yield take(AUTH.logout);\n      delayBy = DELAY;\n      token = undefined;\n      yield call(logoutFlow);\n      yield call(delay, delayBy);\n    } catch (error) {\n      console.log(error);\n      yield put(action(AUTH.loginError, error));\n      yield call(delay, delayBy / 2);\n      error.name = 'Error';\n      yield put(\n        modal({\n          error,\n          kind: 'warning'\n        })\n      );\n      yield take(AUTH.logout);\n      delayBy = 4 * delayBy;\n      token = undefined;\n      yield call(logoutFlow);\n      yield call(delay, delayBy);\n    }\n  }\n}\n\nexport function* logoutFlow(): any {\n  yield call(removeItem, 'token');\n  yield call(removeItem, 'oauth_token');\n  yield call(removeItem, 'oauth_token_secret');\n  yield put(action(AUTH.clearSession));\n  yield put(action(WHITELIST.clear));\n  // get CHANGESET_PAGE without user metadata\n  let pageIndex = yield select(pageIndexSelector);\n  if (pageIndex) {\n    yield put(action(CHANGESETS_PAGE.fetch, { pageIndex }));\n  }\n  yield put(action(AUTH.clearUserDetails));\n  let location = yield select(locationSelector);\n  yield put(\n    push({\n      ...location,\n      pathname: '/'\n    })\n  );\n}\n\nexport function* authTokenFlow(): any {\n  const { oauth_token, oauth_token_secret } = yield call(postTokensOSMCha);\n  yield put(\n    action(AUTH.saveOAuth, {\n      oauth_token,\n      oauth_token_secret\n    })\n  );\n  // yield take(ACTION) waits for the particular action\n  // to emit and resume the flow. next in action would\n  // be to wait for the action `GET_FINAL_TOKEN`\n  // and resume the flow\n  const { oauth_verifier } = yield take(AUTH.getFinalToken);\n  const { token } = yield call(\n    postFinalTokensOSMCha,\n    oauth_token,\n    oauth_token_secret,\n    oauth_verifier\n  );\n  if (!token || token === '') {\n    throw new Error('invalid token');\n  }\n  yield call(setItem, 'token', token);\n  yield call(setItem, 'oauth_token', oauth_token);\n  yield call(setItem, 'oauth_token_secret', oauth_token_secret);\n  yield put(\n    action(AUTH.saveToken, {\n      token,\n      oauth_verifier\n    })\n  );\n  return token;\n}\n\nexport function* updateUserDetailsSaga({\n  message_good,\n  message_bad,\n  comment_feature\n}: {\n  message_good: string,\n  message_bad: string,\n  comment_feature: boolean\n}): any {\n  try {\n    let token = yield select(tokenSelector);\n    if (token) {\n      const userDetails = fromJS(\n        yield call(\n          updateUserDetails,\n          token,\n          message_good,\n          message_bad,\n          comment_feature\n        )\n      );\n      yield put(action(AUTH.userDetails, { userDetails }));\n      yield put(\n        modal({\n          kind: 'success',\n          title: 'User updated',\n          description: 'Your user preferences were updated successfully'\n        })\n      );\n    }\n  } catch (e) {\n    console.error(e);\n    yield put(\n      modal({\n        error: e\n      })\n    );\n  }\n}\n","// @flow\nimport { Map, fromJS } from 'immutable';\nimport { AUTH } from './auth_actions';\n\nexport type AuthType = Map<\n  'oAuthToken' | 'oAuthTokenSecret' | 'error' | 'token' | 'userDetails',\n  any\n>;\n\nconst initialState: AuthType = fromJS({\n  oAuthToken: null,\n  oAuthTokenSecret: null,\n  error: null,\n  token: null,\n  userDetails: null\n});\n\nexport function authReducer(\n  state: AuthType = initialState,\n  action: Object\n): AuthType {\n  switch (action.type) {\n    case AUTH.saveOAuth: {\n      return state\n        .set('oAuthToken', action.oauth_token)\n        .set('oAuthTokenSecret', action.oauth_token_secret)\n        .set('error', null);\n    }\n    case AUTH.saveToken: {\n      return state.set('token', action.token).set('error', null);\n    }\n    case AUTH.clearSession: {\n      return fromJS({ error: state.get('error') }); // retain the error\n    }\n    case AUTH.loginError: {\n      return state.set('error', action.error);\n    }\n    case AUTH.userDetails: {\n      return state.set('userDetails', action.userDetails);\n    }\n    case AUTH.clearUserDetails: {\n      return state.set('userDetails', Map());\n    }\n    default:\n      return state;\n  }\n}\n","/* @flow */\nimport { Map, fromJS } from 'immutable';\n\nimport { CHANGESETS_PAGE } from './changesets_page_actions';\n\nexport type ChangesetsPageType = Map<\n  'currentPage' | 'pageIndex' | 'loading' | 'error' | 'diff' | 'diffLoading',\n  any\n>;\n\nconst changesetsInitial: ChangesetsPageType = fromJS({\n  pageIndex: 0,\n  currentPage: null,\n  loading: false,\n  error: null,\n  diff: 0, // difference between the number of changesets in cache and the currentPage.\n  diffLoading: false // indicator to show background update is going on.\n});\n\nexport function changesetsPageReducer(\n  state: ChangesetsPageType = changesetsInitial,\n  action: Object\n): ChangesetsPageType {\n  switch (action.type) {\n    case CHANGESETS_PAGE.updateNewCount: {\n      return state.set('diff', action.diff).set('diffLoading', false);\n    }\n    case CHANGESETS_PAGE.checkNewLoading: {\n      return state.set('diffLoading', true);\n    }\n    case CHANGESETS_PAGE.loading: {\n      return state\n        .set('pageIndex', action.pageIndex)\n        .set('loading', true)\n        .set('diff', 0)\n        .set('diffLoading', false)\n        .set('error', null);\n    }\n    case CHANGESETS_PAGE.fetched: {\n      return state\n        .set('currentPage', action.data)\n        .set('pageIndex', action.pageIndex)\n        .set('loading', false)\n        .set('error', null);\n    }\n    case CHANGESETS_PAGE.error: {\n      return state\n        .set('pageIndex', action.pageIndex)\n        .set('diff', 0)\n        .set('loading', false)\n        .set('error', action.error);\n    }\n    default: {\n      return state;\n    }\n  }\n}\n","/* @flow */\nimport { Map, fromJS } from 'immutable';\n\nimport {\n  CHANGESET,\n  CHANGESET_MAP,\n  CHANGESET_MODIFY\n} from './changeset_actions';\n\nexport type ChangesetType = Map<\n  | 'changesets'\n  | 'changesetId' // of the currentChangeset\n  | 'loading'\n  | 'loadingChangesetMap'\n  | 'changesetMap'\n  | 'errorChangesetMap'\n  | 'errorChangeset',\n  any\n>;\n\nconst initial: ChangesetType = fromJS({\n  changesetId: null,\n  changesets: new Map(),\n  loading: false,\n  errorChangeset: null,\n  changesetMap: new Map(),\n  loadingChangesetMap: false,\n  errorChangesetMap: null\n});\n\nexport function changesetReducer(\n  state: ChangesetType = initial,\n  action: Object\n): ChangesetType {\n  switch (action.type) {\n    case CHANGESET.change: {\n      return state\n        .set('changesetId', action.changesetId)\n        .set('loading', false)\n        .set('errorChangeset', null)\n        .set('errorChangesetMap', null);\n    }\n    case CHANGESET.loading: {\n      return state\n        .set('changesetId', action.changesetId)\n        .set('loading', true)\n        .set('errorChangeset', null);\n    }\n    case CHANGESET.fetched: {\n      const changesets = state\n        .get('changesets')\n        .set(action.changesetId, action.data);\n      return state\n        .set('changesets', changesets)\n        .set('changesetId', action.changesetId)\n        .set('loading', false)\n        .set('errorChangeset', null);\n    }\n    case CHANGESET.error: {\n      return state\n        .set('changesetId', action.changesetId)\n        .set('loading', false)\n        .set('errorChangeset', action.error);\n    }\n    case CHANGESET_MAP.change: {\n      return state\n        .set('changesetId', action.changesetId)\n        .set('errorChangesetMap', null)\n        .set('loadingChangesetMap', false);\n    }\n    case CHANGESET_MAP.fetched: {\n      const changesetMap = state\n        .get('changesetMap')\n        .set(action.changesetId, action.data);\n      return state\n        .set('changesetMap', changesetMap)\n        .set('changesetId', action.changesetId)\n        .set('loadingChangesetMap', false)\n        .set('errorChangesetMap', null);\n    }\n    case CHANGESET_MAP.loading: {\n      return state\n        .set('changesetId', action.changesetId)\n        .set('loadingChangesetMap', true)\n        .set('errorChangesetMap', null);\n    }\n    case CHANGESET_MAP.error: {\n      return state\n        .set('changesetId', action.changesetId)\n        .set('loadingChangesetMap', false)\n        .set('errorChangesetMap', action.error);\n    }\n    case CHANGESET_MODIFY.modify: {\n      const changesets = state\n        .get('changesets')\n        .set(action.changesetId, action.changeset);\n      return state.set('changesets', changesets);\n    }\n    case CHANGESET_MODIFY.revert: {\n      const changesets = state\n        .get('changesets')\n        .set(action.changesetId, action.changeset);\n      return state\n        .set('changesets', changesets)\n        .set('errorChangeset', action.error);\n    }\n    default: {\n      return state;\n    }\n  }\n}\n","// @flow\nimport { Map, fromJS } from 'immutable';\nimport { SHOW_MODAL } from './modal_actions';\n\nexport type ModalType = Map<\n  | 'error'\n  | 'kind'\n  | 'duration'\n  | 'title'\n  | 'description'\n  | 'callback'\n  | 'callbackLabel'\n  | 'dismiss'\n  | 'uid'\n  | 'autoDismiss'\n  | 'position',\n  any\n>; // osmcha uses this\n\nconst initialState: ModalType = fromJS({\n  error: null,\n  kind: null,\n  duration: null,\n  title: null,\n  dismiss: true,\n  autoDismiss: 5, // number\n  position: 'tr',\n  description: null,\n  uid: null // number\n});\n\nexport function modalReducer(\n  state: ModalType = initialState,\n  action: Object\n): ModalType {\n  switch (action.type) {\n    case SHOW_MODAL: {\n      return state\n        .set('kind', action.kind)\n        .set('error', action.error)\n        .set('callbackLabel', action.callbackLabel)\n        .set('title', action.title)\n        .set('dismiss', action.dismiss)\n        .set('uid', action.uid)\n        .set('autoDismiss', action.autoDismiss)\n        .set('position', action.position)\n        .set('description', action.description);\n    }\n    default:\n      return state;\n  }\n}\n","/* @flow */\nimport { Map, fromJS } from 'immutable';\n\nimport { FILTERS } from './filters_actions';\n\nexport type filtersReducerType = Map<\n  'loading' | 'error' | 'filters' | 'aoi',\n  any\n>;\n\nconst filtersInitial: filtersReducerType = fromJS({\n  filters: {},\n  aoi: {},\n  loading: false,\n  error: null\n});\n\nexport function filtersReducer(\n  state: filtersReducerType = filtersInitial,\n  action: Object\n): filtersReducerType {\n  switch (action.type) {\n    case FILTERS.set: {\n      return state.set('filters', action.filters).set('loading', false);\n    }\n    default:\n      return state;\n  }\n}\n","import { Map, fromJS } from 'immutable';\nimport { WHITELIST } from './whitelist_actions';\n\nexport type whitelistReducerType = Map<'whitelist', 'loading', any>;\n\nconst initialState: whitelistReducerType = fromJS({\n  whitelist: null,\n  loading: false\n});\n\nexport function whitelistReducer(\n  state: whitelistReducerType = initialState,\n  action: Object\n): WhitelistType {\n  switch (action.type) {\n    case WHITELIST.define: {\n      return state.set('whitelist', action.whitelist).set('loading', false);\n    }\n    case WHITELIST.add: {\n      return state\n        .set(\n          'whitelist',\n          state.get('whitelist').concat([action.whitelist_user])\n        )\n        .set('loading', false);\n    }\n    case WHITELIST.remove: {\n      return state\n        .set(\n          'whitelist',\n          state.get('whitelist').filter(item => item !== action.whitelist_user)\n        )\n        .set('loading', false);\n    }\n    case WHITELIST.clear: {\n      return state.set('whitelist', Map()).set('loading', false);\n    }\n    default:\n      return state;\n  }\n}\n","import { Map, List, fromJS } from 'immutable';\nimport { BLACKLIST } from './blacklist_actions';\n\nexport type blacklistReducerType = Map<'blacklist', 'loading', any>;\n\nconst initialState: blacklistReducerType = fromJS({\n  blacklist: List(),\n  loading: false\n});\n\nexport function blacklistReducer(\n  state: blacklistReducerType = initialState,\n  action: Object\n): BlacklistType {\n  switch (action.type) {\n    case BLACKLIST.define: {\n      return state.set('blacklist', action.blacklist).set('loading', false);\n    }\n    case BLACKLIST.add: {\n      return state\n        .set(\n          'blacklist',\n          state.get('blacklist').concat([fromJS(action.blacklist_user)])\n        )\n        .set('loading', false);\n    }\n    case BLACKLIST.remove: {\n      return state\n        .set(\n          'blacklist',\n          state\n            .get('blacklist')\n            .filter(item => item.get('uid') != action.blacklist_user)\n        )\n        .set('loading', false);\n    }\n    case BLACKLIST.clear: {\n      return state.set('blacklist', Map()).set('loading', false);\n    }\n    default:\n      return state;\n  }\n}\n","/* @flow */\nimport { Map, fromJS } from 'immutable';\n\nimport { AOI } from './aoi_actions';\n\nexport type aoiReducerType = Map<'loading' | 'error' | 'aoi', any>;\n\nconst aoiInitial: aoiReducerType = fromJS({\n  aoi: {},\n  loading: false,\n  error: null\n});\n\nexport function aoiReducer(\n  state: aoiReducerType = aoiInitial,\n  action: Object\n): filtersReducerType {\n  switch (action.type) {\n    case AOI.loading: {\n      return state.set('loading', true);\n    }\n    case AOI.clear: {\n      return state\n        .set('aoi', Map())\n        .set('loading', false)\n        .set('error', null);\n    }\n    case AOI.fetched: {\n      return state\n        .set('loading', false)\n        .set('error', null)\n        .set('aoi', action.aoi);\n    }\n    default:\n      return state;\n  }\n}\n","import { all } from 'redux-saga/effects';\nimport { watchChangesetsPage } from './changesets_page_actions';\nimport { watchChangeset, watchModifyChangeset } from './changeset_actions';\nimport { watchAuth, watchUserDetails } from './auth_actions';\nimport { watchModal } from './modal_actions';\nimport { watchFilters } from './filters_actions';\nimport { watchWhitelist } from './whitelist_actions';\nimport { watchBlacklist } from './blacklist_actions';\nimport { watchAOI } from './aoi_actions';\n\nexport default function* rootSaga() {\n  yield all([\n    watchChangesetsPage(),\n    watchFilters(),\n    watchAOI(),\n    watchChangeset(),\n    watchAuth(),\n    watchUserDetails(),\n    watchModifyChangeset(),\n    watchModal(),\n    watchWhitelist(),\n    watchBlacklist()\n  ]);\n}\n","// @flow\nimport { combineReducers, createStore, applyMiddleware } from 'redux';\nimport { Map } from 'immutable';\nimport { routerReducer, routerMiddleware } from 'react-router-redux';\nimport { history } from './history';\nimport createSagaMiddleware from 'redux-saga';\n\nimport * as safeStorage from '../utils/safe_storage';\n\n// Reducers\nimport { authReducer } from './auth_reducer';\nimport { changesetsPageReducer } from './changesets_page_reducer';\nimport { changesetReducer } from './changeset_reducer';\nimport { modalReducer } from './modal_reducer';\nimport { filtersReducer } from './filters_reducer';\nimport { whitelistReducer } from './whitelist_reducer';\nimport { blacklistReducer } from './blacklist_reducer';\nimport { aoiReducer } from './aoi_reducer';\n\nimport type { ModalType } from './modal_reducer';\nimport type { ChangesetsPageType } from './changesets_page_reducer';\nimport type { ChangesetType } from './changeset_reducer';\nimport type { AuthType } from './auth_reducer';\nimport type { filtersReducerType } from './filters_reducer';\nimport type { whitelistReducerType } from './whitelist_reducer';\nimport type { blacklistReducerType } from './blacklist_reducer';\n// Sagas\nimport sagas from './sagas';\n\nexport type RootStateType = {\n  auth: AuthType,\n  changesetsPage: ChangesetsPageType,\n  filters: filtersReducerType,\n  aoi: aoiReducerType,\n  changeset: ChangesetType,\n  modal: ModalType,\n  routing: Object,\n  whitelist: whitelistReducerType,\n  blacklist: blacklistReducerType\n};\n\n// Root reducer\nconst reducers = combineReducers({\n  changesetsPage: changesetsPageReducer,\n  changeset: changesetReducer,\n  filters: filtersReducer,\n  aoi: aoiReducer,\n  routing: routerReducer,\n  auth: authReducer,\n  modal: modalReducer,\n  whitelist: whitelistReducer,\n  blacklist: blacklistReducer\n});\n\nconst sagaMiddleware = createSagaMiddleware();\n// Middlewares\nconst middlewares = [sagaMiddleware, routerMiddleware(history)];\n\nlet appliedMiddlewares = applyMiddleware(...middlewares);\nif (process.env.NODE_ENV !== 'production') {\n  // const { createLogger } = require('redux-logger');\n\n  // const logger = createLogger({\n  //   stateTransformer: state => {\n  //     let newState = {};\n\n  //     for (var i of Object.keys(state)) {\n  //       if (Iterable.isIterable(state[i])) {\n  //         newState[i] = state[i].toJS();\n  //       } else {\n  //         newState[i] = state[i];\n  //       }\n  //     }\n  //     return newState;\n  //   }\n  // });\n  // middlewares.push(logger);\n  const { composeWithDevTools } = require('redux-devtools-extension');\n  appliedMiddlewares = composeWithDevTools(appliedMiddlewares);\n}\n\n// Persisted state\nconst persistedState = {\n  auth: Map({\n    token: safeStorage.getItem('token'),\n    oAuthToken: safeStorage.getItem('oauth_token'),\n    oAuthTokenSecret: safeStorage.getItem('oauth_token_secret'),\n    error: null\n  })\n};\n\n// Store\nconst store = createStore(reducers, persistedState, appliedMiddlewares);\nsagaMiddleware.run(sagas);\n\nexport { store };\n","// @flow\n// export type cancelablePromiseType = { promise: Promise<*>, cancel: () => any };\nexport function cancelablePromise(promise: Promise<*>) {\n  let hasCanceled_ = false;\n\n  const wrappedPromise = new Promise((resolve, reject) => {\n    promise\n      .then(val => (hasCanceled_ ? reject({ isCanceled: true }) : resolve(val)))\n      .catch(\n        error => (hasCanceled_ ? reject({ isCanceled: true }) : reject(error))\n      );\n  });\n\n  return {\n    promise: wrappedPromise,\n    cancel() {\n      hasCanceled_ = true;\n    }\n  };\n}\nfunction handleErrors(response) {\n  if (!response.ok) {\n    throw Error(response.statusText);\n  }\n  return response;\n}\n\nexport function cancelableFetchJSON(url: string, token?: string) {\n  if (token) {\n    return cancelablePromise(\n      fetch(url, {\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: token ? `Token ${token}` : ''\n        }\n      })\n        .then(handleErrors)\n        .then(res => {\n          return res.json();\n        })\n    );\n  } else {\n    return cancelablePromise(\n      fetch(url)\n        .then(handleErrors)\n        .then(res => {\n          return res.json();\n        })\n    );\n  }\n}\n\nexport function delayPromise(\n  interval: number\n): { promise: Promise<*>, cancel: () => any } {\n  return cancelablePromise(new Promise(res => setTimeout(res, interval)));\n}\n","import React from 'react';\n\nexport class Floater extends React.PureComponent {\n  render() {\n    return (\n      <div\n        className={`relative h-auto mt3 scroll-auto ${this.props.className}`}\n      >\n        <div\n          style={this.props.style}\n          className=\"fixed block flex-parent flex-parent--column pb12 flex-parent--center-cross \"\n        >\n          {this.props.children}\n        </div>\n      </div>\n    );\n  }\n}\n","// @flow\nimport React from 'react';\n\nexport function CreateDeleteModify(props: Object) {\n  const showZero = props.showZero;\n  return (\n    <div\n      className={`flex-parent flex-parent--row flex-parent--wrap ${props.className}`}\n    >\n      {(props.create > -1 || showZero) &&\n        <div className=\"cmap-bg-create  color-white inline-block px6 txt-s txt-bold round unround-r\">\n          {props.create}\n        </div>}\n      {(props.modify > -1 || showZero) &&\n        <div className=\"cmap-bg-modify-old  color-white inline-block px6  txt-s txt-bold unround\">\n          {props.modify}\n        </div>}\n      {(props.delete > -1 || showZero) &&\n        <div className=\"cmap-bg-delete color-white inline-block px6 txt-s txt-bold round unround-l\">\n          {props.delete}\n        </div>}\n    </div>\n  );\n}\n\n// export function CreateDeleteModify(props: Object) {\n//   const showZero = props.showZero;\n//   return (\n//     <div\n//       className={`flex-parent flex-parent--row ${props.className} border border--gray-light border--1 round`}\n//     >\n//       <span className=\"mr6 flex-parent align-items--center\">\n//         <svg className=\"icon inline-block align-middle\">\n//           <use xlinkHref=\"#icon-plus-document\" />\n//         </svg>\n//         <span className=\"color-gray txt-bold \">{props.create}</span>\n//       </span>\n//       <span className=\"mr6 cmap-bg-modify-old flex-parent align-items--center\">\n//         <span className=\"color-white txt-bold \">{props.modify}</span>\n//       </span>\n//       <span className=\"mr6 flex-parent align-items--center\">\n//         <svg className=\"icon inline-block align-middle \">\n//           <use xlinkHref=\"#icon-trash\" />\n//         </svg>\n//         <span className=\"color-gray txt-bold \">{props.delete}</span>\n//       </span>\n//     </div>\n//   );\n// }\n","//@flow\nimport React from 'react';\n\nexport default function AssemblyAnchor({ url }: { url?: string }) {\n  return <a className=\"link\" href={url} target=\"_blank\">{url}</a>;\n}\n","//@flow\nimport React from 'react';\n\nexport default function TranslateButton({ text }: { text: string }) {\n  return (\n    <a\n      target=\"_blank\"\n      rel=\"noopener noreferrer\"\n      title=\"Translate\"\n      href={`http://translate.google.com/#auto/en/${encodeURIComponent(text)}`}\n      className=\"btn btn--xs border border--1 border--darken5 border--darken25-on-hover round bg-darken10 bg-darken5-on-hover color-gray transition pl12 pr6\"\n    >\n      Translate\n      <svg className=\"icon h18 w18 inline-block align-middle pb3 pl3\">\n        <use xlinkHref=\"#icon-share\" />\n      </svg>\n    </a>\n  );\n}\n","// @flow\nimport React from 'react';\nimport { List } from 'immutable';\n\nexport function Reasons({\n  reasons,\n  underline,\n  color\n}: {\n  reasons: List<*>,\n  underline: boolean,\n  color: string\n}) {\n  const extraClass = underline ? 'txt-underline-dotted' : '';\n  return (\n    <span className=\"mb3\">\n      {reasons.map((r: Map<string, *>, k) => (\n        <span key={k} className=\"mr6\">\n          <span\n            className={`color-${color}-dark inline-block bg-${color}-faint px6 txt-s txt-bold ${extraClass}`}\n          >\n            {r.get('name')}\n          </span>\n        </span>\n      ))}\n    </span>\n  );\n}\n","// @flow\nimport React from 'react';\nimport { Map } from 'immutable';\nimport AnchorifyText from 'react-anchorify-text';\nimport AssemblyAnchor from '../assembly_anchor';\nimport TranslateButton from './translate_button';\nimport { Reasons } from '../reasons';\n\nexport function Details({\n  properties,\n  changesetId\n}: {\n  properties: Map<string, *>,\n  changesetId: number,\n  expanded?: boolean\n}) {\n  let source = properties.get('source');\n  let editor = properties.get('editor');\n  let imagery = properties.get('imagery_used');\n  const reasons = properties.get('reasons');\n  const comment = properties.get('comment');\n\n  const urlRegex = new RegExp(\n    /(?:(?:https?|ftp|file):\\/\\/|www\\.|ftp\\.)(?:\\([-A-Z0-9+&@#\\/%=~_|$?!:,.]*\\)|[-A-Z0-9+&@#\\/%=~_|$?!:,.])*(?:\\([-A-Z0-9+&@#\\/%=~_|$?!:,.]*\\)|[A-Z0-9+&@#\\/%=~_|$])/gim\n  );\n\n  let sourceMatch = [];\n\n  if (source && source.indexOf('{switch:a,b,c}.') > -1) {\n    source = source.replace('{switch:a,b,c}.', '');\n  }\n  if (source && source.match(urlRegex)) {\n    sourceMatch = source.match(urlRegex);\n    source = source.replace(urlRegex, '');\n  }\n  let imageryMatch = [];\n  if (imagery && imagery.match(urlRegex)) {\n    imageryMatch = imagery.match(urlRegex);\n    imagery = imagery.replace(urlRegex, '');\n  }\n  return (\n    <div>\n      <div className=\"flex-parent flex-parent--column flex-parent--start flex-parent--wrap py12\">\n        <div className=\"flex-parent flex-parent--row flex-parent--wrap mb3\">\n          <p\n            className={`flex-child txt-subhead txt-l txt-break-url ${\n              !comment ? 'color-gray txt-em' : ''\n            }`}\n          >\n            <AnchorifyText\n              text={\n                comment ? comment : `${changesetId} does not have a comment.`\n              }\n            >\n              <AssemblyAnchor />\n            </AnchorifyText>\n          </p>\n        </div>\n        <div className=\"flex-parent\">\n          <TranslateButton text={comment} />\n        </div>\n      </div>\n      <div className=\"flex-parent flex-parent--column flex-parent--start flex-parent--wrap \">\n        <Reasons reasons={reasons} color=\"blue\" />\n      </div>\n      <div className=\"flex-parent flex-parent--row justify--space-between flex-parent--wrap pt12 pb6\">\n        <div className=\"flex-parent flex-parent--column \">\n          <strong className=\"wmax180 txt-s txt-uppercase\">Source</strong>\n          <span className=\"wmax180 txt-break-word txt-s\">\n            {source}\n            <span>\n              <br />\n              {sourceMatch.map((e, k) => (\n                <a\n                  href={sourceMatch}\n                  title={sourceMatch}\n                  key={k}\n                  className=\"color-blue\"\n                  target=\"_blank\"\n                >\n                  {Array.isArray(\n                    e.match(\n                      /^(?:https?:\\/\\/)?(?:[^@\\/\\n]+@)?(?:www\\.)?([^:\\/\\n]+)/gim\n                    )\n                  ) ? (\n                    e.match(\n                      /^(?:https?:\\/\\/)?(?:[^@\\/\\n]+@)?(?:www\\.)?([^:\\/\\n]+)/gim\n                    )[0]\n                  ) : (\n                    <svg className=\"icon h18 w18 inline-block align-middle \">\n                      <use xlinkHref=\"#icon-share\" />\n                    </svg>\n                  )}\n                </a>\n              ))}\n            </span>\n          </span>\n        </div>\n        <div className=\"flex-parent flex-parent--column \">\n          <strong className=\"wmax180 txt-s txt-uppercase\">Editor</strong>\n          <span className=\"wmax180 txt-break-word txt-s\">{editor}</span>\n        </div>\n        <div className=\"flex-parent flex-parent--column\">\n          <strong className=\"wmax180 txt-s txt-uppercase\">Imagery</strong>\n          <span className=\"wmax180 txt-break-word txt-s\">\n            {imagery}\n            <span>\n              <br />\n              {imageryMatch.map((e, k) => (\n                <a href={e} key={k} className=\"color-blue\">\n                  {Array.isArray(\n                    e.match(\n                      /^(?:https?:\\/\\/)?(?:[^@\\/\\n]+@)?(?:www\\.)?([^:\\/\\n]+)/gim\n                    )\n                  ) ? (\n                    e.match(\n                      /^(?:https?:\\/\\/)?(?:[^@\\/\\n]+@)?(?:www\\.)?([^:\\/\\n]+)/gim\n                    )[0]\n                  ) : (\n                    <svg className=\"icon h18 w18 inline-block align-middle \">\n                      <use xlinkHref=\"#icon-share\" />\n                    </svg>\n                  )}\n                </a>\n              ))}\n            </span>\n          </span>\n        </div>\n      </div>\n    </div>\n  );\n}\n","// @flow\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { Map } from 'immutable';\nimport moment from 'moment';\n\nimport { CreateDeleteModify } from '../create_delete_modify';\nimport { Details } from './details';\n\nclass Header extends React.PureComponent {\n  props: {\n    properties: Map<string, *>,\n    changesetId: number,\n    userEditCount: number,\n    toggleUser: () => mixed,\n    whitelisted: Map<string, *>,\n    blacklisted: Map<object, *>\n  };\n  render() {\n    const user = this.props.properties.get('user');\n    const date = this.props.properties.get('date');\n    const create = this.props.properties.get('create');\n    const modify = this.props.properties.get('modify');\n    const destroy = this.props.properties.get('delete');\n    let is_whitelisted, is_blacklisted;\n    try {\n      is_whitelisted = this.props.whitelisted.indexOf(user) !== -1;\n    } catch (e) {\n      is_whitelisted = false;\n    }\n    try {\n      is_blacklisted =\n        this.props.blacklisted\n          .map(user => user.get('uid'))\n          .indexOf(this.props.properties.get('uid')) !== -1;\n    } catch (e) {\n      is_blacklisted = false;\n    }\n\n    return (\n      <div className=\"px12 py6\">\n        <div className=\"flex-parent flex-parent--column flex-parent--start flex-parent--wrap\">\n          <div className=\"flex-parent flex-parent--row justify--space-between\">\n            <h2 className=\"txt-m txt-uppercase txt-bold mr6 mb3\">Details</h2>\n            <div>\n              <CreateDeleteModify\n                showZero\n                className=\"mr3 mt3\"\n                create={create}\n                modify={modify}\n                delete={destroy}\n              />\n            </div>\n          </div>\n          <div className=\"flex-parent flex-parent--row justify--space-between flex-parent--wrap\">\n            <span className=\"txt-s\">\n              <strong className=\"txt-underline-on-hover pointer\">\n                <a dir=\"ltr\" onClick={this.props.toggleUser}>\n                  {user}\n                </a>\n              </strong>\n              {is_whitelisted && (\n                <svg className=\"icon inline-block align-middle pl3 w18 h18 color-gray\">\n                  <use xlinkHref=\"#icon-star\" />\n                </svg>\n              )}\n              {is_blacklisted && (\n                <svg className=\"icon inline-block align-middle pl3 w18 h18 color-gray\">\n                  <use xlinkHref=\"#icon-alert\" />\n                </svg>\n              )}\n              {this.props.userEditCount > 0 && (\n                <span className=\"txt-s txt-em\">\n                  &nbsp;({this.props.userEditCount} edits)\n                </span>\n              )}\n              &nbsp;created&nbsp;{moment(date).fromNow()}\n            </span>\n          </div>\n        </div>\n        <Details\n          changesetId={this.props.changesetId}\n          properties={this.props.properties}\n        />\n      </div>\n    );\n  }\n}\n\nHeader = connect((state: RootStateType, props) => ({\n  whitelisted: state.whitelist.get('whitelist'),\n  blacklisted: state.blacklist.get('blacklist')\n}))(Header);\nexport { Header };\n","import React from 'react';\nimport Placeholder from './user.jpg';\n\nexport class Avatar extends React.PureComponent {\n  props: {\n    url: string\n  };\n  state = {\n    loaded: false\n  };\n  handleImageLoaded() {\n    this.setState({ loaded: true });\n  }\n  handleImageErrored() {\n    this.setState({ loaded: false });\n  }\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.url !== this.props.url) {\n      this.setState({\n        loaded: false\n      });\n    }\n  }\n  render() {\n    let url: string = Placeholder;\n    if (this.props.url) {\n      url = this.props.url;\n      if (url.indexOf('http://') > -1) {\n        url = 'https://' + url.slice(5);\n      }\n    }\n    return (\n      <div className=\"p6 flex-parent flex-parent--center-main\">\n        <span\n          style={{\n            background: `url(${this.state.loaded\n              ? this.props.url\n              : Placeholder}) center center / ${this.props.size}px no-repeat`\n          }}\n          className={`flex-child flex-child--no-shrink border border--2 border--gray h${this\n            .props.size} w${this.props.size} bg-darken25 clip round-full`}\n        />\n        <img\n          alt=\"\"\n          className=\"none\"\n          src={this.props.url}\n          onLoad={this.handleImageLoaded.bind(this)}\n          onError={this.handleImageErrored.bind(this)}\n        />\n      </div>\n    );\n  }\n}\n","export function createPopup(\n  title: string = 'Authentication',\n  location: string\n) {\n  const width = 500;\n  const height = 600;\n  const settings = [\n    ['width', width],\n    ['height', height],\n    ['left', window.innerWidth.width / 2 - width / 2],\n    ['top', window.innerHeight.height / 2 - height / 2]\n  ]\n    .map(x => x.join('='))\n    .join(',');\n\n  const popup = window.open('about:blank', title, settings);\n  if (!popup) return;\n  popup.location = location;\n}\n","const parseQueryString = queryString => {\n  const query = {};\n  queryString.split('&').forEach(pair => {\n    const [key, value] = pair.split('=');\n    query[decodeURIComponent(key)] = decodeURIComponent(value) || null;\n  });\n\n  return query;\n};\n\nexport function handlePopupCallback() {\n  // TO-FIX what if it never resolves\n  return new Promise((res, rej) => {\n    window.authComplete = location => {\n      const queryString = location.split('?')[1];\n      const creds = parseQueryString(queryString);\n      delete window.authComplete;\n      return res(creds);\n    };\n  });\n}\n","import React from 'react';\nimport { connect } from 'react-redux';\n\nimport { createPopup } from '../../utils/create_popup';\nimport { handlePopupCallback } from '../../utils/handle_popup_callback';\nimport { osmAuthUrl } from '../../config/constants';\nimport { isDev, isLocal } from '../../config';\nimport type { RootStateType } from '../../store';\nimport { getFinalToken } from '../../store/auth_actions';\nimport { getChangesetsPage } from '../../store/changesets_page_actions';\nimport { getChangeset } from '../../store/changeset_actions';\n\nclass SignInButton extends React.PureComponent {\n  props: {\n    text: string,\n    oAuthToken: ?string,\n    pageIndex: number,\n    getFinalToken: string => mixed,\n    getChangeset: string => mixed,\n    getChangesetsPage: string => mixed\n  };\n\n  handleLoginClick = () => {\n    var oAuthToken = this.props.oAuthToken;\n    if (!oAuthToken) return;\n\n    let url;\n    if (isDev || isLocal) {\n      url = `/local-landing.html#${oAuthToken}`;\n    } else {\n      url = `${osmAuthUrl}?oauth_token=${oAuthToken}`;\n    }\n\n    createPopup('oauth_popup', url);\n    handlePopupCallback().then(oAuthObj => {\n      this.props.getFinalToken(oAuthObj.oauth_verifier);\n    });\n  };\n  render() {\n    const extraClasses = this.props.className\n      ? this.props.className\n      : 'border--darken5 border--darken25-on-hover bg-darken10 bg-darken5-on-hover color-gray';\n    return (\n      <button\n        onClick={this.handleLoginClick}\n        className={`btn btn--s border border--1 round transition ${extraClasses}`}\n      >\n        <svg className=\"icon w18 h18 inline-block align-middle pr3\">\n          <use xlinkHref=\"#icon-osm\" />\n        </svg>\n        {this.props.text}\n      </button>\n    );\n  }\n}\n\nSignInButton = connect(\n  (state: RootStateType, props) => ({\n    oAuthToken: state.auth.get('oAuthToken'),\n    pageIndex: state.changesetsPage.get('pageIndex') || 0\n  }),\n  {\n    getFinalToken,\n    getChangeset,\n    getChangesetsPage\n  }\n)(SignInButton);\n\nexport { SignInButton };\n","import React from 'react';\n\nexport function Button({ onClick, children, iconName, className }: Object) {\n  return (\n    <button\n      onClick={onClick}\n      className={`${className ||\n        ''} btn btn--s border border--1 border--darken5 border--darken25-on-hover round bg-darken10 bg-darken5-on-hover color-gray transition ${\n        iconName && children ? 'pl12 pr6' : ''\n      }`}\n    >\n      {children}\n      {iconName && (\n        <svg\n          className={`icon w18 h18 inline-block align-middle ${\n            children ? 'pl3 pb3' : 'pb3'\n          }`}\n        >\n          <use xlinkHref={`#icon-${iconName}`} />\n        </svg>\n      )}\n    </button>\n  );\n}\n","// @flow\nimport React from 'react';\nimport './dropdown.css';\nimport onClickOutside from 'react-click-outside';\nimport { Button } from './button';\n\nclass DropdownContent extends React.PureComponent {\n  isActive = (obj: Object) => {\n    for (let v of this.props.value) {\n      if (v.label === obj.label) {\n        return true;\n      }\n    }\n    return false;\n  };\n  handleClick = (data: Object) => {\n    if (data) {\n      var label = data.label;\n      if (!label || !this.props.value || !this.props.onChange) return;\n      const value = this.props.value;\n      let ourObj = data;\n      if (!ourObj) return;\n\n      let isRemove = false;\n      for (let x = 0; x < value.length; x++) {\n        if (value[x].label === label) {\n          isRemove = true;\n          this.props.onRemove(ourObj);\n          this.props.onChange(value.slice(0, x).concat(value.slice(x + 1)));\n        }\n      }\n\n      if (!isRemove) {\n        let newArray = value.slice(0, value.length);\n        if (!this.props.multi) {\n          newArray = [];\n        }\n        newArray.push(ourObj);\n        this.props.onAdd(ourObj);\n        this.props.onChange(newArray);\n      }\n    }\n    if (!this.props.multi) {\n      this.props.toggleDropdown();\n    }\n  };\n  render() {\n    return (\n      <div\n        className=\"dropdown-content wmin96 round wmax240\"\n        style={{ display: 'block' }}\n      >\n        {this.props.options.map((i, k) =>\n          <span\n            key={k}\n            onClick={this.handleClick.bind(null, i)}\n            className=\"flex-parent flex-parent--row flex-parent--center-cross py6 px12\"\n          >\n            {this.props.multi &&\n              <input\n                data-label={i.label}\n                data-payload={JSON.stringify(i)}\n                type=\"checkbox\"\n                checked={this.isActive(i)}\n                value={i.label}\n                className=\"cursor-pointer mt6\"\n              />}\n            {i.href\n              ? <a\n                  target={'_blank'}\n                  href={i.href}\n                  onClick={this.props.toggleDropdown}\n                  className={`txt-nowrap flex-child--grow cursor-pointer color-gray ${this.isActive(\n                    i\n                  )\n                    ? 'is-active txt-bold'\n                    : ''}`}\n                >\n                  {i.label}\n                </a>\n              : <a\n                  onClick={this.props.toggleDropdown}\n                  className={`txt-nowrap flex-child--grow cursor-pointer color-gray ${this.isActive(\n                    i\n                  )\n                    ? 'is-active txt-bold'\n                    : ''}`}\n                >\n                  {i.label}\n                </a>}\n            {this.props.deletable &&\n              <a\n                onClick={e => {\n                  e.preventDefault();\n                  e.stopPropagation();\n                  this.props.toggleDropdown();\n                  this.props.deletable(i.value);\n                }}\n              >\n                x\n              </a>}\n          </span>\n        )}\n      </div>\n    );\n  }\n}\n\nexport class _Dropdown extends React.PureComponent {\n  props: {\n    className: string,\n    disabled: boolean,\n    value: Array<Object>,\n    onChange: (Array<Object>) => any,\n    onAdd: (?Object) => any,\n    onRemove: (?Object) => any,\n    options: Array<Object>,\n    display: string,\n    deletable?: (value: string) => any,\n    multi: boolean\n  };\n\n  state = {\n    display: false\n  };\n  handleClickOutside = () => {\n    this.setState({\n      display: false\n    });\n  };\n  toggleDropdown = () => {\n    this.setState({\n      display: !this.state.display\n    });\n  };\n  isActive = (obj: Object) => {\n    for (let v of this.props.value) {\n      if (v.label === obj.label) {\n        return true;\n      }\n    }\n    return false;\n  };\n  render() {\n    return (\n      <div className={`dropdown mr3 pointer ${this.props.className || ''}`}>\n        <Button\n          iconName=\"chevron-down\"\n          onClick={this.toggleDropdown}\n          className=\"wmin96\"\n        >\n          <span>\n            {this.props.display}\n          </span>\n        </Button>\n        {this.state.display &&\n          <DropdownContent\n            {...this.props}\n            eventTypes={['click', 'touchend']}\n            toggleDropdown={this.toggleDropdown}\n          />}\n      </div>\n    );\n  }\n}\n\nexport const Dropdown = onClickOutside(_Dropdown);\n","import React from 'react';\nimport { connect } from 'react-redux';\n\nimport { Dropdown } from '../dropdown';\nimport {\n  addToBlacklist,\n  removeFromBlacklist\n} from '../../store/blacklist_actions';\nimport {\n  addToWhitelist,\n  removeFromWhitelist\n} from '../../store/whitelist_actions';\n\ntype propsType = {\n  user: Map<string, any>,\n  whitelisted: Map<string, *>,\n  blacklisted: Map<object, *>,\n  addToBlacklist: string => void,\n  removeFromBlacklist: string => void,\n  addToWhitelist: string => void,\n  removeFromWhitelist: string => void\n};\n\nclass TrustWatchUser extends React.PureComponent<any, propsType, any> {\n  handleVerify = (arr: Array<Object>) => {\n    const username = this.props.user.get('name');\n    const uid = this.props.user.get('uid');\n    console.log(uid);\n    if (arr.length === 1) {\n      if (arr[0].value === false) {\n        console.log('blacklisting');\n        this.props.addToBlacklist({ username, uid });\n      }\n      if (arr[0].value === true) {\n        console.log('whitelisting');\n        this.props.addToWhitelist(username);\n      }\n    } else if (arr.length > 1) {\n      throw new Error('verify array is big');\n    }\n  };\n\n  handleVerifyClear = () => {\n    const is_whitelisted =\n      this.props.whitelisted.indexOf(this.props.user.get('name')) !== -1;\n    const is_blacklisted =\n      this.props.blacklisted\n        .map(user => user.get('uid'))\n        .indexOf(this.props.user.get('uid')) !== -1;\n\n    if (is_blacklisted) {\n      this.props.removeFromBlacklist(this.props.user.get('uid'));\n    } else if (is_whitelisted) {\n      this.props.removeFromWhitelist(this.props.user.get('name'));\n    }\n  };\n\n  render() {\n    const blacklisted = this.props.blacklisted.map(user => user.get('uid'));\n\n    if (blacklisted.includes(this.props.user.get('uid'))) {\n      return (\n        <div className=\"flex-parent-inline\">\n          <span className=\"btn btn--s border border--1 round color-gray transition pl12 pr6 bg-lighten50 border--red-light\">\n            <span>\n              <svg className=\"icon inline-block align-middle pl3 w18 h18 color-gray\">\n                <use xlinkHref=\"#icon-alert\" />\n              </svg>\n              Watchlisted user\n            </span>\n            <svg\n              onClick={() =>\n                this.props.removeFromBlacklist(this.props.user.get('uid'))\n              }\n              className=\"icon inline-block align-middle pl3 pb3 w18 h18 pointer color-gray\"\n            >\n              <use xlinkHref=\"#icon-close\" />\n            </svg>\n          </span>\n        </div>\n      );\n    } else if (\n      this.props.whitelisted &&\n      this.props.whitelisted.includes(this.props.user.get('name'))\n    ) {\n      return (\n        <div className=\"flex-parent-inline\">\n          <span className=\"btn btn--s border border--1 round color-gray transition pl12 pr6 bg-lighten50 border--green-light\">\n            <span>\n              <svg className=\"icon inline-block align-middle pl3 w18 h18 color-gray\">\n                <use xlinkHref=\"#icon-star\" />\n              </svg>\n              Trusted user\n            </span>\n            <svg\n              onClick={e =>\n                this.props.removeFromWhitelist(this.props.user.get('name'))\n              }\n              className=\"icon inline-block align-middle pl3 pb3 w18 h18 pointer color-gray\"\n            >\n              <use xlinkHref=\"#icon-close\" />\n            </svg>\n          </span>\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"select-container\">\n        <Dropdown\n          eventTypes={['click', 'touchend']}\n          value={[]}\n          onAdd={() => {}}\n          onRemove={() => {}}\n          options={[\n            {\n              value: false,\n              label: 'Add to your watchlist'\n            },\n            {\n              value: true,\n              label: 'Add to your trusted users list'\n            }\n          ]}\n          onChange={this.handleVerify}\n          display=\"Trust / Watch user\"\n        />\n      </div>\n    );\n  }\n}\n\nTrustWatchUser = connect(\n  (state: RootStateType, props) => ({\n    whitelisted: state.whitelist.get('whitelist'),\n    blacklisted: state.blacklist.get('blacklist')\n  }),\n  {\n    addToBlacklist,\n    removeFromBlacklist,\n    addToWhitelist,\n    removeFromWhitelist\n  }\n)(TrustWatchUser);\n\nexport { TrustWatchUser };\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport showdown from 'showdown';\nimport moment from 'moment';\n\nimport { Avatar } from '../avatar';\nimport { getObjAsQueryParam } from '../../utils/query_params';\nimport { SignInButton } from './sign_in_button';\nimport { TrustWatchUser } from './trust_watch_user';\n\n// getObjAsQueryParam('filters', filters.toJS());\nexport class User extends React.PureComponent {\n  render() {\n    const converter = new showdown.Converter({\n      noHeaderId: true,\n      simplifiedAutoLink: true\n    });\n    const UserDescriptionHTML = converter.makeHtml(\n      this.props.userDetails.get('description') || ''\n    );\n\n    return (\n      <div className=\"px12 py6\">\n        <h2 className=\"txt-m txt-uppercase txt-bold mr6 mb3\">\n          User{' '}\n          {this.props.userDetails.get('uid') &&\n            `/ ${this.props.userDetails.get('uid')}`}\n        </h2>\n        {this.props.userDetails.get('name') ? (\n          <div className=\"flex-parent flex-parent--column align-items--center justify--space-between mb6\">\n            <div>\n              <Avatar size={96} url={this.props.userDetails.get('img')} />\n              <div className=\"mt6 txt-bold color-gray align-center\">\n                {this.props.userDetails.get('name')}\n              </div>\n            </div>\n            <div>\n              <p className=\"txt-s color-gray align-center\">\n                {this.props.userDetails.get('accountCreated') &&\n                  `Joined ${moment(\n                    this.props.userDetails.get('accountCreated')\n                  ).fromNow(true)} ago |`}\n                {this.props.userDetails.get('count')\n                  ? `${this.props.userDetails.get('count')} edits`\n                  : `${this.props.userDetails.get(\n                      'changesets_in_osmcha'\n                    )} edits registered on OSMCha`}\n              </p>\n            </div>\n            <div>\n              <p className=\"txt-s color-gray align-center\">\n                {this.props.userDetails.get('harmful_changesets')} Bad and\n                &nbsp;\n                {this.props.userDetails.get('checked_changesets') -\n                  this.props.userDetails.get('harmful_changesets')}{' '}\n                Good Changesets\n              </p>\n            </div>\n\n            <div className=\"mt6\">\n              <TrustWatchUser user={this.props.userDetails} />\n            </div>\n\n            <div className=\"mt12\">\n              <Link\n                className=\"mx3 btn btn--s border border--1 border--darken5 border--darken25-on-hover round bg-darken10 bg-darken5-on-hover color-gray transition\"\n                to={{\n                  search: getObjAsQueryParam('filters', {\n                    users: [\n                      {\n                        label: this.props.userDetails.get('name'),\n                        value: this.props.userDetails.get('name')\n                      }\n                    ],\n                    date__gte: [{ label: '', value: '' }]\n                  }),\n                  pathname: '/'\n                }}\n              >\n                OSMCha\n              </Link>\n              <a\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                title=\"Open in OSM\"\n                className=\"mx3 btn btn--s border border--1 border--darken5 border--darken25-on-hover round bg-darken10 bg-darken5-on-hover color-gray transition\"\n                href={`https://www.openstreetmap.org/user/${this.props.userDetails.get(\n                  'name'\n                )}`}\n              >\n                OSM\n              </a>\n              <a\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                title=\"Open in HDYC\"\n                className=\"mx3 btn btn--s border border--1 border--darken5 border--darken25-on-hover round bg-darken10 bg-darken5-on-hover color-gray transition\"\n                href={`https://hdyc.neis-one.org/?${this.props.userDetails.get(\n                  'name'\n                )}`}\n              >\n                HDYC\n              </a>\n              <a\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                title=\"Open in Missing Maps\"\n                className=\"mx3 btn btn--s border border--1 border--darken5 border--darken25-on-hover round bg-darken10 bg-darken5-on-hover color-gray transition\"\n                href={`https://www.missingmaps.org/users/#/${this.props.userDetails.get(\n                  'name'\n                )}`}\n              >\n                Missing Maps\n              </a>\n            </div>\n\n            {this.props.whosThat.size > 1 && (\n              <div className=\"txt-s color-gray\">\n                Past usernames: &nbsp;\n                {this.props.whosThat.slice(0, -1).map((e, k) => (\n                  <span key={k} className=\"txt-em\">\n                    {e}&nbsp;\n                  </span>\n                ))}\n              </div>\n            )}\n            <div className=\"mt12\">\n              <p\n                className=\"txt-subhead txt-s txt-break-url user-description\"\n                dangerouslySetInnerHTML={{ __html: UserDescriptionHTML }}\n              />\n            </div>\n          </div>\n        ) : (\n          <div className=\"flex-parent flex-parent--column align-items--center justify--space-between mb6\">\n            <div>\n              <Avatar size={96} url={this.props.userDetails.get('img')} />\n              <div className=\"mt6 txt-bold color-gray align-center\">\n                {this.props.userDetails.get('name')}\n              </div>\n            </div>\n            <div className=\"flex-parent flex-parent--column mt6 mb3\">\n              <SignInButton text=\"Sign in to see the user details\" />\n            </div>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n","import React from 'react';\n\nexport const Loading = ({ height, className }) => (\n  <div\n    style={{ height: height ? height : 'auto' }}\n    className={`${className} flex-parent flex-parent--column flex-parent--center-cross flex-parent--center-main flex-child--grow`}\n  >\n    <div className=\"flex-child loading\" />\n  </div>\n);\n","// @flow\nimport React from 'react';\n\nimport { SignInButton } from './changeset/sign_in_button';\n\nexport function SignIn() {\n  return (\n    <div className=\"flex-parent flex-parent--column flex-parent--center-cross bg-gray-faint hfull-55\">\n      <div className=\"flex-child flex-child--grow\">&nbsp;</div>\n      <div className=\"flex-parent flex-parent--column flex-parent--center-cross\">\n        <svg className=\"icon h160 w160 inline-block align-middle pb3\">\n          <use xlinkHref=\"#icon-osm\" />\n        </svg>\n      </div>\n      <div className=\"flex-parent flex-parent--column align-center txt-l txt-bold pt12\">\n        Sign in with your OpenStreetMap account to use OSMCha.\n      </div>\n      <div className=\"flex-parent flex-parent--column align-center txt-l pt36\">\n        <SignInButton\n          className=\"border--darken5 border--darken25-on-hover bg-gray-light color-gray-dark\"\n          text=\"Sign in\"\n        />\n      </div>\n      <div className=\"flex-child flex-child--grow\">&nbsp;</div>\n    </div>\n  );\n}\n","export function dispatchEvent(\n  messageId: string,\n  payLoad: Object,\n  target: ?Object\n) {\n  const event = new CustomEvent(messageId, {\n    detail: payLoad\n  });\n  (target || document.body).dispatchEvent(event);\n}\n","import React from 'react';\nimport debounce from 'lodash.debounce';\nimport { connect } from 'react-redux';\nimport CSSTransitionGroup from 'react-transition-group/CSSTransitionGroup';\nimport { Loading } from '../components/loading';\nimport { SignIn } from '../components/sign_in';\nimport { dispatchEvent } from '../utils/dispatch_event';\nimport { importChangesetMap } from '../utils/cmap';\n\nimport 'changeset-map/public/css/style.css';\nimport type { RootStateType } from '../store';\n\nlet changesetId;\nlet currentChangesetMap;\nlet width = 700;\nlet height = 500;\nlet event;\nlet cMapRender;\n\nlet getMapInstance;\nexport function selectFeature(id: number) {\n  if (!id || !event) return;\n  event.emit('selectFeature', 'node|way', id);\n}\n\nfunction loadingChangesetMapAsync() {\n  if (cMapRender) return Promise.resolve(cMapRender);\n  return Promise.all([\n    importChangesetMap('render'),\n    importChangesetMap('getMapInstance')\n  ]).then(res => {\n    cMapRender = res[0];\n    getMapInstance = res[1];\n    return cMapRender;\n  });\n}\n\nfunction loadMap() {\n  var container = document.getElementById('container');\n  if (!container || !currentChangesetMap) return;\n  loadingChangesetMapAsync().then(render => {\n    if (!render) return;\n    // if (event) event.emit('clearFeature');\n    event = render(container, changesetId, {\n      width: width + 'px',\n      height: Math.max(400, height) + 'px',\n      data: currentChangesetMap,\n      disableSidebar: true\n    });\n  });\n}\n\nvar minDebounce = debounce(loadMap, 250);\n\nclass CMap extends React.PureComponent {\n  props: {\n    changesetId: number,\n    currentChangesetMap: Object,\n    errorChangesetMap: ?Object,\n    loadingChangesetMap: boolean,\n    className: string\n  };\n  state = {\n    visible: false,\n    height: 0,\n    width: 0\n  };\n  ref = null;\n  componentDidMount() {\n    changesetId = this.props.changesetId;\n    currentChangesetMap = this.props.currentChangesetMap;\n    if (this.ref) {\n      var rect = this.ref.parentNode.getBoundingClientRect();\n      height = parseInt(window.innerHeight - 1 * 55, 10);\n      width = parseInt(rect.width, 10);\n    }\n    window.onresize = debounce(this.setDimensions, 100);\n    minDebounce();\n  }\n  componentWillUnmount() {\n    window.onresize = null;\n    event && event.emit('remove');\n  }\n  componentDidUpdate(prevProp: Object) {\n    if (\n      this.props.currentChangesetMap !== prevProp.currentChangesetMap ||\n      this.props.token !== prevProp.token\n    ) {\n      minDebounce();\n    }\n  }\n  setRef = (r: any) => {\n    this.ref = r;\n    this.setDimensions();\n  };\n  setDimensions = () => {\n    if (!this.ref) return;\n    var rect = this.ref.parentNode.getBoundingClientRect();\n    height = parseInt(window.innerHeight - 1 * 55, 10);\n    width = parseInt(rect.width, 10);\n    this.setState({\n      height,\n      width\n    });\n    if (getMapInstance) {\n      var instance = getMapInstance();\n      if (instance && instance.map) {\n        instance.map.resize();\n      }\n    }\n  };\n  render() {\n    if (this.props.errorChangesetMap) {\n      dispatchEvent('showToast', {\n        title: 'changeset-map failed to load',\n        content: 'Try reloading osmcha',\n        timeOut: 5000,\n        type: 'error'\n      });\n      console.error(this.props.errorChangesetMap);\n      // return null;\n    }\n    changesetId = this.props.changesetId;\n    currentChangesetMap = this.props.currentChangesetMap;\n    if (this.props.token) {\n      return (\n        <div className=\"\">\n          <div className=\"relative\" ref={this.setRef}>\n            <div\n              id=\"container\"\n              className=\"absolute\"\n              style={{\n                height: this.state.height,\n                width: this.state.width,\n                visibility: !(\n                  this.props.loadingChangesetMap || this.props.errorChangesetMap\n                )\n                  ? 'visible'\n                  : 'hidden'\n              }}\n            />\n            <CSSTransitionGroup\n              transitionName=\"map-hide\"\n              transitionAppearTimeout={300}\n              transitionAppear={true}\n              transitionEnterTimeout={300}\n              transitionLeaveTimeout={1000} // determines the transition to cMap\n            >\n              {(this.props.loadingChangesetMap ||\n                this.props.errorChangesetMap) && (\n                <div\n                  key={0}\n                  id=\"placeholder\"\n                  className={`absolute z0\n                    ${\n                      this.props.errorChangesetMap ? 'bg-red-faint' : 'bg-black'\n                    }\n                    `}\n                  style={{\n                    height: this.state.height,\n                    width: this.state.width\n                  }}\n                >\n                  <Loading height={this.state.height} />\n                </div>\n              )}\n            </CSSTransitionGroup>\n          </div>\n        </div>\n      );\n    } else {\n      return <SignIn />;\n    }\n  }\n}\n\nCMap = connect((state: RootStateType, props) => ({\n  changesetId: state.changeset.get('changesetId'),\n  currentChangesetMap: state.changeset.getIn([\n    'changesetMap',\n    state.changeset.get('changesetId')\n  ]),\n  errorChangesetMap: state.changeset.get('errorChangesetMap'),\n  loadingChangesetMap: state.changeset.get('loadingChangesetMap'),\n  token: state.auth.get('token')\n}))(CMap);\n\nexport { CMap };\n","// @flow\nimport React from 'react';\nimport { Map, List } from 'immutable';\nimport { Reasons } from '../reasons';\nimport { selectFeature } from '../../views/map';\n\nconst Feature = ({\n  data,\n  changesetReasons\n}: {\n  data: Map<string, any>,\n  changesetReasons: Map<string, any>\n}) => {\n  let reasons;\n  // operation necessary to the change\n  if (\n    data.get('reasons').size &&\n    typeof data.get('reasons').get(0) === 'number'\n  ) {\n    reasons = changesetReasons.filter(reason =>\n      data.get('reasons').contains(reason.get('id'))\n    );\n  } else {\n    reasons = data.get('reasons');\n  }\n  return (\n    <tr className=\"txt-s\">\n      <td>{data.get('osm_id')}</td>\n      <td>{data.get('name')}</td>\n      <td>\n        {data.get('note') ? (\n          <abbr title={data.get('note')}>\n            <Reasons reasons={reasons} underline={true} color=\"blue\" />\n          </abbr>\n        ) : (\n          <Reasons reasons={reasons} color=\"blue\" />\n        )}\n      </td>\n      <td>\n        <strong\n          onClick={() => selectFeature(parseInt(data.get('osm_id'), 10))}\n          className=\"cursor-pointer txt-underline-on-hover mr6\"\n        >\n          Map\n        </strong>\n        <strong className=\"cursor-pointer txt-underline-on-hover\">\n          <a\n            target=\"_blank\"\n            href={`http://localhost:8111/load_object?objects=${data\n              .getIn(['url'], '')\n              .charAt(0)}${data.get('osm_id')}`}\n          >\n            JOSM\n          </a>\n        </strong>\n      </td>\n    </tr>\n  );\n};\n\nexport function Features({\n  properties,\n  changesetId\n}: {\n  properties: Map<string, *>,\n  changesetId: number\n}) {\n  const features: List<Map<string, *>> = properties.get('features');\n  return (\n    <div className=\"px12 py6\">\n      <div>\n        <h2 className=\"txt-m txt-uppercase txt-bold mr6 mb3\">\n          Flagged Features {features.size !== 0 ? `(${features.size})` : ''}\n        </h2>\n        {features.size === 0 ? (\n          <div className=\"flex-parent flex-parent--column flex-parent--center-cross mb12\">\n            <svg className=\"icon icon--xxl color-darken25\">\n              <use xlinkHref=\"#icon-alert\" />\n            </svg>\n            <p className=\"txt-m\">{`No features were flagged for ${changesetId}.`}</p>\n          </div>\n        ) : (\n          <table className=\"table osmcha-custom-table my12\">\n            <thead>\n              <tr className=\"txt-s txt-uppercase\">\n                <th>OSM Id</th>\n                <th>Name</th>\n                <th>Reasons</th>\n                <th>Actions</th>\n              </tr>\n            </thead>\n            <tbody>\n              {features.map((f, k) => (\n                <Feature\n                  key={k}\n                  data={f}\n                  changesetReasons={properties.get('reasons')}\n                />\n              ))}\n            </tbody>\n          </table>\n        )}\n      </div>\n    </div>\n  );\n}\n","// @flow\nimport React from 'react';\nimport { connect } from 'react-redux';\n\nimport { is } from 'immutable';\n\nimport type { RootStateType } from '../store';\nimport { selectFeature } from '../../views/map';\n\nexport function getFeatures(features) {\n  var keys = Object.keys(features);\n  return keys.map(item => features[item]);\n}\n\nexport function processFeatures(features) {\n  const finalReport = new Map();\n  const analyzedFeatures = features.map(feature =>\n    analyzeFeature(feature[0], feature[1])\n  );\n  const keys = ['addedTags', 'changedValues', 'deletedTags'];\n  analyzedFeatures.map(item =>\n    keys.map(key =>\n      item.get(key).forEach(tag => {\n        if (finalReport.get(tag)) {\n          finalReport.set(tag, finalReport.get(tag).concat([item.get('id')]));\n        } else {\n          finalReport.set(tag, [item.get('id')]);\n        }\n      })\n    )\n  );\n  return finalReport;\n}\n\nexport function analyzeFeature(newVersion, oldVersion) {\n  var oldVersionKeys = Object.keys(oldVersion.properties.tags);\n  var newVersionKeys = Object.keys(newVersion.properties.tags);\n  var addedTags = newVersionKeys.filter(\n    tag => oldVersionKeys.indexOf(tag) === -1\n  );\n  var deletedTags = oldVersionKeys.filter(\n    tag => newVersionKeys.indexOf(tag) === -1\n  );\n  var changedValues = newVersionKeys\n    .filter(\n      tag => addedTags.indexOf(tag) === -1 && deletedTags.indexOf(tag) === -1\n    )\n    .filter(\n      tag => newVersion.properties.tags[tag] !== oldVersion.properties.tags[tag]\n    );\n  var result = new Map();\n  result\n    .set('id', newVersion.properties.id)\n    .set('addedTags', addedTags.map(tag => `Added tag ${tag}`))\n    .set('deletedTags', deletedTags.map(tag => `Deleted tag ${tag}`))\n    .set(\n      'changedValues',\n      changedValues.map(tag => `Changed value of tag ${tag}`)\n    );\n  return result;\n}\n\nfunction FeatureListItem(props) {\n  return (\n    <li>\n      <span className=\"pointer\" onClick={() => selectFeature(props.id)}>\n        {props.id}\n      </span>\n    </li>\n  );\n}\n\nexport class ChangeItem extends React.PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      opened: false\n    };\n    this.tag = props.change[0];\n    this.value = props.change[1];\n    this.handleChange = this.handleChange.bind(this);\n  }\n  handleChange() {\n    this.setState({ opened: !this.state.opened });\n  }\n  render() {\n    var last_space = this.tag.lastIndexOf(' ') + 1;\n    return (\n      <div>\n        <span className=\"pointer\" onClick={this.handleChange}>\n          {this.state.opened ? (\n            <svg\n              className=\"icon h18 w18 inline-block\"\n              style={{ verticalAlign: 'text-bottom' }}\n            >\n              <use xlinkHref={'#icon-chevron-down'} />\n            </svg>\n          ) : (\n            <svg\n              className=\"icon h18 w18 inline-block\"\n              style={{ verticalAlign: 'text-bottom' }}\n            >\n              <use xlinkHref={'#icon-chevron-right'} />\n            </svg>\n          )}\n          {this.tag.slice(0, last_space)}\n          <span className=\"txt-code\">{this.tag.slice(last_space)}</span>\n          <strong className=\"bg-blue-faint color-blue-dark mx6 px6 py3 txt-s round\">\n            {this.value.length}\n          </strong>\n        </span>\n        <ul\n          className=\"cmap-vlist\"\n          style={{\n            display: this.state.opened ? 'block' : 'none'\n          }}\n        >\n          {this.value.map((id, k) => (\n            <FeatureListItem id={id} key={k} />\n          ))}\n        </ul>\n      </div>\n    );\n  }\n}\n\ntype propsType = {|\n  changesetId: string,\n  changes: Object\n|};\n\nclass TagChanges extends React.PureComponent<void, propsType> {\n  state = {\n    changesetId: this.props.changesetId,\n    changes: this.props.changes\n  };\n\n  componentWillReceiveProps(nextProps: propsType) {\n    if (!is(this.props.changes, nextProps.changes)) {\n      this.setState({\n        changes: nextProps.changes\n      });\n    }\n  }\n\n  render() {\n    const changeReport = [];\n    if (\n      this.state &&\n      this.state.changes &&\n      this.state.changes.get(this.props.changesetId)\n    ) {\n      const changes = this.state.changes.get(this.props.changesetId)[\n        'featureMap'\n      ];\n      processFeatures(\n        getFeatures(changes).filter(\n          item => item.length === 2 && item[0].properties.action === 'modify'\n        )\n      ).forEach((featureIDs, tag) => changeReport.push([tag, featureIDs]));\n    }\n    return (\n      <div className=\"px12 py6\">\n        <h2 className=\"txt-m txt-uppercase txt-bold mr6 mb3\">Tag changes</h2>\n        {changeReport.length ? (\n          changeReport\n            .sort()\n            .map((change, k) => <ChangeItem key={k} change={change} />)\n        ) : (\n          <span>No tags were changed in this changeset.</span>\n        )}\n      </div>\n    );\n  }\n}\n\nTagChanges = connect((state: RootStateType, props) => ({\n  changes: state.changeset.get('changesetMap')\n}))(TagChanges);\n\nexport { TagChanges };\n","import React from 'react';\n\nexport const Box = ({ children, pullDown, pullUp, className, style, bg }) => (\n  <div className={`mb3 z4 bg-gray-faint ${className} `} style={style}>\n    <div className={`${bg} scroll-styled scroll-auto hmax360 hmin186`}>\n      {children}\n    </div>\n  </div>\n);\n","// @flow\nimport React from 'react';\nimport { Map, List } from 'immutable';\n\nimport { cancelablePromise } from '../../utils/promise';\nimport { postComment } from '../../network/changeset';\nimport { Button } from '../button';\n\ntype propsType = {\n  token: string,\n  changesetId: number,\n  userDetails: Map<string, any>,\n  changesetIsHarmful: boolean,\n  discussions: List<*>\n};\n\nexport class CommentForm extends React.PureComponent<any, propsType, any> {\n  postCommentPromise;\n\n  state = {\n    success: false,\n    error: false,\n    value: ''\n  };\n\n  componentWillUnmount() {\n    this.postCommentPromise && this.postCommentPromise.cancel();\n  }\n  componentDidMount() {\n    this.updateValue(this.props);\n  }\n  componentWillReceiveProps(nextProps) {\n    this.updateValue(nextProps);\n  }\n  updateValue(props) {\n    const userCommentedBefore =\n      props.discussions.filter(\n        item => item.get('userName') === props.userDetails.get('username')\n      ).size > 0;\n    if (\n      this.state.value === '' &&\n      props.changesetIsHarmful !== null &&\n      !userCommentedBefore\n    ) {\n      if (props.changesetIsHarmful) {\n        this.setState({ value: props.userDetails.get('message_bad') });\n      } else {\n        this.setState({ value: props.userDetails.get('message_good') });\n      }\n    }\n  }\n  onChange = (event: any) => {\n    this.setState({ value: event.target.value });\n    if (this.state.error) {\n      this.setState({ error: false });\n    }\n    if (this.state.success) {\n      this.setState({ success: false });\n    }\n  };\n  postComment = (comment: string) => {\n    if (!comment) return;\n    this.postCommentPromise = cancelablePromise(\n      postComment(this.props.changesetId, this.props.token, comment)\n    );\n    this.postCommentPromise.promise\n      .then(r => {\n        this.setState({ success: true });\n        this.setState({ error: false });\n        this.setState({ value: '' });\n      })\n      .catch(e => {\n        console.log(e);\n        this.setState({ error: true });\n        this.setState({ success: false });\n      });\n  };\n  handleSubmit = event => {\n    this.postComment(this.state.value);\n  };\n  render() {\n    return (\n      <div>\n        {this.props.token && (\n          <div className=\"flex-parent flex-parent--column mt6 mb3\">\n            {this.state.success && (\n              <div className=\"bg-green-faint color-green inline-block px6 py3 txt-s align-center round my12\">\n                <strong>Comment successfully posted.</strong>\n                <br />\n                <span>It will appear on OSMCha after some minutes.</span>\n              </div>\n            )}\n            {this.state.error && (\n              <div className=\"bg-red-faint color-red-dark inline-block px6 py3 txt-s align-center round my12\">\n                <strong>It was not possible to post your comment.</strong>\n              </div>\n            )}\n            <div className=\"grid grid--gut12\">\n              <div className=\"col col--12\">\n                <textarea\n                  placeholder=\"Provide constructive feedback to the mapper with a changeset comment.\"\n                  className=\"textarea\"\n                  ref={r => {\n                    if (this.clicked) {\n                      r && r.select();\n                      this.clicked = false;\n                    }\n                  }}\n                  value={this.state.value}\n                  onChange={this.onChange}\n                />\n                <div className=\"pt6 fr\">\n                  <Button className=\"input wmax120\" onClick={this.handleSubmit}>\n                    Post Comment\n                  </Button>\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n","// @flow\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport moment from 'moment';\nimport AnchorifyText from 'react-anchorify-text';\n\nimport AssemblyAnchor from '../assembly_anchor';\nimport { CommentForm } from './comment';\nimport TranslateButton from './translate_button';\nimport { SignInButton } from './sign_in_button';\n\nclass Discussions extends React.PureComponent {\n  props: {\n    discussions: List<*>,\n    changesetId: number,\n    changesetIsHarmful: boolean\n  };\n\n  renderComments() {\n    const { discussions, changesetId } = this.props;\n\n    if (discussions.size === 0) {\n      return (\n        <div className=\"flex-parent flex-parent--column flex-parent--center-cross mb12\">\n          <svg className=\"icon icon--xxl color-darken25\">\n            <use xlinkHref=\"#icon-contact\" />\n          </svg>\n          <p className=\"txt-m\">{`No discussions found for changeset ${changesetId}.`}</p>\n        </div>\n      );\n    } else {\n      return (\n        <div className=\"\">\n          {discussions.map((f, k) => (\n            <div\n              key={k}\n              className=\"flex-parent flex-parent--column justify--space-between border border--gray-light round p6 my6 mt12\"\n            >\n              <div className=\"flex-parent flex-parent--row justify--space-between txt-s \">\n                <span>\n                  By <strong>{f.get('userName')}&nbsp;</strong>\n                </span>\n                <span>{moment(f.get('timestamp')).fromNow()}</span>\n              </div>\n              <div className=\"flex-parent flex-parent--column mt6 mb3\">\n                <p className=\"txt-break-url\">\n                  <AnchorifyText text={f.get('comment')}>\n                    <AssemblyAnchor />\n                  </AnchorifyText>\n                </p>\n              </div>\n              <div className=\"flex-parent justify--flex-end\">\n                <TranslateButton text={f.get('comment')} />\n              </div>\n            </div>\n          ))}\n        </div>\n      );\n    }\n  }\n  render() {\n    const { discussions, changesetId, changesetIsHarmful } = this.props;\n\n    return (\n      <div className=\"px12 py6\">\n        <h2 className=\"txt-m txt-uppercase txt-bold mr6 mb3\">Discussions</h2>\n        {this.props.token ? (\n          this.renderComments()\n        ) : (\n          <div>\n            <div className=\"flex-parent flex-parent--column flex-parent--center-cross mb12\">\n              <svg className=\"icon icon--xxl color-darken25\">\n                <use xlinkHref=\"#icon-contact\" />\n              </svg>\n            </div>\n            <div className=\"flex-parent flex-parent--inline flex-parent--center-main mt6 mb3\">\n              <SignInButton text=\"Sign in to read and post comments\" />\n            </div>\n          </div>\n        )}\n        {this.props.token && (\n          <div className=\"flex-parent flex-parent--column justify--space-between my6 mt12\">\n            <CommentForm\n              changesetId={changesetId}\n              changesetIsHarmful={changesetIsHarmful}\n              discussions={discussions}\n              token={this.props.token}\n              userDetails={this.props.userDetails}\n            />\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nDiscussions = connect((state: RootStateType, props) => ({\n  token: state.auth.get('token'),\n  userDetails: state.auth.get('userDetails')\n}))(Discussions);\n\nexport { Discussions };\n","// @flow\nimport React from 'react';\nimport { importChangesetMap } from '../../utils/cmap';\n\nexport class MapOptions extends React.PureComponent {\n  state = {\n    actions: true,\n    type: true,\n    mapStyle: true,\n    user: true\n  };\n  onChange = () => {\n    importChangesetMap('getMapInstance').then(\n      r => r && r() && r().filterLayers()\n    );\n  };\n  toggleSatellite = () => {\n    importChangesetMap('getMapInstance').then(\n      r =>\n        r &&\n        r() &&\n        r().renderMap('mapbox://styles/openstreetmap/cjnd8lj0e10i42spfo4nsvoay')\n    );\n  };\n  toggleDark = () => {\n    importChangesetMap('getMapInstance').then(\n      r => r && r() && r().renderMap('mapbox://styles/mapbox/dark-v9')\n    );\n  };\n  toggleStreet = () => {\n    importChangesetMap('getMapInstance').then(\n      r => r && r() && r().renderMap('mapbox://styles/mapbox/streets-v9')\n    );\n  };\n  toggleBing = () => {\n    const bingStyle = {\n      version: 8,\n      sources: {\n        'raster-tiles': {\n          type: 'raster',\n          tiles: [\n            'https://ecn.t0.tiles.virtualearth.net/tiles/a{quadkey}.jpeg?g=587&mkt=en-gb&n=z',\n            'https://ecn.t1.tiles.virtualearth.net/tiles/a{quadkey}.jpeg?g=587&mkt=en-gb&n=z',\n            'https://ecn.t2.tiles.virtualearth.net/tiles/a{quadkey}.jpeg?g=587&mkt=en-gb&n=z',\n            'https://ecn.t3.tiles.virtualearth.net/tiles/a{quadkey}.jpeg?g=587&mkt=en-gb&n=z'\n          ],\n          attribution:\n            '© <a href=\"https://blog.openstreetmap.org/2010/11/30/microsoft-imagery-details\">Microsoft Corporation</a>'\n        }\n      },\n      layers: [\n        {\n          id: 'simple-tiles',\n          type: 'raster',\n          source: 'raster-tiles',\n          minzoom: 0,\n          maxzoom: 22\n        }\n      ]\n    };\n    importChangesetMap('getMapInstance').then(\n      r => r && r() && r().renderMap(bingStyle)\n    );\n  };\n  render() {\n    return (\n      <div className=\"px12 py6\">\n        <h2 className=\"txt-m txt-uppercase txt-bold mr6 mb3\">Map Controls</h2>\n        <section className=\"cmap-filter-action-section cmap-pt3\">\n          <h6 className=\"cmap-heading pointer txt-bold\">Filter by actions</h6>\n\n          <ul className=\"cmap-hlist\">\n            <li>\n              <label className=\"cmap-hlist-item cmap-noselect cmap-pointer\">\n                <input\n                  type=\"checkbox\"\n                  value=\"added\"\n                  defaultChecked=\"true\"\n                  id=\"cmap-layer-selector-added\"\n                  onChange={this.onChange}\n                />\n                <span className=\"cmap-label-text\">Added</span>\n                <span className=\"cmap-color-box cmap-color-added\" />\n              </label>\n            </li>\n            <li>\n              <label className=\"cmap-hlist-item cmap-noselect cmap-pointer\">\n                <input\n                  type=\"checkbox\"\n                  value=\"modified\"\n                  defaultChecked=\"true\"\n                  onChange={this.onChange}\n                  id=\"cmap-layer-selector-modified\"\n                />\n                <span className=\"cmap-label-text\">Modified</span>\n                <span className=\"cmap-color-box cmap-color-modified-old\" />\n                <span className=\"cmap-unicode\">→</span>\n                <span className=\"cmap-color-box cmap-color-modified-new\" />\n              </label>\n            </li>\n            <li>\n              <label className=\"cmap-hlist-item cmap-noselect cmap-pointer\">\n                <input\n                  type=\"checkbox\"\n                  value=\"deleted\"\n                  defaultChecked=\"true\"\n                  onChange={this.onChange}\n                  id=\"cmap-layer-selector-deleted\"\n                />\n                <span className=\"cmap-label-text\">Deleted</span>\n                <span className=\"cmap-color-box cmap-color-deleted\" />\n              </label>\n            </li>\n          </ul>\n        </section>\n        <section className=\"cmap-filter-type-section\">\n          <h6 className=\"cmap-heading pointer txt-bold\">Filter by type</h6>\n          <ul className=\"cmap-hlist\">\n            <li>\n              <label className=\"cmap-hlist-item cmap-noselect cmap-pointer\">\n                <input\n                  type=\"checkbox\"\n                  value=\"nodes\"\n                  defaultChecked=\"true\"\n                  id=\"cmap-type-selector-nodes\"\n                  onChange={this.onChange}\n                />\n                <span className=\"cmap-label-text\">Nodes</span>\n              </label>\n            </li>\n            <li>\n              <label className=\"cmap-hlist-item cmap-noselect cmap-pointer\">\n                <input\n                  type=\"checkbox\"\n                  value=\"ways\"\n                  defaultChecked=\"true\"\n                  id=\"cmap-type-selector-ways\"\n                  onChange={this.onChange}\n                />\n                <span className=\"cmap-label-text\">Ways</span>\n              </label>\n            </li>\n            <li>\n              <label className=\"cmap-hlist-item cmap-noselect cmap-pointer\">\n                <input\n                  type=\"checkbox\"\n                  value=\"relations\"\n                  defaultChecked=\"true\"\n                  id=\"cmap-type-selector-relations\"\n                  onChange={this.onChange}\n                />\n                <span className=\"cmap-label-text\">Relations</span>\n              </label>\n            </li>\n          </ul>\n        </section>\n        <section className=\"cmap-map-style-section cmap-pb3\">\n          <h6 className=\"cmap-heading pointer txt-bold\">Map style</h6>\n\n          <ul className=\"cmap-hlist\">\n            <li>\n              <label className=\"cmap-hlist-item cmap-noselect pointer\">\n                <input\n                  type=\"radio\"\n                  value=\"satellite\"\n                  defaultChecked=\"true\"\n                  name=\"baselayer\"\n                  id=\"cmap-baselayer-satellite\"\n                  onClick={this.toggleSatellite}\n                />\n                <span className=\"cmap-label-text\">Satellite</span>\n              </label>\n            </li>\n            <li>\n              <label className=\"cmap-hlist-item cmap-noselect pointer\">\n                <input\n                  type=\"radio\"\n                  value=\"streets\"\n                  name=\"baselayer\"\n                  id=\"cmap-baselayer-streets\"\n                  onClick={this.toggleStreet}\n                />\n                <span className=\"cmap-label-text\">Streets</span>\n              </label>\n            </li>\n            <li>\n              <label className=\"cmap-hlist-item cmap-noselect pointer\">\n                <input\n                  type=\"radio\"\n                  value=\"dark\"\n                  name=\"baselayer\"\n                  id=\"cmap-baselayer-dark\"\n                  onClick={this.toggleDark}\n                />\n                <span className=\"cmap-label-text\">Dark</span>\n              </label>\n            </li>\n            <li>\n              <label className=\"cmap-hlist-item cmap-noselect pointer\">\n                <input\n                  type=\"radio\"\n                  value=\"bing\"\n                  name=\"baselayer\"\n                  id=\"cmap-baselayer-bing\"\n                  onClick={this.toggleBing}\n                />\n                <span className=\"cmap-label-text cmap-pointer\">Bing</span>\n              </label>\n            </li>\n          </ul>\n        </section>\n      </div>\n    );\n  }\n}\n","import React from 'react';\n\nexport function Control({ active, onClick, children, bg, className }: Object) {\n  return (\n    <a\n      className={`${className} mx6 cursor-pointer txt-s inline-block txt-bold round p6 transition color-darken75\n                  ${active\n                    ? 'bg-gray-faint'\n                    : 'bg-white-on-hover bg-lighten50'}`}\n      onClick={onClick}\n    >\n      {children}\n    </a>\n  );\n}\n","// @flow\n\nexport const FILTER_BINDING = {\n  label: 'FILTER_BINDING',\n  bindings: ['\\\\']\n};\nexport const HELP_BINDING = {\n  label: 'HELP_BINDING',\n  bindings: ['/', '?']\n};\nexport const NEXT_CHANGESET = {\n  label: 'NEXT_CHANGESET',\n  bindings: ['down', 'right', 'space']\n};\nexport const PREV_CHANGESET = {\n  label: 'PREV_CHANGESET',\n  bindings: ['up', 'left']\n};\nexport const REFRESH_CHANGESETS = {\n  label: 'REFRESH_CHANGESETS',\n  bindings: ['R', 'r']\n};\nexport const CHANGESET_DETAILS_SHOW_ALL = {\n  label: 'CHANGESET_DETAILS_SHOW_ALL',\n  bindings: ['0']\n};\nexport const CHANGESET_DETAILS_DETAILS = {\n  label: 'CHANGESET_DETAILS_DETAILS',\n  bindings: ['1']\n};\nexport const CHANGESET_DETAILS_SUSPICIOUS = {\n  label: 'CHANGESET_DETAILS_SUSPICIOUS',\n  bindings: ['2']\n};\nexport const CHANGESET_DETAILS_TAGS = {\n  label: 'CHANGESET_DETAILS_TAGS',\n  bindings: ['3']\n};\nexport const CHANGESET_DETAILS_DISCUSSIONS = {\n  label: 'CHANGESET_DETAILS_DISCUSSIONS',\n  bindings: ['4']\n};\nexport const CHANGESET_DETAILS_USER = {\n  label: 'CHANGESET_DETAILS_USER',\n  bindings: ['5']\n};\nexport const CHANGESET_DETAILS_MAP = {\n  label: 'CHANGESET_DETAILS_MAP',\n  bindings: ['6']\n};\nexport const VERIFY_GOOD = {\n  label: 'VERIFY_GOOD',\n  bindings: ['G', 'g']\n};\nexport const VERIFY_BAD = {\n  label: 'VERIFY_BAD',\n  bindings: ['B', 'b']\n};\nexport const VERIFY_CLEAR = {\n  label: 'VERIFY_CLEAR',\n  bindings: ['C', 'c', 'u', 'U']\n};\nexport const OPEN_IN_JOSM = {\n  label: 'OPEN_IN_JOSM',\n  bindings: ['J', 'j']\n};\nexport const OPEN_IN_ID = {\n  label: 'OPEN_IN_ID',\n  bindings: ['I', 'i']\n};\nexport const OPEN_IN_OSM = {\n  label: 'OPEN_IN_OSM',\n  bindings: ['O', 'o']\n};\nexport const OPEN_IN_LEVEL0 = {\n  label: 'OPEN_IN_LEVEL0',\n  bindings: ['L', 'l']\n};\nexport const OPEN_IN_ACHAVI = {\n  label: 'OPEN_IN_ACHAVI',\n  bindings: ['V', 'v']\n};\nexport const OPEN_IN_HDYC = {\n  label: 'OPEN_IN_HDYC',\n  bindings: ['H', 'h']\n};\nexport const FILTER_BY_USER = {\n  label: 'FILTER_BY_USER',\n  bindings: ['A', 'a']\n};\n","import React from 'react';\n\nimport { Control } from './control';\nimport { Floater } from './floater';\n\nimport {\n  CHANGESET_DETAILS_DETAILS,\n  CHANGESET_DETAILS_SUSPICIOUS,\n  CHANGESET_DETAILS_TAGS,\n  CHANGESET_DETAILS_USER,\n  CHANGESET_DETAILS_DISCUSSIONS,\n  CHANGESET_DETAILS_MAP\n} from '../../config/bindings';\n\nexport function ControlLayout({\n  bindingsState,\n  features,\n  discussions,\n  toggleDetails,\n  toggleFeatures,\n  toggleTags,\n  toggleDiscussions,\n  toggleUser,\n  toggleMapOptions\n}) {\n  return (\n    <Floater\n      style={{\n        marginTop: 8,\n        marginLeft: 5\n      }}\n    >\n      <Control\n        active={bindingsState.get(CHANGESET_DETAILS_DETAILS.label)}\n        onClick={toggleDetails}\n        bg={'gray-faint'}\n        className=\"unround-r unround-bl\"\n      >\n        <svg className=\"icon h18 w18 inline-block align-middle \">\n          <use xlinkHref=\"#icon-eye\" />\n        </svg>\n      </Control>\n      <Control\n        active={bindingsState.get(CHANGESET_DETAILS_SUSPICIOUS.label)}\n        onClick={toggleFeatures}\n        bg={'gray-faint'}\n        className=\"unround\"\n      >\n        <svg\n          className={`icon h18 w18 inline-block align-middle ${\n            features && features.size == 0 ? 'color-darken25' : 'color-black'\n          }`}\n        >\n          <use xlinkHref=\"#icon-alert\" />\n        </svg>\n      </Control>\n      <Control\n        active={bindingsState.get(CHANGESET_DETAILS_TAGS.label)}\n        onClick={toggleTags}\n        bg={'gray-faint'}\n        className=\"unround\"\n      >\n        <svg className=\"icon h18 w18 inline-block align-middle\">\n          <use xlinkHref=\"#icon-hash\" />\n        </svg>\n      </Control>\n      <Control\n        active={bindingsState.get(CHANGESET_DETAILS_DISCUSSIONS.label)}\n        onClick={toggleDiscussions}\n        bg={'white'}\n        className=\"unround\"\n      >\n        <svg\n          className={`icon h18 w18 inline-block align-middle ${\n            discussions.size == 0 ? 'color-darken25' : 'color-black'\n          }`}\n        >\n          <use xlinkHref=\"#icon-contact\" />\n        </svg>\n      </Control>\n      <Control\n        active={bindingsState.get(CHANGESET_DETAILS_USER.label)}\n        onClick={toggleUser}\n        bg={'white'}\n        className=\"unround\"\n      >\n        <svg className=\"icon h18 w18 inline-block align-middle\">\n          <use xlinkHref=\"#icon-user\" />\n        </svg>\n      </Control>\n      <Control\n        active={bindingsState.get(CHANGESET_DETAILS_MAP.label)}\n        onClick={toggleMapOptions}\n        bg={'white'}\n        className=\"unround-r unround-tl\"\n      >\n        <svg className=\"icon h18 w18 inline-block align-middle\">\n          <use xlinkHref=\"#icon-map\" />\n        </svg>\n      </Control>\n    </Floater>\n  );\n}\n","// @flow\nexport function getDisplayName(WrappedComponent: Object): string {\n  return WrappedComponent.displayName || WrappedComponent.name || 'Component';\n}\n","// @flow\nimport React from 'react';\nimport Mousetrap from 'mousetrap';\nimport { Map } from 'immutable';\n\nimport { getDisplayName } from '../utils/component';\n\ntype stateType = {\n  bindings: Map<string, *>,\n  lastKeyStroke: Map<string, *>\n};\n\n/**\n * @param exclusive - flag to toggle one key and switch off all other keys\n * @prop `bindingsState` - immutable Map containing toggleState(true/false) for each of the bindings. \n * @prop `lastKeyStroke` - immutable Map containg the state of last key pressed only.\n */\nexport function keyboardToggleEnhancer<P: {}, S: {}>(\n  exclusive: boolean,\n  bindings: Array<{ label: string, bindings: Array<string> }>,\n  WrappedComponent: Class<React.PureComponent<*, P, S>>\n): Class<React.PureComponent<void, P, stateType>> {\n  return class wrapper extends React.PureComponent<void, P, stateType> {\n    static displayName = `HOCKeyboard${getDisplayName(WrappedComponent)}`;\n\n    state = {\n      bindings: Map(),\n      lastKeyStroke: Map()\n    };\n    componentDidMount() {\n      bindings.forEach(item =>\n        Mousetrap.bind(item.bindings, (e: Event) => {\n          e.preventDefault();\n          if (exclusive) {\n            return this.exclusiveKeyToggle(item.label);\n          }\n          this.toggleKey(item.label);\n        })\n      );\n    }\n\n    componentWillUnmount() {\n      // unbind all bindings\n      bindings.forEach(item =>\n        item.bindings.forEach(b => {\n          Mousetrap.unbind(b);\n        })\n      );\n    }\n\n    // allow toggling the state of a particular key\n    toggleKey = (label: string) => {\n      let prev = this.state.bindings;\n      let lastKeyStroke = Map().set(label, !prev.get(label));\n      prev = prev.set(label, !prev.get(label));\n      this.setState({\n        bindings: prev,\n        lastKeyStroke\n      });\n    };\n\n    // exclusively toggle this label and switch off others\n    exclusiveKeyToggle = (label: string) => {\n      let newBindingState = Map();\n      const prevBindingValue = this.state.bindings.get(label);\n      newBindingState = newBindingState.set(label, !prevBindingValue);\n      this.setState({\n        bindings: newBindingState,\n        lastKeyStroke: newBindingState // will be same as state.bindings as size=1\n      });\n    };\n\n    render() {\n      return (\n        <WrappedComponent\n          {...this.props}\n          bindingsState={this.state.bindings}\n          lastKeyStroke={this.state.lastKeyStroke}\n          toggleKey={this.toggleKey}\n          exclusiveKeyToggle={this.exclusiveKeyToggle}\n        />\n      );\n    }\n  };\n}\n","// @flow\nimport React from 'react';\nimport { Map, fromJS } from 'immutable';\nimport debounce from 'lodash.debounce';\nimport { getDisplayName } from '../utils/component';\n\ntype stateType = {\n  data: Map<string, *>\n};\n\n/**\n * @desc If any network request fails it silents it \n * It also sets state on first come first serve basis.\n * @param  onUpdate - decides whether to do the network calls on not\n */\nexport function withFetchDataSilent<P: {}, S: {}>(\n  dataToFetch: (props: P) => Object,\n  onUpdate: (P, P) => boolean,\n  WrappedComponent: Class<React.PureComponent<*, P, S>>\n): Class<React.PureComponent<void, P, stateType>> {\n  return class FetchDataEnhancer extends React.PureComponent<\n    void,\n    P,\n    stateType\n  > {\n    static displayName = `HOCFetchData${getDisplayName(WrappedComponent)}`;\n    state = {\n      data: Map()\n    };\n    fetchedData: Object;\n    initFetching: (props: P) => void;\n    constructor(props) {\n      super(props);\n      this.initFetching = debounce(this._initFetching, 500);\n    }\n    componentDidMount() {\n      this.initFetching(this.props);\n    }\n    componentWillReceiveProps(nextProps: P) {\n      if (onUpdate(nextProps, this.props)) {\n        this.initFetching(nextProps);\n      }\n    }\n    _initFetching = (props: P) => {\n      this.fetchedData = dataToFetch(props);\n      // iterate through all of cancelable promises, one for each api request\n      Object.keys(this.fetchedData).forEach(k => {\n        var prom = this.fetchedData[k];\n        prom.promise\n          .then(x => {\n            let data = this.state.data;\n            data = data.set(k, fromJS(x));\n            this.setState({ data });\n          })\n          .catch(e => console.error(e));\n      });\n    };\n    reloadData = () => {\n      this.initFetching(this.props);\n    };\n    componentWillUnmount() {\n      this.fetchedData &&\n        Object.keys(this.fetchedData).forEach(k => {\n          this.fetchedData[k] && this.fetchedData[k].cancel();\n        });\n    }\n    render() {\n      return (\n        <WrappedComponent\n          {...this.props}\n          data={this.state.data}\n          reloadData={this.reloadData}\n        />\n      );\n    }\n  };\n}\n","import { fromJS, Map } from 'immutable';\nimport { apiOSM } from '../config/constants';\nimport { API_URL } from '../config';\n\nexport function getUserDetails(uid: number, token: string): Map<'string', *> {\n  const user = {};\n  const fromOSM = fetch(`${apiOSM}/user/${uid}`)\n    .then(r => r.text())\n    .then(r => {\n      const parser = new DOMParser();\n      const xml = parser.parseFromString(r, 'text/xml');\n      xml.getElementsByTagName('osm');\n      const userXml =\n        xml.getElementsByTagName('osm')[0] &&\n        xml.getElementsByTagName('osm')[0].getElementsByTagName('user')[0];\n\n      user.count =\n        userXml.getElementsByTagName('changesets')[0] &&\n        userXml.getElementsByTagName('changesets')[0].getAttribute('count');\n\n      user.uid = userXml.getAttribute('id');\n\n      user.accountCreated = userXml.getAttribute('account_created');\n\n      user.description =\n        userXml.getElementsByTagName('description')[0] &&\n        userXml.getElementsByTagName('description')[0].innerHTML;\n\n      user.img =\n        userXml.getElementsByTagName('img')[0] &&\n        userXml.getElementsByTagName('img')[0].getAttribute('href');\n      user.name = userXml.getAttribute('display_name');\n\n      return user;\n    })\n    .catch(e => user)\n    .then(user => fromJS(user));\n\n  const fromOSMCha = fetch(`${API_URL}/user-stats/${uid}/`, {\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: token ? `Token ${token}` : ''\n    }\n  })\n    .then(r => r.json())\n    .then(r => fromJS(r))\n    .catch(e => new Map());\n\n  return Promise.all([fromOSMCha, fromOSM]).then(([r1, r2]) => r1.merge(r2));\n}\n","import { whosThat } from '../config/constants';\nimport { handleErrors } from './aoi';\n\nexport function getUsers(input): Promise<*> {\n  return fetch(`${whosThat}${input}`, {\n    method: 'GET'\n  })\n    .then(handleErrors)\n    .then(response => {\n      return response.json();\n    });\n}\n","// @flow\nimport { Map, List } from 'immutable';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport CSSGroup from 'react-transition-group/CSSTransitionGroup';\n\nimport { cancelablePromise, cancelableFetchJSON } from '../../utils/promise';\nimport { Floater } from './floater';\nimport { Header } from './header';\nimport { User } from './user';\nimport { Features } from './features';\nimport { TagChanges } from './tag_changes';\nimport { Box } from './box';\nimport { Discussions } from './discussions';\nimport { MapOptions } from './map_options';\nimport { ControlLayout } from './control_layout';\nimport { keyboardToggleEnhancer } from '../keyboard_enhancer';\nimport { withFetchDataSilent } from '../fetch_data_enhancer';\nimport { API_URL } from '../../config';\nimport { getUserDetails } from '../../network/openstreetmap';\nimport { getUsers } from '../../network/whosthat';\nimport {\n  CHANGESET_DETAILS_DETAILS,\n  CHANGESET_DETAILS_SUSPICIOUS,\n  CHANGESET_DETAILS_TAGS,\n  CHANGESET_DETAILS_USER,\n  CHANGESET_DETAILS_DISCUSSIONS,\n  CHANGESET_DETAILS_MAP\n} from '../../config/bindings';\n\n// | denote strict props\ntype propsType = {|\n  changesetId: number,\n  currentChangeset: Map<string, any>,\n  // The props below come from HOCs, they are not optional!\n  // to circumvent the $Diff bug  ref: https://github.com/facebook/flow/issues/1601\n  // have to make them optional for flow to not throw error.\n  data?: Map<string, *>,\n  bindingsState?: Map<string, ?boolean>,\n  exclusiveKeyToggle?: (label: string) => any\n|};\n\n// presentational component for view/changeset.js\nexport class _Changeset extends React.PureComponent<*, propsType, *> {\n  getUserDetailsPromise;\n  getWhosThatPromise;\n\n  state = {\n    userDetails: null,\n    whosThat: null\n  };\n\n  static defaultProps = {\n    data: Map()\n  };\n  componentDidMount() {\n    this.toggleDetails();\n  }\n  componentDidUpdate(prevProps) {\n    if (\n      !prevProps.currentChangeset.getIn(['properties', 'uid']) &&\n      this.props.currentChangeset.getIn(['properties', 'uid'])\n    ) {\n      this.getUserDetailsPromise = cancelablePromise(\n        getUserDetails(\n          this.props.currentChangeset.getIn(['properties', 'uid'], null),\n          this.props.token\n        )\n      );\n      this.getUserDetailsPromise.promise\n        .then(r => {\n          this.setState({ userDetails: r });\n        })\n        .catch(e => console.log(e));\n\n      this.getWhosThatPromise = cancelablePromise(\n        getUsers(this.props.currentChangeset.getIn(['properties', 'uid'], ''))\n      );\n      this.getWhosThatPromise.promise\n        .then(r => {\n          this.setState({ whosThat: List(r[0].names) });\n        })\n        .catch(e => console.log(e));\n    }\n  }\n  showFloaters = () => {\n    const { changesetId, currentChangeset, bindingsState, data } = this.props;\n    if (!bindingsState || !data) return;\n    const properties = currentChangeset.get('properties');\n    return (\n      <CSSGroup\n        name=\"floaters\"\n        transitionName=\"floaters\"\n        transitionAppearTimeout={300}\n        transitionAppear={true}\n        transitionEnterTimeout={300}\n        transitionLeaveTimeout={250}\n      >\n        {bindingsState.get(CHANGESET_DETAILS_DETAILS.label) && (\n          <Box key={3} className=\" responsive-box round-tr round-br\">\n            <Header\n              toggleUser={this.toggleUser}\n              changesetId={changesetId}\n              properties={properties}\n              userEditCount={\n                this.state.userDetails != null\n                  ? this.state.userDetails.get('count')\n                  : 0 || data.getIn(['userDetails', 'count'], 0)\n              }\n            />\n          </Box>\n        )}\n        {bindingsState.get(CHANGESET_DETAILS_SUSPICIOUS.label) && (\n          <Box key={2} className=\" responsive-box round-tr round-br\">\n            <Features changesetId={changesetId} properties={properties} />\n          </Box>\n        )}\n        {bindingsState.get(CHANGESET_DETAILS_TAGS.label) && (\n          <Box key={5} className=\" responsive-box round-tr round-br\">\n            <TagChanges changesetId={changesetId} />\n          </Box>\n        )}\n        {bindingsState.get(CHANGESET_DETAILS_DISCUSSIONS.label) && (\n          <Box key={1} className=\" responsive-box  round-tr round-br\">\n            <Discussions\n              changesetId={changesetId}\n              discussions={data.getIn(['osmComments'], List())}\n              changesetIsHarmful={properties.get('harmful')}\n            />\n          </Box>\n        )}\n        {bindingsState.get(CHANGESET_DETAILS_USER.label) && (\n          <Box key={0} className=\"responsive-box round-tr round-br\">\n            <User\n              userDetails={\n                data.getIn(['userDetails', 'name'])\n                  ? data.getIn(['userDetails'], Map())\n                  : Map([\n                      [\n                        'uid',\n                        this.props.currentChangeset.getIn(['properties', 'uid'])\n                      ],\n                      [\n                        'name',\n                        this.props.currentChangeset.getIn([\n                          'properties',\n                          'user'\n                        ])\n                      ],\n                      [\n                        'harmful_changesets',\n                        data.getIn(['userDetails', 'harmful_changesets'])\n                      ],\n                      [\n                        'checked_changesets',\n                        data.getIn(['userDetails', 'checked_changesets'])\n                      ],\n                      [\n                        'changesets_in_osmcha',\n                        data.getIn(['userDetails', 'changesets_in_osmcha'])\n                      ]\n                    ])\n              }\n              whosThat={\n                data.getIn(['userDetails', 'name'])\n                  ? data.getIn(['whosThat', 0, 'names'], List())\n                  : this.state.whosThat || List()\n              }\n              changesetUsername\n            />\n          </Box>\n        )}\n        {bindingsState.get(CHANGESET_DETAILS_MAP.label) && (\n          <Box key={4} className=\"responsive-box round-tr round-br\">\n            <MapOptions />\n          </Box>\n        )}\n      </CSSGroup>\n    );\n  };\n\n  toggleFeatures = () => {\n    this.props.exclusiveKeyToggle &&\n      this.props.exclusiveKeyToggle(CHANGESET_DETAILS_SUSPICIOUS.label);\n  };\n  toggleTags = () => {\n    this.props.exclusiveKeyToggle &&\n      this.props.exclusiveKeyToggle(CHANGESET_DETAILS_TAGS.label);\n  };\n  toggleDiscussions = () => {\n    this.props.exclusiveKeyToggle &&\n      this.props.exclusiveKeyToggle(CHANGESET_DETAILS_DISCUSSIONS.label);\n  };\n  toggleDetails = () => {\n    this.props.exclusiveKeyToggle &&\n      this.props.exclusiveKeyToggle(CHANGESET_DETAILS_DETAILS.label);\n  };\n  toggleUser = () => {\n    this.props.exclusiveKeyToggle &&\n      this.props.exclusiveKeyToggle(CHANGESET_DETAILS_USER.label);\n  };\n  toggleMapOptions = () => {\n    this.props.exclusiveKeyToggle &&\n      this.props.exclusiveKeyToggle(CHANGESET_DETAILS_MAP.label);\n  };\n\n  render() {\n    const { data, bindingsState, currentChangeset } = this.props;\n    const features = currentChangeset.getIn(['properties', 'features']);\n    return (\n      <div className=\"flex-child clip\">\n        <ControlLayout\n          toggleDetails={this.toggleDetails}\n          toggleFeatures={this.toggleFeatures}\n          toggleTags={this.toggleTags}\n          toggleDiscussions={this.toggleDiscussions}\n          toggleUser={this.toggleUser}\n          toggleMapOptions={this.toggleMapOptions}\n          features={features}\n          bindingsState={bindingsState}\n          discussions={data && data.getIn(['osmComments'], List())}\n        />\n        <Floater style={{ marginTop: 5, marginLeft: 41 }}>\n          {this.showFloaters()}\n        </Floater>\n      </div>\n    );\n  }\n}\n\nlet Changeset = keyboardToggleEnhancer(\n  true,\n  [\n    CHANGESET_DETAILS_DETAILS,\n    CHANGESET_DETAILS_SUSPICIOUS,\n    CHANGESET_DETAILS_TAGS,\n    CHANGESET_DETAILS_USER,\n    CHANGESET_DETAILS_DISCUSSIONS,\n    CHANGESET_DETAILS_MAP\n  ],\n  _Changeset\n);\n\n/**\n * Never use props not required by the Basecomponent in HOCs\n */\nChangeset = withFetchDataSilent(\n  (props: propsType) => ({\n    userDetails: cancelablePromise(\n      getUserDetails(\n        props.currentChangeset.getIn(['properties', 'uid'], null),\n        props.token\n      )\n    ),\n    osmComments: cancelableFetchJSON(\n      `${API_URL}/changesets/${props.changesetId}/comment/`,\n      props.token\n    ),\n    whosThat: cancelablePromise(\n      getUsers(props.currentChangeset.getIn(['properties', 'uid'], ''))\n    )\n  }),\n  (nextProps: propsType, props: propsType) =>\n    props.changesetId !== nextProps.changesetId,\n  Changeset\n);\n\nChangeset = connect((state: RootStateType, props) => ({\n  token: state.auth.get('token')\n}))(Changeset);\n\nexport { Changeset };\n","// @flow\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { Map, fromJS } from 'immutable';\nimport Mousetrap from 'mousetrap';\n\nimport { Changeset as ChangesetDumb } from '../components/changeset';\n\nimport { dispatchEvent } from '../utils/dispatch_event';\n\nimport { applyFilters } from '../store/filters_actions';\nimport { FILTER_BY_USER } from '../config/bindings';\nimport type { RootStateType } from '../store';\n\nclass Changeset extends React.PureComponent {\n  props: {\n    errorChangeset: ?Object, // error of the latest that changeset failed\n    location: Object,\n    loading: boolean, // loading of the selected changesetId\n    currentChangeset?: Map<string, *>,\n    changesetId: number,\n    token: string,\n    applyFilters: (Map<string, *>) => mixed // base 0\n  };\n  componentDidMount() {\n    Mousetrap.bind(FILTER_BY_USER.bindings, this.filterChangesetsByUser);\n  }\n  componentWillUnmount() {\n    FILTER_BY_USER.bindings.forEach(k => Mousetrap.unbind(k));\n  }\n  filterChangesetsByUser = () => {\n    if (this.props.currentChangeset) {\n      const userName = this.props.currentChangeset.getIn([\n        'properties',\n        'user'\n      ]);\n      this.props.applyFilters(\n        new Map().set(\n          'users',\n          fromJS([\n            {\n              label: userName,\n              value: userName\n            }\n          ])\n        )\n      );\n    }\n  };\n  showChangeset = () => {\n    const {\n      loading,\n      errorChangeset,\n      currentChangeset,\n      changesetId,\n      token\n    } = this.props;\n\n    if (loading || !currentChangeset) {\n      return null;\n    }\n\n    if (errorChangeset) {\n      dispatchEvent('showToast', {\n        title: `changeset:${changesetId} failed to load`,\n        content: 'Try reloading osmcha',\n        timeOut: 5000,\n        type: 'error'\n      });\n      console.error(errorChangeset);\n      return null;\n    }\n    return (\n      <ChangesetDumb\n        changesetId={changesetId}\n        currentChangeset={currentChangeset}\n        token={token}\n      />\n    );\n  };\n  render() {\n    return (\n      <div>\n        <div className=\"flex-parent flex-parent--column clip\">\n          {this.showChangeset()}\n        </div>\n      </div>\n    );\n  }\n}\n\nChangeset = connect(\n  (state: RootStateType, props) => ({\n    changeset: state.changeset,\n    location: props.location,\n    changesetId: parseInt(props.match.params.id, 10),\n    currentChangeset: state.changeset.getIn([\n      'changesets',\n      parseInt(props.match.params.id, 10)\n    ]),\n    errorChangeset: state.changeset.get('errorChangeset'),\n    loading: state.changeset.get('loading'),\n    token: state.auth.get('token')\n  }),\n  { applyFilters }\n)(Changeset);\n\nexport { Changeset };\n","// @flow\nimport React from 'react';\nimport showdown from 'showdown';\nimport { cancelablePromise } from '../utils/promise';\n\nconst converter = new showdown.Converter({\n  ghCompatibleHeaderId: true,\n  extensions: formatMarkdown()\n});\n\nconverter.setFlavor('github');\nconverter.setOption('simpleLineBreaks', false);\n\nfunction formatMarkdown() {\n  return [\n    {\n      type: 'output',\n      regex: /a href=/g,\n      replace: 'a class=\"link\" href='\n    },\n    {\n      type: 'output',\n      regex: /\\<h3/g,\n      replace: '<h3 class=\"txt-l txt-bold mt18\"'\n    },\n    {\n      type: 'output',\n      regex: /\\<h2/g,\n      replace:\n        '<h2 class=\"txt-xl txt-bold mt24 mb12 border-b border--gray-light border--1\"'\n    },\n    {\n      type: 'output',\n      regex: /\\<h1/g,\n      replace:\n        '<h1 class=\"txt-xl txt-bold mt24 mb12 border-b border--gray-light border--1\"'\n    },\n    {\n      type: 'output',\n      regex: /\\<ul\\>/g,\n      replace: '<ul class=\"pl24\">'\n    },\n    {\n      type: 'output',\n      regex: /\\<li\\>/g,\n      replace: '<li style=\"list-style-type: circle;\">'\n    },\n    {\n      type: 'output',\n      regex: /img src=/g,\n      replace: `img\n      class=\"py12 my12 border border--gray-light border--2\"\n      style=\"margin-left: auto;\n             margin-right: auto;\n             display: block;\n            \" src=`\n    }\n  ];\n}\n\nexport class About extends React.PureComponent {\n  state = {\n    about: null\n  };\n  cancellablePromise = null;\n  componentDidMount() {\n    this.cancellablePromise = cancelablePromise(\n      fetch(\n        'https://raw.githubusercontent.com/mapbox/osmcha-frontend/master/ABOUT.md'\n      ).then(r => r.text())\n    );\n    this.cancellablePromise.promise\n      .then(markdown => this.setState({ about: converter.makeHtml(markdown) }))\n      .catch(e => {});\n  }\n  componentWillUnmount() {\n    this.cancellablePromise && this.cancellablePromise.cancel();\n  }\n  render() {\n    return (\n      <div className=\"scroll-auto about-page-height flex-parent flex-parent--column pb12 flex-parent--center-cross\">\n        <div\n          id=\"guide\"\n          className=\"pb36 px12 wmax720\"\n          dangerouslySetInnerHTML={{\n            __html: this.state.about\n          }}\n        />\n      </div>\n    );\n  }\n}\n","import React from 'react';\n\nexport const Stats = () => <div> stats here </div>;\n","// @flow\nimport React from 'react';\nimport Select from 'react-select';\nimport { fromJS } from 'immutable';\nimport type { filterType } from './';\n\nexport class Radio extends React.PureComponent {\n  props: {\n    name: string,\n    display: string,\n    type: string,\n    placeholder: string,\n    options: Array<Object>,\n    value: filterType,\n    onChange: (string, value?: filterType) => any\n  };\n  onChangeLocal = (data: Object) => {\n    if (!data || data.value === '') {\n      return this.props.onChange(this.props.name); // always sends 1 size array to keep things consistent with multiselect InputTypes\n    }\n    this.props.onChange(this.props.name, fromJS([data])); // always sends 1 size array to keep things consistent with multiselect InputTypes\n  };\n  render() {\n    const { name, options, placeholder, value } = this.props;\n    return (\n      <Select\n        name={name}\n        value={value && value.get(0) && value.get(0).toJS()} // always takes 1st item array to keep things consistent with multiselect InputTypes\n        options={options}\n        placeholder={placeholder}\n        className=\"\"\n        onChange={this.onChangeLocal}\n      />\n    );\n  }\n}\n","// @flow\nimport React from 'react';\nimport { fromJS } from 'immutable';\nimport type { filterType } from './';\n\nexport class Text extends React.Component {\n  props: {\n    name: string,\n    display: string,\n    type: string,\n    placeholder: string,\n    value: filterType,\n    className: string,\n    onChange: (string, value?: filterType) => any,\n    min: ?string,\n    max: ?string\n  };\n  static defaultProps = {\n    className: ''\n  };\n  state = {\n    isValid: true\n  };\n  handleFormChange = (event: any) => {\n    const target = event.target;\n    const value = target.type === 'checkbox' ? target.checked : target.value;\n    const name = target.name;\n    this.setState({ isValid: target.validity.valid });\n    if (!value || value === '') {\n      return this.props.onChange(name);\n    }\n    this.props.onChange(\n      name,\n      fromJS([\n        // allways sends 1 size array to keep things consistent\n        {\n          label: value,\n          value\n        }\n      ])\n    );\n  };\n  render() {\n    const {\n      name,\n      type,\n      placeholder,\n      display,\n      value,\n      className,\n      min,\n      max\n    } = this.props;\n    const { isValid } = this.state;\n    const errorClass = 'border border--1 border--red';\n    return (\n      <input\n        name={name}\n        className={`input ${className} ${isValid ? '' : errorClass}`}\n        value={(value && value.getIn([0, 'value'])) || ''} // allways sends 1 size array to keep things consistent\n        onChange={this.handleFormChange}\n        type={type}\n        placeholder={placeholder || display}\n        min={min}\n        max={max}\n      />\n    );\n  }\n}\n","// @flow\nimport React from 'react';\nimport { fromJS } from 'immutable';\nimport { Creatable, Async } from 'react-select';\nimport { API_URL } from '../../config';\nimport type { filterType } from './';\n\nexport class MultiSelect extends React.PureComponent {\n  props: {\n    name: string,\n    display: string,\n    value: filterType,\n    type: string,\n    placeholder: string,\n    options: Array<Object>,\n    dataURL: ?string,\n    onChange: (string, value?: filterType) => any,\n    showAllToggle: boolean,\n    token: string\n  };\n  state = {\n    allToggle: this.props.name.slice(0, 4) === 'all_'\n  };\n  getAsyncOptions = () => {\n    if (!this.props.dataURL) return;\n    return fetch(`${API_URL}/${this.props.dataURL}/`, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: this.props.token ? `Token ${this.props.token}` : ''\n      }\n    })\n      .then(response => {\n        return response.json();\n      })\n      .then(json => {\n        const data = json\n          .filter(d => d.for_changeset)\n          .map(d => ({ ...d, label: d.name, value: d.id }));\n        return { options: data };\n      });\n  };\n  onChangeLocal = (data: ?Array<Object>) => {\n    if (!Array.isArray(data)) return;\n    this.sendData(this.state.allToggle, data);\n  };\n  sendData = (allToggle: boolean, data: Array<Object>) => {\n    let name =\n      this.props.name.slice(0, 4) === 'all_'\n        ? this.props.name.slice(4)\n        : this.props.name;\n\n    name = `${allToggle ? 'all_' : ''}${name}`;\n    if (data.length === 0) return this.props.onChange(name);\n    var processed = data.map(o => ({ label: o.label, value: o.value })); // remove any bogus keys\n    this.props.onChange(name, fromJS(processed));\n  };\n  renderSelect = () => {\n    const { name, options, placeholder, value, display, dataURL } = this.props;\n    if (dataURL)\n      return (\n        <Async\n          multi\n          promptTextCreator={label => `Add ${label} to ${display}`}\n          name={name}\n          className=\"\"\n          value={value && value.toJS()}\n          loadOptions={this.getAsyncOptions}\n          onChange={this.onChangeLocal} // have to add an identifier for filter name\n          placeholder={placeholder}\n        />\n      );\n    return (\n      <Creatable\n        multi\n        promptTextCreator={label => `Add ${label} to ${display}`}\n        name={name}\n        value={value && value.toJS()}\n        options={options}\n        onChange={this.onChangeLocal}\n        placeholder={placeholder}\n      />\n    );\n  };\n  handleToggle = (e: Event) => {\n    let { value } = this.props;\n    value = value && value.toJS();\n    if (value) {\n      this.sendData(!this.state.allToggle, value);\n    }\n    this.setState({\n      allToggle: !this.state.allToggle\n    });\n  };\n  render() {\n    return (\n      <div className=\"\">\n        {this.props.showAllToggle && (\n          <span className=\"relative fr\">\n            <span className=\"absolute\" style={{ left: -95, top: -30 }}>\n              <div className=\"toggle-group txt-s mr18\">\n                <label className=\"toggle-container\">\n                  <input\n                    checked={!this.state.allToggle}\n                    name={`toggle${this.props.name}`}\n                    type=\"radio\"\n                    onClick={this.handleToggle}\n                  />\n                  <div className=\"toggle toggle--gray-light\">OR</div>\n                </label>\n                <label className=\"toggle-container\">\n                  <input\n                    name={`toggle${this.props.name}`}\n                    type=\"radio\"\n                    checked={this.state.allToggle}\n                    onClick={this.handleToggle}\n                  />\n                  <div className=\"toggle toggle--gray-light\">AND</div>\n                </label>\n              </div>\n            </span>\n          </span>\n        )}\n        {this.renderSelect()}\n      </div>\n    );\n  }\n}\n\nexport class MappingTeamMultiSelect extends MultiSelect {\n  getAsyncOptions = () => {\n    if (!this.props.dataURL) return;\n    return fetch(`${API_URL}/${this.props.dataURL}/`, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: this.props.token ? `Token ${this.props.token}` : ''\n      }\n    })\n      .then(response => {\n        return response.json();\n      })\n      .then(json => {\n        const data = json.map(d => {\n          if (d.trusted) {\n            return { ...d, label: `${d.name} (verified)`, value: d.name };\n          } else {\n            return {\n              ...d,\n              label: d.name.replace('(verified)', ''),\n              value: d.name\n            };\n          }\n        });\n        return { options: data };\n      });\n  };\n  sendData = (allToggle: boolean, data: Array<Object>) => {\n    let name =\n      this.props.name.slice(0, 4) === 'all_'\n        ? this.props.name.slice(4)\n        : this.props.name;\n\n    name = `${allToggle ? 'all_' : ''}${name}`;\n    if (data.length === 0) return this.props.onChange(name);\n    var processed = data.map(o => ({ label: o.label, value: o.value })); // remove any bogus keys\n    this.props.onChange(name, fromJS(processed));\n  };\n}\n","// @flow\nimport React from 'react';\nimport { fromJS } from 'immutable';\nimport { Async } from 'react-select';\nimport Select from 'react-select';\n\nimport bbox from '@turf/bbox';\nimport simplify from '@turf/simplify';\nimport MapboxDraw from '@mapbox/mapbox-gl-draw/dist/mapbox-gl-draw';\n\nimport { nominatimSearch } from '../../network/nominatim';\nimport { mapboxAccessToken } from '../../config/constants';\nimport { importChangesetMap } from '../../utils/cmap';\n\nexport class LocationSelect extends React.PureComponent {\n  props: {\n    name: string,\n    display: string,\n    value: Object,\n    type: string,\n    placeholder: string,\n    options: Array<Object>,\n    onChange: (string, value: Object) => any\n  };\n  state = {\n    geometry: Object,\n    location: '',\n    queryType: 'q',\n    lastSearch: new Date()\n  };\n  queryTypeOptions = [\n    { value: 'q', label: 'Any' },\n    { value: 'city', label: 'City' },\n    { value: 'county', label: 'County' },\n    { value: 'state', label: 'State' },\n    { value: 'country', label: 'Country' }\n  ];\n  map = null;\n  draw = null;\n\n  updateMap(data) {\n    if (this.map.getSource('feature')) {\n      this.map.getSource('feature').setData(data);\n    } else {\n      this.map.addSource('feature', {\n        type: 'geojson',\n        data: {\n          type: 'Feature',\n          geometry: data\n        }\n      });\n    }\n    if (this.map.getLayer('geometry') === undefined) {\n      this.map.addLayer({\n        id: 'geometry',\n        type: 'fill',\n        source: 'feature',\n        paint: {\n          'fill-color': '#088',\n          'fill-opacity': 0.6\n        }\n      });\n    }\n    this.setState({ geometry: data });\n    this.props.onChange(\n      this.props.name,\n      fromJS([{ label: data, value: data }])\n    );\n    const geom_bbox = bbox(data);\n    this.map.fitBounds([geom_bbox.slice(0, 2), geom_bbox.slice(2)], {\n      padding: 20\n    });\n  }\n\n  componentDidMount() {\n    importChangesetMap('getGL').then((getGL: any) => {\n      if (getGL) {\n        var mapboxgl = getGL();\n        mapboxgl.accessToken = mapboxAccessToken;\n        const map = new mapboxgl.Map({\n          container: 'geometry-map',\n          style: 'mapbox://styles/mapbox/light-v9'\n        });\n        this.map = map;\n        this.draw = new MapboxDraw({\n          displayControlsDefault: false,\n          controls: {\n            polygon: true\n          }\n        });\n        map.addControl(this.draw);\n\n        map.on('draw.create', this.drawingUpdate);\n        map.on('draw.modechange', this.clearBeforeDraw);\n        map.on('draw.delete', this.drawingUpdate);\n        map.on('draw.update', this.drawingUpdate);\n        map.on('style.load', () => {\n          try {\n            this.updateMap(\n              this.props.value\n                .get('0')\n                .get('value')\n                .toJS()\n            );\n          } catch (e) {\n            if (e instanceof TypeError) {\n            }\n          }\n        });\n      }\n    });\n  }\n\n  clearBeforeDraw = e => {\n    if (e.mode === 'draw_polygon') {\n      this.clearMap();\n      this.draw.changeMode('draw_polygon');\n    }\n  };\n  clearMap = () => {\n    this.draw.deleteAll();\n    this.props.onChange(this.props.name, null);\n    if (this.map.getSource('feature')) {\n      this.map.getSource('feature').setData({});\n    }\n    if (this.map.getLayer('geometry')) {\n      this.map.removeLayer('geometry');\n    }\n  };\n  drawingUpdate = e => {\n    const drawingData = this.draw.getAll();\n    if (\n      drawingData &&\n      drawingData.features.length &&\n      drawingData.features[0].geometry\n    ) {\n      this.updateMap(drawingData.features[0].geometry);\n    } else {\n      this.clearMap();\n    }\n  };\n\n  getAsyncOptions = (input: string, cb: (e: ?Error, any) => void) => {\n    if (input.length > 3) {\n      return nominatimSearch(input, this.state.queryType)\n        .then(json => {\n          if (!Array.isArray(json)) return cb(null, { options: [] });\n\n          const data = json.map(d => ({\n            label: d.display_name,\n            value: d.geojson\n          }));\n          return cb(null, { options: data });\n        })\n        .catch(e => cb(e, null));\n    } else {\n      return cb(null, { options: [] });\n    }\n  };\n  onChangeLocal = (data: ?Array<Object>) => {\n    if (data) {\n      this.draw.deleteAll();\n      const simplified_bounds = simplify(data.value, { tolerance: 0.1 });\n      this.updateMap(simplified_bounds);\n    }\n  };\n  handleQueryTypeChange = value => {\n    this.setState({ queryType: value });\n  };\n  renderSelect = () => {\n    const { name, placeholder, value } = this.props;\n    return (\n      <Async\n        name={name}\n        className=\"\"\n        value={value}\n        loadOptions={this.getAsyncOptions}\n        onChange={this.onChangeLocal} // have to add an identifier for filter name\n        placeholder={placeholder}\n      />\n    );\n  };\n  render() {\n    return (\n      <div>\n        <div className=\"grid grid--gut12\">\n          <div className=\"col col--4\">\n            <Select\n              onChange={this.handleQueryTypeChange}\n              options={this.queryTypeOptions}\n              simpleValue\n              value={this.state.queryType}\n              placeholder=\"Place Type\"\n            />\n          </div>\n          <div className=\"col col--8 pl3\">{this.renderSelect()}</div>\n        </div>\n        <div className=\"grid grid--gut12 pt6\">\n          <div className=\"col col--12 map-select\">\n            <div id=\"geometry-map\">\n              <div\n                onClick={this.clearMap}\n                className=\"pointer z5 m3 inline-block px6 py3 txt-s bg-white txt-bold round absolute fl\"\n                style={{ zIndex: 2 }}\n              >\n                Clear All\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","import { nominatimUrl } from '../config/constants';\nimport { handleErrors } from './aoi';\n\nexport function nominatimSearch(input, type): Promise<*> {\n  return fetch(\n    `${nominatimUrl}?polygon_geojson=1&format=json&${type}=${input}`,\n    {\n      method: 'GET'\n    }\n  )\n    .then(handleErrors)\n    .then(response => {\n      return response.json();\n    });\n}\n","import React from 'react';\nimport CSSTransitionGroup from 'react-transition-group/CSSTransitionGroup';\n\nexport function Wrapper({\n  display,\n  children,\n  description,\n  handleFocus = () => {},\n  name,\n  hasValue\n}) {\n  return (\n    <div\n      className=\"ml3 my12 flex-parent flex-parent--column\"\n      onClick={() => handleFocus(name)}\n      onFocus={() => handleFocus(name)}\n    >\n      <div className=\"flex-parent flex-parent--row flex-parent--center-cross mt12 mb6 \">\n        <span className=\"relative\">\n          {hasValue && (\n            <svg\n              style={{ left: -18, top: -9 }}\n              className=\"absolute icon inline-block align-middle color-blue\"\n            >\n              <use xlinkHref=\"#icon-circle\" />\n            </svg>\n          )}\n        </span>\n        <strong className=\"txt-truncate pointer\">{display}&nbsp;</strong>\n      </div>\n      <div className=\"grid\">\n        <span className=\"col col--6-mxl col--6-ml col--12-mm col--12\">\n          {children}\n        </span>\n        {window.innerWidth > 800 && (\n          <span className=\"col col--3-mxl col--3-ml col--1-mm\">\n            <span className=\"desc block relative ml12 wmin120\">\n              <CSSTransitionGroup\n                transitionName=\"filters-desc\"\n                transitionAppearTimeout={300}\n                transitionEnterTimeout={300}\n                transitionLeaveTimeout={200}\n              >\n                {description && (\n                  <span\n                    key={0}\n                    className=\"absolute wmin300 bg-white\"\n                    style={{ marginTop: -5 }}\n                  >\n                    {description}\n                  </span>\n                )}\n              </CSSTransitionGroup>\n            </span>\n          </span>\n        )}\n      </div>\n    </div>\n  );\n}\n","// @flow\nimport React from 'react';\nimport { Map, fromJS } from 'immutable';\nimport Select from 'react-select';\nimport type { filtersType } from './';\n\nexport class Meta extends React.PureComponent {\n  options: Array<*>;\n  props: {\n    placeholder: string,\n    name: string,\n    activeFilters: filtersType,\n    metaOf: Array<string>,\n    options: Array<Object>,\n    replaceFiltersState: filtersType => void\n  };\n  handleChange = (data: Object) => {\n    let { activeFilters } = this.props;\n    if (!activeFilters) activeFilters = new Map();\n    this.props.metaOf.forEach(f => {\n      activeFilters = activeFilters.delete(f);\n    });\n    if (data && data.value) {\n      activeFilters = activeFilters.merge(fromJS(data.value));\n    }\n    this.props.replaceFiltersState(activeFilters);\n  };\n  findCurrentValue = () => {\n    const { activeFilters } = this.props;\n    let value;\n    if (activeFilters) {\n      activeFilters.forEach((v, k) => {\n        this.props.options.forEach(option => {\n          if (\n            Object.keys(option.value)[0] === k &&\n            v.getIn([0, 'value']) === option.value[k][0].value\n          ) {\n            value = option;\n          }\n        });\n      });\n    }\n    return value;\n  };\n  render() {\n    const { name, placeholder } = this.props;\n    let value = this.findCurrentValue();\n    return (\n      <Select\n        name={name}\n        value={value} // always takes 1st item array to keep things consistent with multiselect InputTypes\n        options={this.props.options}\n        placeholder={placeholder}\n        className=\"\"\n        onChange={this.handleChange}\n      />\n    );\n  }\n}\n","// @flow\nimport React from 'react';\nimport { fromJS } from 'immutable';\nimport moment from 'moment';\nimport type { filterType } from './';\nimport type Moment from 'moment';\n\nimport DatePicker from 'react-datepicker';\nimport 'react-datepicker/dist/react-datepicker.css';\n\nexport class Date extends React.Component {\n  props: {\n    name: string,\n    display: string,\n    type: string,\n    placeholder: string,\n    value: filterType,\n    className: string,\n    onChange: (string, value?: filterType) => any,\n    min: ?string,\n    max: ?string\n  };\n  static defaultProps = {\n    className: ''\n  };\n  handleDateChange = (momentObj: ?Moment) => {\n    const value = momentObj ? momentObj.format('YYYY-MM-DD') : null;\n    const name = this.props.name;\n    if (value) {\n      this.props.onChange(\n        name,\n        fromJS([\n          // allways sends 1 size array to keep things consistent\n          {\n            label: value,\n            value\n          }\n        ])\n      );\n    } else {\n      this.props.onChange(name);\n    }\n  };\n  render() {\n    const { placeholder, display, value, className, min, max } = this.props;\n    const hasValue = value && value.getIn([0, 'value']);\n    return (\n      <DatePicker\n        className={`input ${className} date-width-full`}\n        dateFormat=\"YYYY-MM-DD\"\n        isClearable={true}\n        selected={hasValue ? moment(value.getIn([0, 'value'])) : null}\n        placeholderText={placeholder || display}\n        onChange={this.handleDateChange}\n        minDate={min && moment(min)}\n        maxDate={max && moment(max)}\n      />\n    );\n  }\n}\n","// @flow\nimport React from 'react';\nimport debounce from 'lodash.debounce';\nimport { fromJS } from 'immutable';\n\nimport { mapboxAccessToken } from '../config/constants';\nimport { importChangesetMap } from '../utils/cmap';\n\nexport class BBoxPicker extends React.Component {\n  update = debounce(() => {\n    if (!this.map) return;\n    let bounds: {\n      getSouth: () => number,\n      getWest: () => number,\n      getNorth: () => number,\n      getEast: () => number\n    } =\n      this.map && this.map.getBounds(); // ne, sw / lat, lng\n\n    let s = bounds.getSouth().toFixed(4);\n    let w = bounds.getWest().toFixed(4);\n    let n = bounds.getNorth().toFixed(4);\n    let e = bounds.getEast().toFixed(4);\n    let wsen = [w, s, e, n].join(',');\n    this.props.onChange(\n      this.props.name,\n      fromJS([\n        {\n          label: wsen,\n          value: wsen\n        }\n      ])\n    );\n  }, 600);\n\n  map = null;\n  componentDidMount() {\n    importChangesetMap('getGL').then((getGL: any) => {\n      if (getGL) {\n        var mapboxgl = getGL();\n        mapboxgl.accessToken = mapboxAccessToken;\n        if (this.props.value) {\n          // let bbox = this.props.value.getIn(['0', 'value'], '').split(',');\n        }\n        const map = new mapboxgl.Map({\n          container: 'map',\n          style: 'mapbox://styles/mapbox/light-v9'\n        });\n        map.on('dragend', this.update);\n        map.on('zoomend', this.update);\n        map.on('touchend', this.update);\n        this.map = map;\n      }\n    });\n  }\n  componentWillUnmount() {\n    this.map && this.map.remove();\n  }\n  clearBbox = () => {\n    this.props.onChange(this.props.name, null);\n  };\n\n  render() {\n    return (\n      <div className=\"map-select border border--1  border--gray-light\">\n        <div\n          onClick={this.clearBbox}\n          className=\"pointer z5 m3 inline-block px6 py3 txt-s bg-gray-light txt-bold round absolute fl\"\n        >\n          Clear\n        </div>\n        <div id=\"map\" style={{ height: 300, width: 300 }} />\n      </div>\n    );\n  }\n}\n","// @flow\nimport React from 'react';\nimport { Loading } from './loading';\n\ntype propTypes = {\n  loading: boolean\n};\n\nexport function loadingEnhancer<P: {}, S: {}>(\n  WrappedComponent: Class<React.PureComponent<any, P, S>>\n): Class<React.PureComponent<void, P & propTypes, *>> {\n  return class PureRendered extends React.PureComponent<\n    void,\n    P & propTypes,\n    *\n  > {\n    render() {\n      return this.props.loading\n        ? <Loading />\n        : <WrappedComponent {...this.props} />;\n    }\n  };\n}\n","// @flow\nimport React from 'react';\nimport moment from 'moment';\n\nimport {\n  Text,\n  Radio,\n  MappingTeamMultiSelect,\n  MultiSelect,\n  Wrapper,\n  Meta,\n  Date,\n  LocationSelect\n} from './';\n\nimport { BBoxPicker } from '../bbox_picker';\nimport { loadingEnhancer } from '../loading_enhancer';\nimport filters from '../../config/filters.json';\nimport { getDefaultFromDate } from '../../utils/filters';\nimport type { filterType, filtersType } from './';\n\nconst defaultDate = getDefaultFromDate().getIn(['date__gte']);\n\nvar filtersData = filters.filter(f => {\n  return !f.ignore;\n});\ntype propsType = {|\n  filters: filtersType,\n  loading: boolean,\n  active: string,\n  token: string,\n  handleChange: (name: string, values?: filterType) => void,\n  handleFocus: (name: string) => void,\n  replaceFiltersState: (filters: filtersType) => void,\n  handleToggleAll: (name: string, values?: filterType) => void\n|};\nclass FiltersList extends React.PureComponent<void, propsType, *> {\n  renderFilters = (f: Object, k: number) => {\n    const propsToSend = {\n      name: f.name,\n      type: f.type,\n      display: f.display,\n      value: this.props.filters.get(f.name),\n      placeholder: f.placeholder,\n      options: f.options || [],\n      onChange: this.props.handleChange,\n      dataURL: f.data_url,\n      min: f.min,\n      max: f.max\n    };\n    const wrapperProps = {\n      name: f.name,\n      handleFocus: this.props.handleFocus,\n      hasValue: this.props.filters.has(f.name),\n      display: f.display,\n      key: k,\n      description: this.props.active === f.name && f.description\n    };\n    if (f.range && f.type === 'number') {\n      const gteValue = this.props.filters.get(f.name + '__gte');\n      const lteValue = this.props.filters.get(f.name + '__lte');\n      return (\n        <Wrapper\n          {...wrapperProps}\n          hasValue={\n            this.props.filters.has(f.name + '__gte') ||\n            this.props.filters.has(f.name + '__lte')\n          }\n        >\n          <span className=\"flex-parent flex-parent--row  \">\n            <Text\n              {...propsToSend}\n              className=\"mr3\"\n              name={f.name + '__gte'}\n              value={gteValue}\n              placeholder={'from'}\n              max={lteValue && lteValue.getIn([0, 'value'])}\n              min=\"0\"\n            />\n            <Text\n              {...propsToSend}\n              name={f.name + '__lte'}\n              value={lteValue}\n              placeholder={'to'}\n              min={gteValue && gteValue.getIn([0, 'value'])}\n            />\n          </span>\n        </Wrapper>\n      );\n    }\n    if (!f.range && f.type === 'number') {\n      return (\n        <Wrapper {...wrapperProps}>\n          <Text {...propsToSend} className=\"mr3\" min={1} max={100} />\n        </Wrapper>\n      );\n    }\n    if (f.range && f.type === 'date') {\n      let gteValue = this.props.filters.get(f.name + '__gte');\n      if (f.name === 'date') {\n        gteValue = this.props.filters.get(f.name + '__gte') || defaultDate;\n      }\n      const lteValue = this.props.filters.get(f.name + '__lte');\n      const today = moment().format('YYYY-MM-DD');\n      return (\n        <Wrapper\n          {...wrapperProps}\n          hasValue={\n            this.props.filters.has(f.name + '__gte') ||\n            this.props.filters.has(f.name + '__lte')\n          }\n        >\n          <span className=\"flex-parent flex-parent--row h36\">\n            <Date\n              {...propsToSend}\n              name={f.name + '__gte'}\n              value={gteValue}\n              placeholder={'From'}\n              max={(lteValue && lteValue.getIn([0, 'value'])) || today}\n            />\n            <Date\n              {...propsToSend}\n              name={f.name + '__lte'}\n              value={lteValue}\n              placeholder={'To'}\n              min={gteValue && gteValue.getIn([0, 'value'])}\n              max={today}\n            />\n          </span>\n        </Wrapper>\n      );\n    }\n    if (f.type === 'location') {\n      return (\n        <Wrapper {...wrapperProps}>\n          <LocationSelect {...propsToSend} />\n        </Wrapper>\n      );\n    }\n    if (f.type === 'text') {\n      return (\n        <Wrapper {...wrapperProps}>\n          <Text {...propsToSend} />\n        </Wrapper>\n      );\n    }\n    if (f.type === 'radio') {\n      return (\n        <Wrapper {...wrapperProps}>\n          <Radio {...propsToSend} />\n        </Wrapper>\n      );\n    }\n    if (f.type === 'meta') {\n      return (\n        <Wrapper\n          {...wrapperProps}\n          hasValue={f.metaOf.find(fi => this.props.filters.has(fi))}\n        >\n          <Meta\n            {...propsToSend}\n            replaceFiltersState={this.props.replaceFiltersState}\n            metaOf={f.metaOf}\n            activeFilters={this.props.filters}\n          />\n        </Wrapper>\n      );\n    }\n    if (f.type === 'text_comma') {\n      let { name, value, onChange } = propsToSend;\n      if (f.all) {\n        onChange = this.props.handleToggleAll;\n      }\n      if (f.all && this.props.filters.has(`all_${f.name}`)) {\n        name = `all_${f.name}`;\n        value = this.props.filters.get(name);\n      }\n\n      return (\n        <Wrapper\n          {...wrapperProps}\n          name={name}\n          hasValue={this.props.filters.has(name)}\n          description={this.props.active === f.name && f.description}\n        >\n          {name.endsWith('_teams') ? (\n            <MappingTeamMultiSelect\n              {...propsToSend}\n              name={name}\n              value={value}\n              onChange={onChange}\n              showAllToggle={f.all}\n              token={this.props.token}\n            />\n          ) : (\n            <MultiSelect\n              {...propsToSend}\n              name={name}\n              value={value}\n              onChange={onChange}\n              showAllToggle={f.all}\n              token={this.props.token}\n            />\n          )}\n        </Wrapper>\n      );\n    }\n    if (f.type === 'map') {\n      return (\n        <Wrapper\n          {...wrapperProps}\n          description={\n            this.props.active === f.name && (\n              <BBoxPicker\n                onChange={this.props.handleChange}\n                name={f.name}\n                value={this.props.filters.get(f.name)}\n              />\n            )\n          }\n        >\n          <Text {...propsToSend} />\n        </Wrapper>\n      );\n    }\n  };\n  render() {\n    return (\n      <div className=\"px30 flex-child filters-scroll\">\n        <h2 className=\"txt-xl mr6 txt-bold mt24   border-b border--gray-light border--1\">\n          Basic\n        </h2>\n        {filtersData\n          .slice(0, 5)\n          .map((f: Object, k) => this.renderFilters(f, k))}\n        <h2 className=\"txt-xl mr6 txt-bold mt30  border-b border--gray-light border--1\">\n          Flags\n        </h2>\n        {filtersData\n          .slice(5, 7)\n          .map((f: Object, k) => this.renderFilters(f, k))}\n        <span className=\"flex-child flex-child--grow wmin420 wmax435\" />\n\n        <h2 className=\"txt-xl mr6 txt-bold mt30  border-b border--gray-light border--1\">\n          Review\n        </h2>\n        {filtersData\n          .slice(7, 11)\n          .map((f: Object, k) => this.renderFilters(f, k))}\n        <span className=\"flex-child flex-child--grow wmin420 wmax435\" />\n\n        <h2 className=\"txt-xl mr6 txt-bold mt30  border-b border--gray-light border--1\">\n          Users & Teams\n        </h2>\n        {filtersData\n          .slice(11, 17)\n          .map((f: Object, k) => this.renderFilters(f, k))}\n        <span className=\"flex-child flex-child--grow wmin420 wmax435\" />\n\n        <h2 className=\"txt-xl mr6 txt-bold mt30  border-b border--gray-light border--1\">\n          Changeset Details\n        </h2>\n        {filtersData.slice(17).map((f: Object, k) => this.renderFilters(f, k))}\n        <span className=\"flex-child flex-child--grow wmin420 wmax435\" />\n      </div>\n    );\n  }\n}\nFiltersList = loadingEnhancer(FiltersList);\nexport { FiltersList };\n","import { isProd } from '../config';\nlet ReactGA;\n\nif (isProd) {\n  ReactGA = require('react-ga');\n}\n\nexport function gaPageView(page: string) {\n  if (ReactGA) {\n    ReactGA.pageview(page);\n  }\n}\n\nexport function gaSendEvent(obj: Object) {\n  if (ReactGA) {\n    ReactGA.event(obj);\n  }\n}\n","// @flow\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { push } from 'react-router-redux';\n\nimport { cancelablePromise } from '../../utils/promise';\nimport { fetchAllAOIs } from '../../network/aoi';\nimport { Button } from '../button';\nimport { Dropdown } from '../dropdown';\nimport { API_URL } from '../../config';\n\nclass SaveAOI extends React.PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      editing: false,\n      value: props.name\n    };\n  }\n  ref;\n  clicked = false;\n  onClick = event => {\n    this.clicked = true;\n    this.setState({ editing: true, value: this.props.name });\n  };\n  onChange = (event: any) => {\n    this.setState({ value: event.target.value });\n  };\n  onKeyDown = event => {\n    if (event.keyCode === 13) {\n      this.handleSubmit(event);\n    } else if (event.keyCode === 27) {\n      this.setState({\n        editing: false,\n        value: this.props.name\n      });\n      this.clicked = false;\n    }\n  };\n  handleSubmit = event => {\n    this.setState({\n      editing: false\n    });\n    const aoiList = this.props.aoiList.filter(\n      aoi => aoi.value === this.props.aoiId\n    );\n    if (this.props.aoiId && aoiList.length) {\n      this.props.updateAOI(this.props.aoiId, this.state.value);\n    } else {\n      this.props.createAOI(this.state.value);\n    }\n  };\n  // handleFocus = event => {\n  //   event.target.select();\n  // };\n  render() {\n    return (\n      <span>\n        {this.state.editing ? (\n          <span>\n            <input\n              ref={r => {\n                if (this.clicked) {\n                  r.select();\n                  this.clicked = false;\n                }\n              }}\n              value={this.state.value}\n              onChange={this.onChange}\n              onKeyDown={this.onKeyDown}\n            />\n            <Button onClick={this.handleSubmit} className=\"mx3\">\n              Confirm Save\n            </Button>\n          </span>\n        ) : (\n          <Button onClick={this.onClick} className=\"border--0 bg-transparent\">\n            Save\n          </Button>\n        )}\n      </span>\n    );\n  }\n}\n\ntype filterProps = {\n  createAOI: string => void,\n  updateAOI: string => void,\n  removeAOI: string => void,\n  loading: boolean,\n  search: string,\n  token?: string,\n  aoiName?: string,\n  aoiId?: string,\n  handleApply: () => void,\n  handleClear: () => void,\n  loadAoiId: string => void,\n  location: Object,\n  push: any => any\n};\n\nclass FiltersHeader extends React.Component<any, filterProps, any> {\n  getAoisPromise;\n  state = {\n    aoiList: []\n  };\n\n  componentDidMount() {\n    this.getAois();\n  }\n\n  componentWillUnmount() {\n    this.getAoisPromise && this.getAoisPromise.cancel();\n  }\n\n  getAois() {\n    if (this.props.token) {\n      this.getAoisPromise = cancelablePromise(fetchAllAOIs(this.props.token));\n      this.getAoisPromise.promise\n        .then(r => {\n          let aoiList = r.features.map(aoi => {\n            return { label: aoi.properties.name, value: aoi.id };\n          });\n          this.setState({ aoiList: aoiList });\n        })\n        .catch(e => console.log(e));\n    }\n  }\n\n  renderRssLink() {\n    if (this.props.aoiId) {\n      return (\n        <a\n          className=\"txt--s pl6\"\n          href={`${API_URL}/aoi/${this.props.aoiId}/changesets/feed/`}\n          title=\"RSS Feed\"\n        >\n          <svg className=\"icon icon--s mt-neg3 inline-block align-middle bg-gray-faint color-darken25 color-darken50-on-hover transition\">\n            <use xlinkHref=\"#icon-rss\" />\n          </svg>\n        </a>\n      );\n    }\n  }\n\n  renderAoiLink() {\n    if (this.props.aoiId) {\n      return (\n        <a\n          className=\"txt--s pl6 pointer\"\n          onClick={e =>\n            navigator.clipboard.writeText(\n              `${API_URL.replace('/api/v1', '')}/?aoi=${this.props.aoiId}`\n            )\n          }\n          title=\"Copy filter URL\"\n        >\n          <svg className=\"icon icon--s mt-neg3 inline-block align-middle bg-gray-faint color-darken25 color-darken50-on-hover transition\">\n            <use xlinkHref=\"#icon-link\" />\n          </svg>\n        </a>\n      );\n    }\n  }\n\n  onAoiSelect = (arr: Array<Object>) => {\n    if (arr.length === 1) {\n      this.props.push({\n        ...this.props.location,\n        search: `aoi=${arr[0].value}`,\n        path: '/filters'\n      });\n    } else if (arr.length > 1) {\n      throw new Error('filter select array is big');\n    }\n  };\n\n  renderFilterInfo() {\n    const dropdown = (\n      <Dropdown\n        display={'My Filters'}\n        options={this.state.aoiList}\n        onChange={this.onAoiSelect}\n        value={[]}\n        onAdd={() => {}}\n        onRemove={() => {}}\n      />\n    );\n    if (this.props.token && this.state.aoiList.length) {\n      return <span>{dropdown}</span>;\n    }\n  }\n\n  render() {\n    var save_aoi = '';\n    if (this.props.token) {\n      save_aoi = (\n        <SaveAOI\n          name={this.props.aoiName}\n          aoiId={this.props.aoiId}\n          aoiList={this.state.aoiList}\n          createAOI={this.props.createAOI}\n          updateAOI={this.props.updateAOI}\n        />\n      );\n    }\n\n    return (\n      <header className=\"h55 hmin55 flex-parent px30 bg-gray-faint flex-parent--center-cross justify--space-between color-gray border-b border--gray-light border--1\">\n        <span className=\"txt-s color-gray--dark\">\n          {this.renderFilterInfo()}\n        </span>\n        <span className=\"txt-l txt-bold color-gray--dark\">\n          <span>\n            Filters\n            {this.props.aoiId && <span> / {this.props.aoiName}</span>}\n            {this.renderAoiLink()}\n            {this.renderRssLink()}\n          </span>\n        </span>\n        <span className=\"txt-l color-gray--dark\">\n          {save_aoi}\n          <Button\n            className=\"border--0 bg-transparent\"\n            onClick={this.props.handleClear}\n          >\n            Reset\n          </Button>\n          <Button onClick={this.props.handleApply} className=\"mx3\">\n            Apply\n          </Button>\n          <Link\n            to={{ search: this.props.search, pathname: '/' }}\n            className=\"mx3 pointer\"\n          >\n            <svg className=\"icon icon--m inline-block align-middle bg-gray-faint color-darken25 color-darken50-on-hover transition\">\n              <use xlinkHref=\"#icon-close\" />\n            </svg>\n          </Link>\n        </span>\n      </header>\n    );\n  }\n}\n\nFiltersHeader = connect(\n  (state: RootStateType, props) => ({\n    location: props.location\n  }),\n  {\n    push\n  }\n)(FiltersHeader);\n\nexport { FiltersHeader };\n","// @flow\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { push } from 'react-router-redux';\n\nimport { Map, List, fromJS, is } from 'immutable';\n\nimport { checkForNewChangesets } from '../store/changesets_page_actions';\nimport { applyFilters } from '../store/filters_actions';\nimport { applyUpdateAOI, applyCreateAOI } from '../store/aoi_actions';\nimport { modal } from '../store/modal_actions';\n\nimport { FiltersList } from '../components/filters/filters_list';\nimport { FiltersHeader } from '../components/filters/filters_header';\n\nimport { deleteAOI } from '../network/aoi';\nimport type { RootStateType } from '../store';\nimport { delayPromise } from '../utils/promise';\nimport { gaSendEvent } from '../utils/analytics';\n\nimport type { filterType, filtersType } from '../components/filters';\nconst NEW_AOI = 'unnamed *';\n\ntype propsType = {|\n  filters: filtersType,\n  loading: boolean,\n  aoi: Object,\n  token: string,\n  location: Object,\n  features: ?List<Map<string, any>>,\n  checkForNewChangesets: boolean => any,\n  push: (location: Object) => void,\n  applyFilters: (filtersType, path?: string) => mixed, // base 0\n  applyCreateAOI: (name?: string, filtersType) => mixed,\n  applyUpdateAOI: (aoiId?: string, name?: string, filtersType) => mixed,\n  modal: any => any\n|};\n\ntype stateType = {\n  filters: filtersType,\n  active: string\n};\nconst noDateGte: filterType = fromJS({\n  date__gte: [{ label: '', value: '' }]\n});\n\nclass Filters extends React.PureComponent<void, propsType, stateType> {\n  state = {\n    filters: this.props.filters,\n    active: ''\n    // aoiName: this.props.aoi.getIn(['properties', 'name'], NEW_AOI)\n  };\n  componentWillReceiveProps(nextProps: propsType) {\n    if (!is(this.props.filters, nextProps.filters)) {\n      this.setState({\n        filters: nextProps.filters\n      });\n    }\n  }\n  handleFocus = (name: string) => {\n    this.setState({\n      active: name\n    });\n  };\n  handleApply = () => {\n    // in case the user clicks on apply when filter\n    // loaded AOI.\n    if (JSON.stringify(this.state.filters.toJSON()).length > 7000) {\n      this.props.modal({\n        kind: 'error',\n        title: 'Use Save Filter',\n        description:\n          'Your filter is too big to be applied. You need to Save your Filter to be able to see the results.'\n      });\n    } else {\n      if (is(this.state.filters, this.props.filters)) {\n        this.props.push({\n          ...this.props.location,\n          pathname: '/'\n        });\n        return;\n      }\n      this.props.applyFilters(this.state.filters, '/');\n      this.sendToAnalytics();\n      // show user if there were any new changesets\n      // incase service had cached the request\n      delayPromise(3000).promise.then(() =>\n        this.props.checkForNewChangesets(true)\n      );\n    }\n  };\n  sendToAnalytics = () => {\n    const filters = this.state.filters;\n    filters.forEach((v, k) => {\n      v.forEach(vv => {\n        gaSendEvent({\n          category: 'Filters',\n          action: k,\n          label: vv.get('label')\n        });\n      });\n    });\n  };\n  handleChange = (name: string, values?: filterType) => {\n    let filters = this.state.filters;\n    // if someone cleared date__gte filter\n    // we use the convention defined at `noDateGte`\n    // to signify no default gte.\n    if (name === 'date__gte' && values == null) {\n      filters = filters.merge(noDateGte);\n    } else if (values == null) {\n      // clear this filter\n      filters = filters.delete(name);\n    } else {\n      filters = filters.set(name, values);\n    }\n    return this.setState({\n      filters\n    });\n  };\n  handleToggleAll = (name: string, values?: filterType) => {\n    let filters = this.state.filters;\n    const isAll = name.slice(0, 4) === 'all_';\n    //  delete the opposite value\n    if (isAll) {\n      filters = filters.delete(name.slice(4));\n    } else {\n      filters = filters.delete('all_' + name);\n    }\n    // regularly handle change\n    if (!values) {\n      filters = filters.delete(name);\n    } else {\n      filters = filters.set(name, values);\n    }\n    return this.setState({ filters });\n  };\n  replaceFiltersState = filters => {\n    this.setState({ filters });\n  };\n  handleClear = () => {\n    this.props.applyFilters(new Map(), '/');\n  };\n  loadAoiId = (aoiId: string) => {\n    this.props.push({\n      ...this.props.location,\n      search: `aoi=${aoiId}`\n    });\n  };\n  getAOIName = () => {\n    if (this.props.loading) return '';\n    return this.props.aoi.getIn(['properties', 'name'], NEW_AOI);\n  };\n  getAOIId = (aoiId: string) => {\n    if (this.props.loading) return '';\n    return this.props.aoi.get('id');\n  };\n  removeAOI = (aoiId: string) => {\n    if (aoiId === this.props.aoi.get('id')) {\n      this.handleClear();\n    }\n    deleteAOI(this.props.token, aoiId).catch(e => console.error(e));\n  };\n  createAOI = (name: string) => {\n    this.props.applyCreateAOI(name, this.state.filters);\n  };\n  updateAOI = (aoiId: string, name: string) => {\n    this.props.applyUpdateAOI(aoiId, name, this.state.filters);\n  };\n  render() {\n    const width = window.innerWidth;\n    return (\n      <div\n        className={`flex-parent flex-parent--column changesets-filters bg-white ${\n          width < 800 ? 'viewport-full' : ''\n        }`}\n      >\n        <FiltersHeader\n          createAOI={this.createAOI}\n          updateAOI={this.updateAOI}\n          removeAOI={this.removeAOI}\n          loading={this.props.loading}\n          token={this.props.token}\n          aoiName={this.getAOIName()}\n          aoiId={this.props.loading ? '' : this.props.aoi.get('id')}\n          loadAoiId={this.loadAoiId}\n          handleApply={this.handleApply}\n          handleClear={this.handleClear}\n          search={this.props.location.search}\n        />\n        <FiltersList\n          loading={this.props.loading}\n          filters={this.state.filters}\n          active={this.state.active}\n          handleFocus={this.handleFocus}\n          handleChange={this.handleChange}\n          handleToggleAll={this.handleToggleAll}\n          replaceFiltersState={this.replaceFiltersState}\n          token={this.props.token}\n        />\n      </div>\n    );\n  }\n}\n\nFilters = connect(\n  (state: RootStateType, props) => ({\n    filters: state.filters.get('filters'),\n    aoi: state.aoi.get('aoi'),\n    loading: state.filters.get('loading'),\n    features: state.changesetsPage.getIn(['currentPage', 'features']),\n    location: props.location,\n    token: state.auth.get('token')\n  }),\n  {\n    checkForNewChangesets,\n    applyFilters,\n    applyCreateAOI,\n    applyUpdateAOI,\n    push,\n    modal\n  }\n)(Filters);\n\nexport { Filters };\n","// @flow\nimport React from 'react';\nimport { CreateDeleteModify } from '../create_delete_modify';\n\nimport thumbsUp from '../../assets/thumbs-up.svg';\nimport thumbsDown from '../../assets/thumbs-down.svg';\n\nexport function SecondaryLine({ changesetId, date, properties }: Object) {\n  return (\n    <span className=\"flex-parent flex-parent--row justify--space-between txt-light txt-s color-gray\">\n      <span>\n        <span className=\"mr6\">{changesetId}</span>\n        {properties.get('checked') ? (\n          <span>\n            {properties.get('harmful') ? (\n              <img\n                src={thumbsDown}\n                alt=\"Marked as bad\"\n                className=\"icon inline-block\"\n              />\n            ) : (\n              <img\n                src={thumbsUp}\n                alt=\"Marked as good\"\n                className=\"icon inline-block\"\n              />\n            )}\n            {properties.get('check_user') && (\n              <span className=\"pl6\">{`by ${properties.get(\n                'check_user'\n              )}`}</span>\n            )}\n          </span>\n        ) : null}\n      </span>\n      <span className=\"flex-parent flex-parent--row\">\n        <CreateDeleteModify\n          showZero\n          className=\"mr3\"\n          create={properties.get('create')}\n          modify={properties.get('modify')}\n          delete={properties.get('delete')}\n        />\n      </span>\n    </span>\n  );\n}\n//  <svg className=\"icon inline-block align-middle \"> //       <use xlinkHref=\"#icon-options\" /> //     </svg>\n","// @flow\nimport React from 'react';\nimport { Reasons } from '../reasons';\n\nexport function PrimaryLine({ reasons, comment, tags }: Object) {\n  return (\n    <span className=\"flex-parent flex-parent--column\">\n      <p className=\"flex-child truncate-3-lines my6 txt-break-url\">\n        {comment}\n      </p>\n      <Reasons reasons={reasons} color=\"blue\" />\n      <Reasons reasons={tags} color=\"red\" />\n    </span>\n  );\n}\n","// @flow\nimport React from 'react';\nimport moment from 'moment';\n\nexport function Title({ properties, wasOpen, date }: Object) {\n  return (\n    <div>\n      <span className=\"flex-parent flex-parent--row justify--space-between align-items--center\">\n        <strong className={'txt-m mt3 mr6'}>\n          {properties.get('user') || <i>OSM User</i>}\n        </strong>\n        <span className=\"txt-s mr3\">&nbsp;{moment(date).fromNow()}</span>\n      </span>\n    </div>\n  );\n}\n","// @flow\nimport React from 'react';\nimport { Link } from 'react-router-dom';\nimport { Map } from 'immutable';\n\nimport { SecondaryLine } from './secondary_line';\nimport { PrimaryLine } from './primary_line';\nimport { Title } from './title';\n\nexport class Row extends React.PureComponent {\n  props: {\n    properties: Map<string, *>,\n    active: ?boolean,\n    changesetId: number,\n    inputRef: ?(any) => any\n  };\n  shouldComponentUpdate(nextProps: Object) {\n    return (\n      nextProps.properties !== this.props.properties ||\n      this.props.active ||\n      nextProps.active\n    );\n  }\n  wasOpen = false;\n  render() {\n    const { properties, changesetId, active, inputRef, ...other } = this.props;\n    if (!this.wasOpen) {\n      // way to show read/unread state without\n      // performance compromise. The moment component\n      // gets active we set wasOpen to true and never\n      // toggle it back to any other state.\n      this.wasOpen = this.props.active;\n    }\n\n    let borderClass = 'border-l border-l--4 border-color-neutral';\n    if (properties.get('harmful') === true)\n      borderClass = 'border-l border-l--4 border-color-bad';\n    if (properties.get('harmful') === false)\n      borderClass = 'border-l border-l--4 border-color-good';\n\n    let backgroundClass = '';\n\n    backgroundClass += active\n      ? 'light-blue'\n      : this.wasOpen ? ' bg-darken5 ' : '';\n    return (\n      <Link\n        to={{\n          search: window.location.search,\n          pathname: `/changesets/${changesetId}`\n        }}\n      >\n        <div className={`${backgroundClass} ${borderClass}`} ref={inputRef}>\n          <div\n            {...other}\n            className={\n              'p12 cursor-pointer flex-parent flex-parent--column border-b border-b--1 border--gray-light'\n            }\n          >\n            <div className=\"flex-parent flex-parent--column\">\n              <div>\n                <Title\n                  properties={properties}\n                  wasOpen={this.wasOpen}\n                  date={properties.get('date')}\n                />\n              </div>\n              <div>\n                <PrimaryLine\n                  reasons={properties.get('reasons')}\n                  tags={properties.get('tags')}\n                  comment={properties.get('comment')}\n                />\n              </div>\n              <div>\n                <SecondaryLine\n                  changesetId={changesetId}\n                  properties={properties}\n                  date={properties.get('date')}\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n      </Link>\n    );\n  }\n}\n","// @flow\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { Map } from 'immutable';\nimport { Row } from './row';\nimport { SignInButton } from '../changeset/sign_in_button.js';\nimport { elementInViewport } from '../../utils/element_in_view';\nimport { loadingEnhancer } from '../loading_enhancer';\n\ntype propTypes = {\n  currentPage: ?Map<string, *>,\n  activeChangesetId: ?number,\n  pageIndex: number\n};\n\nclass List extends React.PureComponent<void, propTypes, *> {\n  shouldComponentUpdate(nextProps: propTypes) {\n    return (\n      nextProps.activeChangesetId !== this.props.activeChangesetId ||\n      nextProps.currentPage !== this.props.currentPage\n    );\n  }\n  handleScroll = (r: HTMLElement) => {\n    if (!r) return;\n    if (!elementInViewport(r)) {\n      r.scrollIntoView({ block: 'end', behavior: 'smooth' });\n    }\n  };\n  render() {\n    if (\n      !this.props.token &&\n      ['/about', '/filters', '/user', '/'].includes(this.props.location)\n    ) {\n      return (\n        <div className=\"flex-parent flex-parent--column scroll-styled flex-child--grow py36\">\n          <div className=\"flex-parent flex-parent--column flex-parent--center-cross\">\n            <svg className=\"icon h60 w60 inline-block align-middle pb3\">\n              <use xlinkHref=\"#icon-osm\" />\n            </svg>\n          </div>\n          <div className=\"flex-parent flex-parent--center-main align-center txt-l pt36\">\n            <SignInButton text=\"Sign in with your OpenStreetMap account\" />\n          </div>\n        </div>\n      );\n    }\n    return (\n      <ul className=\"flex-parent flex-parent--column scroll-styled flex-child--grow\">\n        <div>\n          {this.props.currentPage &&\n            this.props.currentPage.get('features').map((f, k) => (\n              <Row\n                active={f.get('id') === this.props.activeChangesetId}\n                properties={f.get('properties')}\n                changesetId={f.get('id')}\n                inputRef={\n                  f.get('id') === this.props.activeChangesetId // only saves the ref of currently active changesetId\n                    ? this.handleScroll\n                    : null\n                }\n                key={k}\n              />\n            ))}\n        </div>\n      </ul>\n    );\n  }\n}\n\nList = loadingEnhancer(List);\nList = connect((state: RootStateType, props) => ({\n  token: state.auth.get('token')\n}))(List);\n\nexport { List };\n","// @flow\nexport function elementInViewport(element: HTMLElement) {\n  var rect = element.getBoundingClientRect();\n  return (\n    rect.top >= 0 &&\n    rect.left >= 0 &&\n    rect.bottom <= window.innerHeight &&\n    rect.right <= window.innerWidth\n  );\n}\n","// @flow\nimport React from 'react';\n\nexport class PageRange extends React.PureComponent {\n  render() {\n    return (\n      <button\n        onClick={this._onClick}\n        disabled={this.props.disabled}\n        className={`flex-child btn btn--s color-gray round bg-gray-faint bg-darken10-on-active bg-darken5-on-hover\n          ${this.props.active && 'is-active '}\n          `}\n      >\n        {typeof this.props.page === 'number'\n          ? this.props.page + 1\n          : <svg className=\"icon icon--s inline-block align-middle \">\n              <use xlinkHref={`#icon-${this.props.page}`} />\n            </svg>}\n      </button>\n    );\n  }\n  _onClick = () => {\n    this.props.getChangesetsPage(this.props.pageIndex);\n  };\n}\n","// @flow\nimport React from 'react';\nimport { Range } from 'immutable';\n\nimport { PageRange } from './page_range';\nimport { PAGE_SIZE } from '../../config/constants';\n\nconst RANGE = 6;\n\nfunction range(start, end) {\n  return Range(start, end).map((k, i) => i + start);\n}\n\nexport function Footer({\n  pageIndex,\n  getChangesetsPage,\n  count\n}: {\n  pageIndex: number,\n  getChangesetsPage: (number, ?boolean) => mixed,\n  count: ?number\n}) {\n  const base = parseInt(pageIndex / RANGE, 10) * RANGE;\n  let maxPageCount = 0;\n  if (count && !Number.isNaN(count)) {\n    maxPageCount = Math.ceil(count / PAGE_SIZE);\n  }\n  return (\n    <footer className=\"hmin55 p12 border-t border--gray-light bg-gray-faint txt-s flex-parent justify--space-around\">\n      <PageRange\n        page={'arrow-left'}\n        pageIndex={pageIndex - 1}\n        disabled={pageIndex - 1 === -1}\n        active={false}\n        getChangesetsPage={getChangesetsPage}\n      />\n      {range(base, Math.min(base + RANGE, maxPageCount)).map(n =>\n        <PageRange\n          key={n}\n          page={n}\n          pageIndex={n}\n          active={n === pageIndex}\n          getChangesetsPage={getChangesetsPage}\n        />\n      )}\n      <PageRange\n        page={'arrow-right'}\n        disabled={pageIndex + 1 >= maxPageCount}\n        pageIndex={pageIndex + 1}\n        active={false}\n        getChangesetsPage={getChangesetsPage}\n      />\n    </footer>\n  );\n}\n","// @flow\nimport React from 'react';\nimport { NavLink } from 'react-router-dom';\nimport { Dropdown } from '../dropdown';\nimport { Button } from '../button';\nimport numberWithCommas from '../../utils/number_with_commas.js';\nimport filtersConfig from '../../config/filters.json';\n\nexport function Header({\n  filters,\n  handleFilterOrderBy,\n  location,\n  diffLoading,\n  diff,\n  currentPage,\n  reloadCurrentPage\n}: Object) {\n  const valueData = [];\n  const options = filtersConfig.filter(f => f.name === 'order_by')[0].options;\n  if (filters.get('order_by')) {\n    options.forEach(o => {\n      if (filters.getIn(['order_by', 0, 'value']) === o.value) {\n        valueData.push(o);\n      }\n    });\n  }\n  return (\n    <div>\n      <header className=\"px12 hmin36 border-b border--gray-light bg-gray-faint txt-s flex-parent justify--space-between align-items--center\">\n        <Dropdown\n          onAdd={() => {}}\n          onRemove={() => {}}\n          onChange={handleFilterOrderBy}\n          value={valueData}\n          options={filtersConfig.filter(f => f.name === 'order_by')[0].options}\n          display={(valueData[0] && valueData[0].label) || 'Order by'}\n        />\n        <NavLink\n          activeStyle={{\n            fontWeight: 'bold'\n          }}\n          to={{\n            search: location.search,\n            pathname:\n              location.pathname.indexOf('/filters') > -1 ? '/' : '/filters'\n          }}\n        >\n          <Button className=\"mx3\">\n            Filters {filters.size > 0 && `(${filters.size})`}\n          </Button>\n        </NavLink>\n      </header>\n      <header\n        className={`px12 border-l border-b border-b--1 border--gray-light px12 py6 ${\n          diff > 0 ? 'bg-darken10' : 'bg-gray-faint'\n        } flex-child align-items--center`}\n      >\n        <span className=\"flex-parent flex-parent--row justify--space-between color-gray txt-s txt-bold\">\n          <span>\n            {(currentPage &&\n              numberWithCommas(currentPage.getIn(['count'], 0))) ||\n              0}{' '}\n            changesets.\n          </span>\n          <span className=\"flex-parent flex-parent--row\">\n            {diffLoading ? (\n              <span className=\"loading loading--s inline\" />\n            ) : (\n              <Button\n                className=\"mx3 btn--xs\"\n                iconName=\"rotate\"\n                onClick={reloadCurrentPage}\n              >\n                {diff > 0 ? `${diff} new` : ''}\n              </Button>\n            )}\n          </span>\n        </span>\n      </header>\n    </div>\n  );\n}\n","//@flow\n\nexport default function numberWithCommas(num: number): string {\n  return num.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\n}\n","// @flow\nimport React from 'react';\nimport { API_URL } from '../../config';\nimport { Map } from 'immutable';\nimport { Dropdown } from '../dropdown';\nimport { cancelablePromise } from '../../utils/promise';\n\n// TOFIX Needs cleanup.\n\nlet cacheTagsData;\nexport class Tags extends React.PureComponent {\n  props: {\n    changesetId: number,\n    disabled: boolean,\n    currentChangeset: Map<string, *>,\n    handleChangesetModifyTag: (number, Map<string, *>, Object, boolean) => mixed\n  };\n  state: {\n    options: Array<any>,\n    allTags: Array<any>\n  };\n  state = {\n    allTags: {},\n    options: []\n  };\n  tagsData = cacheTagsData;\n  componentDidMount() {\n    this.getAsyncOptions();\n  }\n  getAsyncOptions = () => {\n    if (!this.tagsData) {\n      this.tagsData = cancelablePromise(\n        fetch(`${API_URL}/tags/`).then(response => {\n          return response.json();\n        })\n      );\n    }\n    return this.tagsData.promise\n      .then(json => {\n        let data = {};\n        let selectData = json.filter(d => d.is_visible && d.for_changeset);\n\n        selectData.forEach(d => {\n          data[d.name] = { ...d, value: d.id, label: d.name };\n        });\n        this.setState({\n          allTags: data,\n          options: selectData.map(d => ({ label: d.name, value: d.id }))\n        });\n      })\n      .catch(e => {});\n  };\n  componentWillUnmount() {\n    if (this.tagsData) {\n      cacheTagsData = this.tagsData;\n      this.tagsData.cancel();\n    }\n  }\n  onAdd = (obj: Object) => {\n    if (!obj) return;\n    const {\n      changesetId,\n      currentChangeset,\n      handleChangesetModifyTag\n    } = this.props;\n    handleChangesetModifyTag(changesetId, currentChangeset, obj, false);\n  };\n  onRemove = (obj: Object) => {\n    if (!obj) return;\n    const {\n      changesetId,\n      currentChangeset,\n      handleChangesetModifyTag\n    } = this.props;\n    handleChangesetModifyTag(changesetId, currentChangeset, obj, true);\n  };\n  defaultValue = new Map();\n  render() {\n    if (!this.props.currentChangeset) return null;\n\n    const value = this.props.currentChangeset\n      .getIn(['properties', 'tags'], this.defaultValue)\n      .toJS()\n      .map(t => ({\n        value: t.id,\n        label: t.name\n      }));\n\n    if (this.state.options) {\n      return (\n        <Dropdown\n          eventTypes={['click', 'touchend']}\n          multi\n          onAdd={this.onAdd}\n          onRemove={this.onRemove}\n          disabled={this.props.disabled}\n          className={`${this.props.disabled ? 'cursor-notallowed' : ''}`}\n          value={value}\n          options={this.state.options}\n          onChange={() => {}}\n          display={`Tags${value.length > 0 ? ` (${value.length})` : ''}`}\n        />\n      );\n    } else {\n      return null;\n    }\n  }\n}\n","// @flow\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { is, List as ImmutableList, Map, fromJS } from 'immutable';\nimport { push } from 'react-router-redux';\nimport type { RootStateType } from '../store';\n\nimport {\n  getChangesetsPage,\n  checkForNewChangesets\n} from '../store/changesets_page_actions';\n\nimport { applyFilters } from '../store/filters_actions';\n\nimport { List } from '../components/list';\nimport { Footer } from '../components/list/footer';\nimport { Header } from '../components/list/header';\nimport { keyboardToggleEnhancer } from '../components/keyboard_enhancer';\nimport {\n  NEXT_CHANGESET,\n  PREV_CHANGESET,\n  FILTER_BINDING,\n  HELP_BINDING,\n  REFRESH_CHANGESETS\n} from '../config/bindings';\n\ntype propsType = {\n  location: Object,\n  loading: boolean,\n  error: Object,\n  currentPage: ?Map<string, *>,\n  diff: number,\n  diffLoading: boolean,\n  pageIndex: number,\n  activeChangesetId: ?number,\n  filters: Map<string, ImmutableList<*>>,\n  aoiId: ?string,\n  lastKeyStroke: Map<string, *>,\n  getChangesetsPage: (number, ?boolean) => mixed, // base 0\n  checkForNewChangesets: boolean => any,\n  push: Object => mixed,\n  applyFilters: (Map<string, ImmutableList<*>>) => mixed // base 0\n};\n\nclass ChangesetsList extends React.PureComponent<void, propsType, *> {\n  checkUpdate = null;\n  maxPageCount = Infinity;\n\n  // constructor(props: propsType) {\n  //   super(props);\n  //   this.props.getChangesetsPage(props.pageIndex);\n  //   this.checkUpdate = delayPromise(2000);\n  //   this.checkUpdate.promise.then(() => this.props.checkForNewChangesets(true));\n  // }\n  componentWillUnmount() {\n    this.checkUpdate && this.checkUpdate.cancel();\n  }\n  goUpDownToChangeset = (direction: number) => {\n    if (!this.props.currentPage) return;\n    let features = this.props.currentPage.get('features');\n    if (features) {\n      let index = features.findIndex(\n        f => f.get('id') === this.props.activeChangesetId\n      );\n      index += direction;\n      const nextFeature = features.get(index);\n      if (nextFeature) {\n        const location = {\n          ...this.props.location, //  clone it\n          pathname: `/changesets/${nextFeature.get('id')}`\n        };\n        this.props.push(location);\n      }\n    }\n  };\n  toggleFilters() {\n    if (this.props.location && this.props.location.pathname === '/filters') {\n      const location = {\n        ...this.props.location, //  clone it\n        pathname: '/'\n      };\n      this.props.push(location);\n    } else {\n      const location = {\n        ...this.props.location, //  clone it\n        pathname: '/filters'\n      };\n      this.props.push(location);\n    }\n  }\n  toggleHelp() {\n    if (\n      this.props.location &&\n      this.props.location.pathname.startsWith('/about')\n    ) {\n      const location = {\n        ...this.props.location, //  clone it\n        pathname: '/'\n      };\n      this.props.push(location);\n    } else {\n      console.log(...this.props.location);\n      const location = {\n        ...this.props.location, //  clone it\n        pathname: '/about'\n      };\n      this.props.push(location);\n    }\n  }\n  componentWillReceiveProps(nextProps: propsType) {\n    const lastKeyStroke: Map<string, *> = nextProps.lastKeyStroke;\n    if (is(this.props.lastKeyStroke, lastKeyStroke)) return;\n    switch (lastKeyStroke.keySeq().first()) {\n      case FILTER_BINDING.label: {\n        this.toggleFilters();\n        break;\n      }\n      case HELP_BINDING.label: {\n        this.toggleHelp();\n        break;\n      }\n      case NEXT_CHANGESET.label: {\n        this.goUpDownToChangeset(1);\n        break;\n      }\n      case PREV_CHANGESET.label: {\n        this.goUpDownToChangeset(-1);\n        break;\n      }\n      case REFRESH_CHANGESETS.label: {\n        this.reloadCurrentPage();\n        break;\n      }\n      default: {\n        return;\n      }\n    }\n  }\n\n  handleFilterOrderBy = (selected: Array<*>) => {\n    let mergedFilters;\n    mergedFilters = this.props.filters.set('order_by', fromJS(selected));\n    this.props.applyFilters(mergedFilters);\n  };\n\n  reloadCurrentPage = () => {\n    this.props.getChangesetsPage(this.props.pageIndex, true);\n  };\n\n  render() {\n    const {\n      filters,\n      currentPage,\n      loading,\n      location,\n      diff,\n      diffLoading,\n      activeChangesetId,\n      pageIndex,\n      getChangesetsPage\n    } = this.props;\n    return (\n      <div className=\"flex-parent flex-parent--column changesets-list\">\n        <Header\n          filters={filters}\n          handleFilterOrderBy={this.handleFilterOrderBy}\n          location={location}\n          currentPage={currentPage}\n          diff={diff}\n          diffLoading={diffLoading}\n          reloadCurrentPage={this.reloadCurrentPage}\n        />\n        <List\n          activeChangesetId={activeChangesetId}\n          loading={loading}\n          currentPage={currentPage}\n          pageIndex={pageIndex}\n          location={location.pathname ? location.pathname : null}\n        />\n        <Footer\n          pageIndex={pageIndex}\n          getChangesetsPage={getChangesetsPage}\n          count={currentPage && currentPage.get('count')}\n        />\n      </div>\n    );\n  }\n}\n\nChangesetsList = keyboardToggleEnhancer(\n  false,\n  [\n    NEXT_CHANGESET,\n    PREV_CHANGESET,\n    FILTER_BINDING,\n    HELP_BINDING,\n    REFRESH_CHANGESETS\n  ],\n  ChangesetsList\n);\n\nChangesetsList = connect(\n  (state: RootStateType, props) => ({\n    location: state.routing.location,\n    loading: state.changesetsPage.get('loading'),\n    error: state.changesetsPage.get('error'),\n    currentPage: state.changesetsPage.get('currentPage'),\n    diff: state.changesetsPage.get('diff'),\n    diffLoading: state.changesetsPage.get('diffLoading'),\n    pageIndex: state.changesetsPage.get('pageIndex') || 0,\n    activeChangesetId: state.changeset.get('changesetId'),\n    filters: state.filters.get('filters'),\n    aoiId: state.aoi.get('aoi').get('id')\n  }),\n  {\n    // actions\n    getChangesetsPage,\n    checkForNewChangesets,\n    applyFilters,\n    push\n  }\n)(ChangesetsList);\nexport { ChangesetsList };\n","import React from 'react';\n\nexport function Navbar({ title, className, buttons }) {\n  return (\n    <div\n      className={`h55 hmin55 flex-parent px12 py6 bg-gray-dark flex-parent--center-cross justify--space-between ${className}`}\n    >\n      <span className=\"flex-child flex-child--grow\">\n        {title || ''}\n      </span>\n      <span className=\"flex-child\">\n        {buttons}\n      </span>\n    </div>\n  );\n}\n","import React from 'react';\nimport { Dropdown } from '../dropdown';\nimport thumbsUp from '../../assets/thumbs-up.svg';\nimport thumbsDown from '../../assets/thumbs-down.svg';\n\nexport function Verify({\n  changeset,\n  options,\n  className,\n  onChange,\n  value,\n  onClear,\n  username,\n  checkUser\n}) {\n  if (changeset.getIn(['properties', 'checked'])) {\n    const isHarmful = changeset.getIn(['properties', 'harmful']);\n    return (\n      <div className=\"flex-parent-inline\">\n        <span\n          className={`btn btn--s border border--1 round color-gray transition pl12 pr6 ${\n            isHarmful\n              ? 'bg-lighten50 border--red-light'\n              : 'bg-lighten50 border--green-light'\n          }`}\n        >\n          <span>\n            <img\n              src={isHarmful ? thumbsDown : thumbsUp}\n              alt={`Marked as ${isHarmful ? 'bad' : 'good'}`}\n              className=\"icon inline-block mt3 w14 h14\"\n            />\n            {checkUser ? (\n              <span className=\"ml6 mt3\">{checkUser}</span>\n            ) : (\n              <span className=\"ml6 txt-em\">Verified</span>\n            )}\n          </span>\n          <svg\n            onClick={onClear}\n            className=\"icon inline-block align-middle pl3 pb3 w18 h18 pointer color-gray\"\n          >\n            <use xlinkHref=\"#icon-close\" />\n          </svg>\n        </span>\n      </div>\n    );\n  }\n  return (\n    <div className=\"select-container\">\n      <Dropdown\n        eventTypes={['click', 'touchend']}\n        value={[]}\n        onAdd={() => {}}\n        onRemove={() => {}}\n        options={options}\n        onChange={onChange}\n        display=\"Verify\"\n      />\n    </div>\n  );\n}\n","import React from 'react';\nimport { Dropdown } from '../dropdown';\n\nexport function OpenIn({ changesetId, coordinates, className }) {\n  return (\n    <div className={`select-container ${className}`}>\n      <Dropdown\n        onAdd={() => {}}\n        onRemove={() => {}}\n        value={[]}\n        options={[\n          {\n            label: 'JOSM',\n            value: 'JOSM',\n            href: `http://127.0.0.1:8111/import?url=https://www.openstreetmap.org/api/0.6/changeset/${changesetId}/download`\n          },\n          {\n            label: 'iD',\n            value: 'iD',\n            href: `https://www.openstreetmap.org/edit?editor=id&changeset=${changesetId}#map=15/${coordinates &&\n              coordinates.get('1')}/${coordinates && coordinates.get('0')}`\n          },\n          {\n            label: 'OSM',\n            value: 'OSM',\n            href: `https://www.openstreetmap.org/changeset/${changesetId}`\n          },\n\n          {\n            label: 'Achavi',\n            value: 'Achavi',\n            href: `https://overpass-api.de/achavi/?changeset=${changesetId}&relations=true`\n          },\n          {\n            label: 'Level 0',\n            value: 'Level 0',\n            href: `http://level0.osmz.ru/?url=changeset/${changesetId}`\n          }\n        ]}\n        display=\"Open with\"\n      />\n    </div>\n  );\n}\n","// @flow\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { is, Map } from 'immutable';\n\nimport { keyboardToggleEnhancer } from '../components/keyboard_enhancer';\nimport { Tags } from '../components/changeset/tags';\nimport { Link } from 'react-router-dom';\nimport { Navbar } from '../components/navbar';\nimport { Verify } from '../components/changeset/verify';\nimport { OpenIn } from '../components/changeset/open_in';\n\nimport {\n  VERIFY_BAD,\n  VERIFY_GOOD,\n  VERIFY_CLEAR,\n  OPEN_IN_JOSM,\n  OPEN_IN_ID,\n  OPEN_IN_OSM,\n  OPEN_IN_LEVEL0,\n  OPEN_IN_ACHAVI,\n  OPEN_IN_HDYC\n} from '../config/bindings';\nimport { API_URL } from '../config/index';\n\nimport {\n  handleChangesetModifyTag,\n  handleChangesetModifyHarmful\n} from '../store/changeset_actions';\nimport type { RootStateType } from '../store';\n\ntype propsType = {\n  changesetId: number,\n  location: Object,\n  currentChangeset: Map<string, *>,\n  username: ?string,\n  lastKeyStroke: Map<string, *>,\n  handleChangesetModifyTag: (number, Map<string, *>, Object, boolean) => mixed,\n  handleChangesetModifyHarmful: (number, Map<string, *>, boolean | -1) => mixed\n};\nclass NavbarChangeset extends React.PureComponent<void, propsType, *> {\n  componentWillReceiveProps(nextProps: propsType) {\n    if (!this.props.currentChangeset) return;\n    const lastKeyStroke: Map<string, *> = nextProps.lastKeyStroke;\n    if (is(this.props.lastKeyStroke, lastKeyStroke)) return;\n    switch (lastKeyStroke.keySeq().first()) {\n      case VERIFY_BAD.label: {\n        this.props.handleChangesetModifyHarmful(\n          this.props.changesetId,\n          this.props.currentChangeset,\n          true\n        );\n        break;\n      }\n      case VERIFY_CLEAR.label: {\n        this.props.handleChangesetModifyHarmful(\n          this.props.changesetId,\n          this.props.currentChangeset,\n          -1\n        );\n        break;\n      }\n      case VERIFY_GOOD.label: {\n        this.props.handleChangesetModifyHarmful(\n          this.props.changesetId,\n          this.props.currentChangeset,\n          false\n        );\n        break;\n      }\n      case OPEN_IN_JOSM.label: {\n        if (!this.props.changesetId) return;\n        const url = `http://127.0.0.1:8111/import?url=https://www.openstreetmap.org/api/0.6/changeset/${this.props.changesetId}/download`;\n        window.open(url, '_blank');\n        break;\n      }\n      case OPEN_IN_ID.label: {\n        if (!this.props.changesetId || !this.props.currentChangeset) return;\n        const coordinates = this.props.currentChangeset.getIn([\n          'geometry',\n          'coordinates',\n          0,\n          0\n        ]);\n        const url = `https://www.openstreetmap.org/edit?changeset=${\n          this.props.changesetId\n        }#map=15/${coordinates && coordinates.get('1')}/${coordinates &&\n          coordinates.get('0')}`;\n        window.open(url, '_blank');\n        break;\n      }\n      case OPEN_IN_OSM.label: {\n        if (!this.props.changesetId) return;\n        const url = `https://www.openstreetmap.org/changeset/${this.props.changesetId}`;\n        window.open(url, '_blank');\n        break;\n      }\n      case OPEN_IN_LEVEL0.label: {\n        if (!this.props.changesetId) return;\n        const url = `http://level0.osmz.ru/?url=changeset/${this.props.changesetId}`;\n        window.open(url, '_blank');\n        break;\n      }\n      case OPEN_IN_ACHAVI.label: {\n        if (!this.props.changesetId) return;\n        const url = `https://overpass-api.de/achavi/?changeset=${this.props.changesetId}`;\n        window.open(url, '_blank');\n        break;\n      }\n      case OPEN_IN_HDYC.label: {\n        const user: string = this.props.currentChangeset.getIn(\n          ['properties', 'user'],\n          ''\n        );\n        const url = `https://hdyc.neis-one.org/?${user}`;\n        window.open(url, '_blank');\n        break;\n      }\n      default: {\n        return;\n      }\n    }\n  }\n  handleVerify = (arr: Array<Object>) => {\n    if (arr.length === 1) {\n      this.props.handleChangesetModifyHarmful(\n        this.props.changesetId,\n        this.props.currentChangeset,\n        arr[0].value // whether harmful is true or false\n      );\n    } else if (arr.length > 1) {\n      throw new Error('verify array is big');\n    }\n  };\n  handleVerifyClear = () => {\n    this.props.handleChangesetModifyHarmful(\n      this.props.changesetId,\n      this.props.currentChangeset,\n      -1\n    );\n  };\n  render() {\n    const width = window.innerWidth;\n    return (\n      <Navbar\n        className=\"bg-gray-faint color-gray border-b border--gray-light border--1 px30\"\n        title={\n          <div className=\"flex-parent flex-parent--row justify--space-between flex-parent--wrap\">\n            <span className=\"flex-parent align-items--center\">\n              {width < 800 && (\n                <Link\n                  to={{ search: this.props.location.search, pathname: '/' }}\n                >\n                  {'<  '}\n                </Link>\n              )}\n              <span className=\"txt-l color-gray--dark\">\n                <strong>Changeset:</strong>{' '}\n                <span className=\"txt-underline mr12\">\n                  <a\n                    href={`https://www.openstreetmap.org/changeset/${this.props.changesetId}`}\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    title=\"See on OSM\"\n                  >\n                    {this.props.changesetId}\n                  </a>\n                  <a\n                    className=\"txt--s pl6 pointer\"\n                    onClick={e =>\n                      navigator.clipboard.writeText(\n                        `${API_URL.replace('/api/v1', '')}/changesets/${\n                          this.props.changesetId\n                        }`\n                      )\n                    }\n                    title=\"Copy OSMCha Changeset URL\"\n                  >\n                    <svg className=\"icon icon--s mt-neg3 inline-block align-middle bg-gray-faint color-darken25 color-darken50-on-hover transition\">\n                      <use xlinkHref=\"#icon-link\" />\n                    </svg>\n                  </a>\n                </span>\n              </span>\n              <OpenIn\n                changesetId={this.props.changesetId}\n                className=\"ml3\"\n                coordinates={\n                  this.props.currentChangeset &&\n                  this.props.currentChangeset.getIn([\n                    'geometry',\n                    'coordinates',\n                    0,\n                    0\n                  ])\n                }\n              />\n            </span>\n            <span>\n              {this.props.currentChangeset && (\n                <span>\n                  {this.props.currentChangeset.getIn([\n                    'properties',\n                    'check_user'\n                  ]) && (\n                    <Tags\n                      changesetId={this.props.changesetId}\n                      currentChangeset={this.props.currentChangeset}\n                      disabled={false}\n                      handleChangesetModifyTag={\n                        this.props.handleChangesetModifyTag\n                      }\n                    />\n                  )}\n                  <Verify\n                    changeset={this.props.currentChangeset}\n                    placeholder=\"Verify\"\n                    value={[]}\n                    onChange={this.handleVerify}\n                    onClear={this.handleVerifyClear}\n                    username={this.props.username}\n                    checkUser={this.props.currentChangeset.getIn([\n                      'properties',\n                      'check_user'\n                    ])}\n                    options={[\n                      {\n                        value: false,\n                        label: 'Good'\n                      },\n                      {\n                        value: true,\n                        label: 'Bad'\n                      }\n                    ]}\n                    className=\"select--s\"\n                  />\n                </span>\n              )}\n            </span>\n          </div>\n        }\n      />\n    );\n  }\n}\n\nNavbarChangeset = keyboardToggleEnhancer(\n  false,\n  [\n    VERIFY_BAD,\n    VERIFY_GOOD,\n    VERIFY_CLEAR,\n    OPEN_IN_JOSM,\n    OPEN_IN_ID,\n    OPEN_IN_OSM,\n    OPEN_IN_LEVEL0,\n    OPEN_IN_ACHAVI,\n    OPEN_IN_HDYC\n  ],\n  NavbarChangeset\n);\n\nNavbarChangeset = connect(\n  (state: RootStateType, props) => ({\n    location: props.location,\n    changesetId: parseInt(state.changeset.get('changesetId'), 10),\n    currentChangeset: state.changeset.getIn([\n      'changesets',\n      parseInt(state.changeset.get('changesetId'), 10)\n    ]),\n    username: state.auth.getIn(['userDetails', 'username'])\n  }),\n  { handleChangesetModifyTag, handleChangesetModifyHarmful }\n)(NavbarChangeset);\n\nexport { NavbarChangeset };\n","// @flow\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { Map } from 'immutable';\nimport { Link } from 'react-router-dom';\nimport { push } from 'react-router-redux';\n\nimport { Button } from '../components/button';\nimport { Navbar } from '../components/navbar';\nimport { Dropdown } from '../components/dropdown';\n\nimport { createPopup } from '../utils/create_popup';\nimport { handlePopupCallback } from '../utils/handle_popup_callback';\nimport { osmAuthUrl } from '../config/constants';\nimport { appVersion, isDev, isStaging, isLocal } from '../config';\n\nimport {\n  getOAuthToken,\n  getFinalToken,\n  logUserOut\n} from '../store/auth_actions';\n\nimport type { RootStateType } from '../store';\n\nclass NavbarSidebar extends React.PureComponent {\n  props: {\n    changesetId: ?number,\n    location: Object,\n    avatar: ?string,\n    currentChangeset: Map<string, *>,\n    username: ?string,\n    token: ?string,\n    oAuthToken: ?string,\n    getOAuthToken: () => mixed,\n    getFinalToken: string => mixed,\n    logUserOut: () => mixed,\n    push: any => any\n  };\n  state = {\n    isMenuOpen: false\n  };\n\n  handleLoginClick = () => {\n    var oAuthToken = this.props.oAuthToken;\n    if (!oAuthToken) return;\n\n    let url;\n    if (isDev || isLocal) {\n      url = `/local-landing.html#${oAuthToken}`;\n    } else {\n      url = `${osmAuthUrl}?oauth_token=${oAuthToken}`;\n    }\n\n    createPopup('oauth_popup', url);\n    handlePopupCallback().then(oAuthObj => {\n      this.props.getFinalToken(oAuthObj.oauth_verifier);\n    });\n  };\n  onUserMenuSelect = (arr: Array<Object>) => {\n    if (arr.length === 1) {\n      if (arr[0].url === '/logout') {\n        this.props.logUserOut();\n      } else {\n        console.log(this.props.push);\n        this.props.push({\n          ...this.props.location,\n          search: this.props.location.search,\n          pathname: arr[0].url\n        });\n      }\n    } else if (arr.length > 1) {\n      throw new Error('filter select array is big');\n    }\n  };\n  renderUserMenuOptions() {\n    const username = this.props.username;\n\n    return (\n      <Dropdown\n        display={username ? username.slice(0, 10) : 'User'}\n        options={[\n          { label: 'Account settings', url: '/user' },\n          { label: 'My saved filters', url: '/saved-filters' },\n          { label: 'My teams', url: '/teams' },\n          { label: 'My trusted users list', url: '/trusted-users' },\n          { label: 'My watchlist', url: '/watchlist' },\n          { label: 'Logout', url: '/logout' }\n        ]}\n        onChange={this.onUserMenuSelect}\n        value={[]}\n        onAdd={() => {}}\n        onRemove={() => {}}\n      />\n    );\n  }\n  openMenu = () => {\n    this.setState({\n      isMenuOpen: !this.state.isMenuOpen\n    });\n  };\n  render() {\n    return (\n      <div>\n        <Navbar\n          className=\"navbar-logo bg-gray-faint border-b border--gray-light border--1\"\n          title={\n            <span className=\"color-gray\">\n              <Link\n                to={{\n                  search: window.location.search,\n                  pathname: '/'\n                }}\n              >\n                <span className=\"txt-xl\">\n                  <strong className=\"color-blue\">OSM</strong>\n                  Cha\n                </span>\n              </Link>\n              <span className=\"relative\">\n                <span\n                  className=\"txt-xs txt-mono absolute w72\"\n                  style={{ top: 17, left: -118 }}\n                >\n                  v{appVersion}\n                  {isDev && ' Dev'}\n                  {isLocal && ' Local'}\n                  {isStaging && ' Staging'}\n                </span>\n              </span>\n            </span>\n          }\n          buttons={\n            <div className=\"flex-parent flex-parent--row\">\n              <Link\n                className=\"pr3 pointer\"\n                to={{\n                  search: window.location.search,\n                  pathname: '/about'\n                }}\n              >\n                <svg className=\"icon icon--m inline-block align-middle color-darken25 color-darken50-on-hover transition\">\n                  <use xlinkHref=\"#icon-question\" />\n                </svg>\n              </Link>\n              {this.props.token ? (\n                <div className=\"mr3 pointer\">\n                  {this.renderUserMenuOptions()}\n                </div>\n              ) : (\n                <Button\n                  onClick={this.handleLoginClick}\n                  disable={!this.props.oAuthToken}\n                  iconName=\"osm\"\n                >\n                  Sign in\n                </Button>\n              )}\n            </div>\n          }\n        />\n      </div>\n    );\n  }\n}\n\nNavbarSidebar = connect(\n  (state: RootStateType, props) => ({\n    location: state.routing.location,\n    changesetId: parseInt(state.changeset.get('changesetId'), 10),\n    currentChangeset: state.changeset.getIn([\n      'changesets',\n      parseInt(state.changeset.get('changesetId'), 10)\n    ]),\n    oAuthToken: state.auth.get('oAuthToken'),\n    token: state.auth.get('token'),\n    username: state.auth.getIn(['userDetails', 'username']),\n    avatar: state.auth.getIn(['userDetails', 'avatar'])\n  }),\n  {\n    getOAuthToken,\n    getFinalToken,\n    logUserOut,\n    push\n  }\n)(NavbarSidebar);\n\nexport { NavbarSidebar };\n","// @flow\nimport React from 'react';\nimport { Link } from 'react-router-dom';\n\nimport { appVersion, isDev, isStaging, isLocal } from '../config';\nimport banner from '../assets/banner.png';\nimport work_flow from '../assets/work_flow.png';\n\nexport function Home() {\n  return (\n    <div className=\"flex-parent flex-parent--column flex-parent--center-cross h-full\">\n      <div className=\"flex-child flex-child--grow\">&nbsp;</div>\n      <div className=\"flex-parent flex-parent--column flex-parent--center-cross \">\n        <img src={banner} className=\"osmcha-logo\" alt=\"OSMCHA\" />\n        <img\n          src={work_flow}\n          className=\"pt36 workflow-img\"\n          alt=\"Validation tool for OpenStreetmap\"\n        />\n      </div>\n      <div className=\"flex-child flex-child--grow\">&nbsp;</div>\n      <div className=\"flex-parent flex-parent--column align-center txt-l\">\n        <div className=\"txt-xl\">\n          v{appVersion}\n          {isDev && ' Dev'}\n          {isStaging && ' Staging'}\n          {isLocal && ' Local'}\n        </div>\n        <div className=\"flex-parent flex-parent--row flex-parent--center-main\">\n          <Link\n            className=\"link link--gray flex-parent flex-parent--row flex-parent--center-cross mx6\"\n            to=\"/about\"\n          >\n            <svg className=\"icon\">\n              <use xlinkHref=\"#icon-info\" />\n            </svg>{' '}\n            <span>Guide</span>\n          </Link>{' '}\n          |{' '}\n          <a\n            target=\"__blank\"\n            className=\"link link--gray  flex-parent flex-parent--row flex-parent--center-cross mx6\"\n            href=\"https://github.com/mapbox/osmcha-frontend/blob/master/CONTRIBUTING.md\"\n          >\n            <svg className=\"icon\">\n              <use xlinkHref=\"#icon-github\" />\n            </svg>{' '}\n            <span>GitHub</span>\n          </a>{' '}\n          |{' '}\n          <a\n            target=\"__blank\"\n            className=\"link link--gray  flex-parent flex-parent--row flex-parent--center-cross mx6\"\n            href=\"https://github.com/mapbox/osmcha-frontend/issues\"\n          >\n            <svg className=\"icon\">\n              <use xlinkHref=\"#icon-bug\" />\n            </svg>{' '}\n            <span>File an issue</span>\n          </a>\n        </div>\n      </div>\n      <div className=\"flex-child flex-child--grow\">&nbsp;</div>\n    </div>\n  );\n}\n","// @flow\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport Notify from 'react-notification-system';\n\nimport type { RootStateType } from '../store';\n\nimport {\n  dismissModalCallback,\n  activateModalCallback\n} from '../store/modal_actions';\n\nclass Modal extends React.PureComponent {\n  props: {\n    title: ?string,\n    description: ?string,\n    kind: 'error' | 'success',\n    dismiss: ?boolean,\n    autoDismiss: ?boolean,\n    dismissModalCallback: number => any,\n    activateModalCallback: number => any,\n    position: ?string,\n    callbackLabel: ?string,\n    error: Object,\n    uid: number\n  };\n  static defaultProps = {\n    title: 'Error',\n    description: 'Oops there was a problem. Please reload the app.',\n    autoDismiss: 5,\n    dismiss: true,\n    position: 'tr',\n    kind: 'error'\n  };\n  ref = null;\n  componentDidMount() {\n    if (this.props.error) {\n      this.sendNotification(this.props);\n    }\n  }\n  componentWillUpdate(nextProps: Object) {\n    this.sendNotification(nextProps);\n  }\n  sendNotification = nextProps => {\n    const uid = nextProps.uid;\n    if (!this.ref) return;\n    this.ref.addNotification({\n      uid,\n      title: nextProps.title,\n      message:\n        (nextProps.error && nextProps.error.message) || nextProps.description,\n      level: nextProps.kind,\n      autoDismiss: nextProps.autoDismiss,\n      position: nextProps.position,\n      dismissible: nextProps.dismiss,\n      action: nextProps.callbackLabel && {\n        label: nextProps.callbackLabel,\n        callback: () => nextProps.activateModalCallback(uid)\n      },\n      onRemove: () => {\n        nextProps.dismissModalCallback(uid);\n      }\n    });\n  };\n  addRef = r => {\n    this.ref = r;\n  };\n  render() {\n    return <Notify ref={this.addRef} />;\n  }\n}\nModal = connect(\n  (state: RootStateType) => ({\n    error: state.modal.get('error'),\n    callback: state.modal.get('callback'),\n    callbackLabel: state.modal.get('callbackLabel'),\n    title: state.modal.get('title'),\n    description: state.modal.get('description'),\n    dismiss: state.modal.get('dismiss'),\n    position: state.modal.get('position'),\n    autoDismiss: state.modal.get('autoDismiss'),\n    kind: state.modal.get('kind'),\n    uid: state.modal.get('uid')\n  }),\n  { dismissModalCallback, activateModalCallback }\n)(Modal);\n\nexport { Modal };\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { Map } from 'immutable';\n\nimport { Button } from '../button';\nimport { applyUpdateUserDetails } from '../../store/auth_actions';\nimport type { RootStateType } from '../../store';\nimport thumbsUp from '../../assets/thumbs-up.svg';\nimport thumbsDown from '../../assets/thumbs-down.svg';\n\nclass EditUserDetails extends React.PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      message_good: props.userDetails.get('message_good'),\n      message_bad: props.userDetails.get('message_bad'),\n      comment_feature: props.userDetails.get('comment_feature')\n    };\n  }\n  componentWillReceiveProps(nextProps) {\n    this.setState({ message_good: nextProps.userDetails.get('message_good') });\n    this.setState({ message_bad: nextProps.userDetails.get('message_bad') });\n    this.setState({\n      comment_feature: nextProps.userDetails.get('comment_feature')\n    });\n  }\n  onChangeMessageGood = (event: any) => {\n    this.setState({ message_good: event.target.value });\n  };\n  onChangeMessageBad = (event: any) => {\n    this.setState({ message_bad: event.target.value });\n  };\n  handleSubmit = event => {\n    this.props.applyUpdateUserDetails(\n      this.state.message_good,\n      this.state.message_bad,\n      this.state.comment_feature\n    );\n  };\n  renderGoodBadImg(isGood) {\n    return (\n      <img\n        src={isGood ? thumbsUp : thumbsDown}\n        alt={`${isGood ? 'good' : 'bad'}`}\n        className=\"icon inline-block mt3\"\n      />\n    );\n  }\n\n  render() {\n    return (\n      <div>\n        <span className=\"ml12 flex-parent flex-parent--row my3 pt12\">\n          <p className=\"flex-child txt-m\">\n            Default comment for changesets reviewed as GOOD{' '}\n            {this.renderGoodBadImg(true)}:\n          </p>\n        </span>\n        <textarea\n          placeholder=\"Define a default message to the changesets you review as good. You can edit it before post a comment.\"\n          className=\"textarea ml12\"\n          value={this.state.message_good}\n          onChange={this.onChangeMessageGood}\n        />\n        <span className=\"ml12 flex-parent flex-parent--row my3 pt18\">\n          <p className=\"flex-child txt-m\">\n            Default comment for changesets reviewed as BAD{' '}\n            {this.renderGoodBadImg()}:\n          </p>\n        </span>\n        <textarea\n          placeholder=\"Define a default message to the changesets you review as bad. You can edit it before post a comment.\"\n          className=\"textarea ml12\"\n          value={this.state.message_bad}\n          onChange={this.onChangeMessageBad}\n        />\n        <Button className=\"input wmax180 ml12 mt6\" onClick={this.handleSubmit}>\n          Save Preferences\n        </Button>\n      </div>\n    );\n  }\n}\nEditUserDetails = connect(\n  (state: RootStateType, props) => ({\n    userDetails: state.auth.getIn(['userDetails'], Map())\n  }),\n  {\n    applyUpdateUserDetails\n  }\n)(EditUserDetails);\n\nexport { EditUserDetails };\n","// @flow\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { Map } from 'immutable';\nimport { push } from 'react-router-redux';\n\nimport { modal } from '../store/modal_actions';\nimport { logUserOut } from '../store/auth_actions';\nimport type { filtersType } from '../components/filters';\nimport { Avatar } from '../components/avatar';\nimport { Button } from '../components/button';\nimport { EditUserDetails } from '../components/user/details';\nimport type { RootStateType } from '../store';\n\ntype propsType = {\n  avatar: ?string,\n  token: string,\n  data: Map<string, any>,\n  location: Object,\n  filters: filtersType,\n  userDetails: Map<string, any>,\n  reloadData: () => any,\n  logUserOut: () => any,\n  push: any => any,\n  modal: any => any\n};\nclass User extends React.PureComponent<any, propsType, any> {\n  state = {\n    userValues: null\n  };\n  onUserChange = (value: ?Array<Object>) => {\n    if (Array.isArray(value) && value.length === 0)\n      return this.setState({ userValues: null });\n    this.setState({\n      userValues: value\n    });\n  };\n  render() {\n    const userDetails = this.props.userDetails;\n    return (\n      <div\n        className={`flex-parent flex-parent--column changesets-filters bg-white${\n          window.innerWidth < 800 ? 'viewport-full' : ''\n        }`}\n      >\n        <header className=\"h55 hmin55 flex-parent px30 bg-gray-faint flex-parent--center-cross justify--space-between color-gray border-b border--gray-light border--1\">\n          <span className=\"txt-l txt-bold color-gray--dark\">\n            <span>Account Settings</span>\n          </span>\n\n          <span className=\"txt-l color-gray--dark\">\n            <Button\n              onClick={this.props.logUserOut}\n              className=\"bg-white-on-hover\"\n            >\n              Logout\n            </Button>\n          </span>\n        </header>\n        <div className=\"px30 flex-child  pb60  filters-scroll\">\n          <span className=\"flex-parent flex-parent--row align justify--space-between  mr6 txt-bold mt24\">\n            <Avatar size={72} url={this.props.avatar} />\n            <span\n              className=\"flex-child flex-child--grow pl24  pt18\"\n              style={{ alignSelf: 'center' }}\n            >\n              <h2 className=\"txt-xl\">\n                Welcome,{' '}\n                {userDetails.get('username')\n                  ? userDetails.get('username')\n                  : 'stranger'}\n                !\n              </h2>\n              <div className=\"flex-child flex-child--grow\">&nbsp;</div>\n            </span>\n          </span>\n          <div className=\"flex-parent flex-parent--column align justify--space-between\">\n            <h2 className=\"pl12 txt-xl mr6 txt-bold mt24 mb12 border-b border--gray-light border--1\">\n              Info\n            </h2>\n            <span className=\"ml12 flex-parent flex-parent--row my3\">\n              <p className=\"flex-child txt-bold w120\">OSMCha ID: </p>\n              <p className=\"flex-child\">{userDetails.get('id')}</p>\n            </span>\n            <span className=\"ml12 flex-parent flex-parent--row my3\">\n              <p className=\"flex-child txt-bold w120\">OSM ID: </p>\n              <p className=\"flex-child\">{userDetails.get('uid')}</p>\n            </span>\n            <span className=\"ml12 flex-parent flex-parent--row my3\">\n              <p className=\"flex-child txt-bold w120\">Username: </p>\n              <p className=\"flex-child\">{userDetails.get('username')}</p>\n            </span>\n            {userDetails.get('is_staff') && (\n              <span className=\"ml12 flex-parent flex-parent--row my3\">\n                <p className=\"flex-child txt-bold w120\">Staff: </p>\n                <p className=\"flex-child\">Yes</p>\n              </span>\n            )}\n            <span className=\"ml12 flex-parent flex-parent--row my3\">\n              <p className=\"flex-child txt-bold w120\">API key: </p>\n              <p className=\"flex-child\">\n                <span className=\"pre pb6 pt6\">Token {this.props.token}</span>\n                <a\n                  className=\"txt--s pl6 pointer\"\n                  onClick={e =>\n                    navigator.clipboard.writeText(`Token ${this.props.token}`)\n                  }\n                  title=\"Copy Authorization Token\"\n                >\n                  <svg className=\"icon icon--m mt-neg3 inline-block align-middle color-darken25 color-darken50-on-hover transition\">\n                    <use xlinkHref=\"#icon-clipboard\" />\n                  </svg>\n                </a>\n              </p>\n            </span>\n\n            {this.props.token && (\n              <div>\n                <div className=\"mt24 mb12\">\n                  <h2 className=\"pl12 txt-xl mr6 txt-bold border-b border--gray-light border--1\">\n                    Review Comments Template\n                  </h2>\n                  <EditUserDetails />\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nUser = connect(\n  (state: RootStateType, props) => ({\n    location: props.location,\n    changesetId: parseInt(state.changeset.get('changesetId'), 10),\n    currentChangeset: state.changeset.getIn([\n      'changesets',\n      parseInt(state.changeset.get('changesetId'), 10)\n    ]),\n    oAuthToken: state.auth.get('oAuthToken'),\n    token: state.auth.get('token'),\n    userDetails: state.auth.getIn(['userDetails'], Map()),\n    avatar: state.auth.getIn(['userDetails', 'avatar'])\n  }),\n  {\n    logUserOut,\n    modal,\n    push\n  }\n)(User);\n\nexport { User };\n","import React from 'react';\n\nexport function CustomURL({ href, children, iconName, className }: Object) {\n  return (\n    <a\n      href={href}\n      className={`${className ||\n        ''} btn btn--s border border--1 border--darken5 border--darken25-on-hover round bg-darken10 bg-darken5-on-hover color-gray transition`}\n      target=\"_blank\"\n    >\n      {iconName && (\n        <svg className={'icon inline-block align-middle'}>\n          <use xlinkHref={`#icon-${iconName}`} />\n        </svg>\n      )}\n    </a>\n  );\n}\n","import React from 'react';\n\nexport const BlockMarkup = ({ children }) => (\n  <div className=\"flex-child flex-child--grow bg-gray-faint mx12 round p12 my6\">\n    <div className=\"flex-parent flex-parent--row  justify--space-between\">\n      {children}\n    </div>\n  </div>\n);\n","// @flow\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { Map, List } from 'immutable';\nimport { push } from 'react-router-redux';\n\nimport { modal } from '../store/modal_actions';\nimport { logUserOut } from '../store/auth_actions';\nimport { applyFilters } from '../store/filters_actions';\nimport { cancelablePromise } from '../utils/promise';\nimport { fetchAllAOIs } from '../network/aoi';\nimport { Link } from 'react-router-dom';\nimport { createAOI, deleteAOI } from '../network/aoi';\nimport { withFetchDataSilent } from '../components/fetch_data_enhancer';\nimport type { filtersType } from '../components/filters';\nimport { Avatar } from '../components/avatar';\nimport { Button } from '../components/button';\nimport { CustomURL } from '../components/customURL';\nimport { BlockMarkup } from '../components/user/block_markup';\nimport { API_URL } from '../config';\nimport type { RootStateType } from '../store';\n\nclass SaveButton extends React.PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      editing: false\n    };\n  }\n  ref;\n  clicked = false;\n  onClick = event => {\n    this.clicked = true;\n    this.setState({ editing: true });\n  };\n  onChange = (event: any) => {\n    this.setState({ value: event.target.value });\n  };\n  onKeyDown = event => {\n    if (event.keyCode === 13) {\n      this.setState({\n        editing: false\n      });\n      this.props.onCreate(this.state.value);\n    } else if (event.keyCode === 27) {\n      this.setState({\n        editing: false\n      });\n      this.clicked = false;\n    }\n  };\n  onSave = event => {\n    this.setState({\n      editing: false\n    });\n    this.props.onCreate(this.state.value);\n  };\n  render() {\n    return (\n      <span>\n        {this.state.editing ? (\n          <span className=\"flex-parent flex-parent--row \">\n            <input\n              placeholder={this.props.placeholder}\n              className=\"input wmax120 ml12\"\n              ref={r => {\n                if (this.clicked) {\n                  r && r.select();\n                  this.clicked = false;\n                }\n              }}\n              value={this.state.value}\n              onChange={this.onChange}\n              onKeyDown={this.onKeyDown}\n            />\n            <Button className=\"input wmax120 ml6\" onClick={this.onSave}>\n              Save\n            </Button>\n          </span>\n        ) : (\n          <Button className=\"input wmax120 ml12\" onClick={this.onClick}>\n            Add+\n          </Button>\n        )}\n      </span>\n    );\n  }\n}\n\nconst AOIsBlock = ({ data, activeAoiId, removeAoi }) => (\n  <BlockMarkup>\n    <span>\n      <span\n        className={`${activeAoiId === data.getIn(['id']) ? 'txt-bold' : ''}`}\n      >\n        {data.getIn(['properties', 'name'])}\n        {activeAoiId === data.getIn(['id']) ? '*' : ''}\n      </span>\n      <span className=\"txt-em color-gray pl6\">({data.getIn(['id'])})</span>\n    </span>\n    <span>\n      <Link\n        className=\"mx3 btn btn--s border border--1 border--darken5 border--darken25-on-hover round bg-darken10 bg-darken5-on-hover color-gray transition\"\n        to={{\n          search: `aoi=${data.getIn(['id'])}`,\n          pathname: '/filters'\n        }}\n      >\n        {activeAoiId === data.getIn(['id']) ? 'Active' : 'Load'}\n      </Link>\n      <Button className=\"mr3\" onClick={() => removeAoi(data.getIn(['id']))}>\n        Remove\n      </Button>\n      <CustomURL\n        href={`${API_URL}/aoi/${data.getIn(['id'])}/changesets/feed/`}\n        className=\"mr3\"\n        iconName=\"rss\"\n      />\n    </span>\n  </BlockMarkup>\n);\n\nconst ListFortified = ({\n  onAdd,\n  onRemove,\n  data,\n  TargetBlock,\n  propsToPass,\n  SaveComp\n}) => (\n  <div>\n    {data.map((e, i) => (\n      <TargetBlock key={i} data={e} {...propsToPass} />\n    ))}\n    {SaveComp}\n  </div>\n);\n\ntype propsType = {\n  avatar: ?string,\n  aoiId: ?string,\n  token: string,\n  data: Map<string, any>,\n  location: Object,\n  filters: filtersType,\n  userDetails: Map<string, any>,\n  applyFilters: (filtersType, path?: string) => mixed, // base\n  reloadData: () => any,\n  logUserOut: () => any,\n  push: any => any,\n  modal: any => any\n};\nclass SavedFilters extends React.PureComponent<any, propsType, any> {\n  createAOIPromise;\n  state = {\n    userValues: null\n  };\n  componentWillUnmount() {\n    this.createAOIPromise && this.createAOIPromise.cancel();\n  }\n\n  // blacklist\n  addToBlackList = ({ username, uid }: { username: string, uid: string }) => {\n    if (!username || !uid) return;\n    this.props.addToBlacklist({ username, uid });\n  };\n  removeFromBlackList = (uid: number) => {\n    if (!uid) return;\n    this.props.removeFromBlacklist(uid);\n  };\n  // whitelist - trusted users\n  addToWhiteList = ({ username }: { username: string }) => {\n    if (!username) return;\n    this.props.addToWhitelist(username);\n  };\n  removeFromWhiteList = (username: string) => {\n    if (!username) return;\n    this.props.removeFromWhitelist(username);\n  };\n  // aoi\n  loadAoiId = (aoiId: ?string) => {\n    if (!aoiId) return;\n    this.props.push({\n      ...this.props.location,\n      search: `aoi=${aoiId}`,\n      path: '/filters'\n    });\n  };\n  createAOI = (name: string) => {\n    if (name === '' || !name) return;\n    this.createAOIPromise = cancelablePromise(\n      createAOI(this.props.token, name, this.props.filters)\n    );\n\n    this.createAOIPromise.promise\n      .then(r => r && this.loadAoiId(r.id))\n      .catch(e => console.error(e));\n  };\n  removeAOI = (aoiId: string) => {\n    if (!aoiId) return;\n    deleteAOI(this.props.token, aoiId)\n      .then(r => {\n        if (aoiId === this.props.aoiId) {\n          this.props.applyFilters(new Map(), '/user');\n        } else {\n          // const location = {\n          //   ...this.props.location, //  clone it\n          //   pathname: '/user'\n          // };\n          this.props.reloadData();\n        }\n        this.props.modal({\n          kind: 'success',\n          title: 'Filter Deleted ',\n          description: `The ${aoiId} was deleted`\n        });\n      })\n      .catch(e => {\n        this.props.reloadData();\n        this.props.modal({\n          kind: 'error',\n          title: 'Deletion failed ',\n          error: e\n        });\n      });\n  };\n  onUserChange = (value: ?Array<Object>) => {\n    if (Array.isArray(value) && value.length === 0)\n      return this.setState({ userValues: null });\n    this.setState({\n      userValues: value\n    });\n  };\n  render() {\n    return (\n      <div\n        className={`flex-parent flex-parent--column changesets-filters bg-white${\n          window.innerWidth < 800 ? 'viewport-full' : ''\n        }`}\n      >\n        <header className=\"h55 hmin55 flex-parent px30 bg-gray-faint flex-parent--center-cross justify--space-between color-gray border-b border--gray-light border--1\">\n          <span className=\"txt-l txt-bold color-gray--dark\">\n            <span className=\"fl\">\n              <Avatar size={36} url={this.props.avatar} />\n            </span>\n            <span className=\"pl6 line45\">Saved filters</span>\n          </span>\n\n          <span className=\"txt-l color-gray--dark\">\n            <Button\n              onClick={this.props.logUserOut}\n              className=\"bg-white-on-hover\"\n            >\n              Logout\n            </Button>\n          </span>\n        </header>\n        <div className=\"px30 flex-child  pb60  filters-scroll\">\n          <div className=\"flex-parent flex-parent--column align justify--space-between\">\n            {this.props.token && (\n              <div>\n                <div className=\"mt24 mb12\">\n                  <h2 className=\"pl12 txt-xl mr6 txt-bold border-b border--gray-light border--1\">\n                    My saved filters\n                  </h2>\n                  <ListFortified\n                    data={this.props.data.getIn(['aoi', 'features'], List())}\n                    TargetBlock={AOIsBlock}\n                    propsToPass={{\n                      activeAoiId: this.props.aoiId,\n                      removeAoi: this.removeAOI\n                    }}\n                    SaveComp={<SaveButton onCreate={this.createAOI} />}\n                  />\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n/**\n * Never use props not required by the Basecomponent in HOCs\n */\nSavedFilters = withFetchDataSilent(\n  (props: propsType) => ({\n    aoi: cancelablePromise(fetchAllAOIs(props.token))\n  }),\n  (nextProps: propsType, props: propsType) => true,\n  SavedFilters\n);\n\nSavedFilters = connect(\n  (state: RootStateType, props) => ({\n    location: props.location,\n    filters: state.filters.get('filters'),\n    oAuthToken: state.auth.get('oAuthToken'),\n    token: state.auth.get('token'),\n    userDetails: state.auth.getIn(['userDetails'], Map()),\n    avatar: state.auth.getIn(['userDetails', 'avatar']),\n    aoiId: state.filters.getIn(['aoi', 'id'], null)\n  }),\n  {\n    applyFilters,\n    logUserOut,\n    modal,\n    push\n  }\n)(SavedFilters);\n\nexport { SavedFilters };\n","// @flow\nimport React from 'react';\nimport { Button } from '../button';\nimport { handleErrors } from '../../network/aoi';\n\nexport class BlackListUser extends React.Component {\n  state = {\n    username: '',\n    uid: '',\n    isValidUsername: true,\n    isValidUid: true,\n    verified: false\n  };\n  setUsername = (event: any) => {\n    const target = event.target;\n    const value = target.value;\n    this.setState({ username: value, isValidUsername: true, verified: false });\n  };\n  setUid = (event: any) => {\n    const target = event.target;\n    const value = target.value;\n    this.setState({ uid: value, isValidUid: true, verified: false });\n  };\n  fetchUsername = (username: string) =>\n    fetch(\n      `https://osm-comments-api.mapbox.com/api/v1/users/name/${\n        this.state.username\n      }`\n    )\n      .then(handleErrors)\n      .then(r => r.json());\n\n  fetchUid = (uid: string) =>\n    fetch(`https://osm-comments-api.mapbox.com/api/v1/users/id/${uid}`)\n      .then(handleErrors)\n      .then(r => r.json());\n\n  verifyInput = () => {\n    if (this.state.uid.length > 0 && this.state.username.length === 0) {\n      this.fetchUid(this.state.uid)\n        .then(x => {\n          return x;\n        })\n        .then(r => ({\n          uid: r.id.toString(),\n          username: r.name\n        }))\n        .then(r =>\n          this.setState({\n            username: r.username,\n            uid: r.uid,\n            verified: true,\n            isValidUsername: true,\n            isValidUid: true\n          })\n        )\n        .catch(r => this.setState({ isValidUid: false, verified: false }));\n    } else if (this.state.username.length > 0 && this.state.uid.length === 0) {\n      this.fetchUsername(this.state.username)\n        .then(r => ({\n          uid: r.id.toString(),\n          username: r.name\n        }))\n        .then(x => {\n          return x;\n        })\n        .then(r =>\n          this.setState({\n            username: r.username,\n            uid: r.uid,\n            verified: true,\n            isValidUsername: true,\n            isValidUid: true\n          })\n        )\n        .catch(r => this.setState({ isValidUsername: false, verified: false }));\n    } else if (this.state.uid.length > 0 && this.state.username.length > 0) {\n      Promise.all([\n        this.fetchUid(this.state.uid).then(r => ({\n          uid: r.id,\n          username: r.name\n        })),\n        this.fetchUsername(this.state.username).then(r => ({\n          uid: r.id,\n          username: r.name\n        }))\n      ])\n        .then(resp => {\n          if (\n            resp[0].uid === resp[1].uid &&\n            resp[0].username === resp[1].username\n          ) {\n            window.alert('The user is valid');\n            this.setState({ verified: true });\n          } else {\n            this.setState({ isValidUsername: false, isValidUid: false });\n          }\n        })\n        .catch(e =>\n          this.setState({ isValidUsername: false, isValidUid: false })\n        );\n    }\n  };\n  onAdd = () => {\n    const username = this.state.username;\n    const uid = this.state.uid;\n    if (username && username.length > 0 && uid && uid.length > 0) {\n      this.props.onSave(username, uid);\n    } else {\n      this.setState({ isValidUsername: false, isValidUid: false });\n    }\n  };\n\n  render() {\n    const errorClass = 'border border--1 border--red';\n    return (\n      <span className=\"flex-parent flex-parent--row\">\n        <input\n          className={`input ${this.state.isValidUsername ? '' : errorClass}`}\n          value={this.state.username}\n          onChange={this.setUsername}\n          placeholder=\"Username\"\n          type=\"text\"\n        />\n        <input\n          className={`input ${this.state.isValidUid ? '' : errorClass}`}\n          value={this.state.uid}\n          onChange={this.setUid}\n          placeholder=\"UID\"\n          type=\"text\"\n        />\n        <Button className={'btn max120 ml12 '} onClick={this.verifyInput}>\n          {this.state.verified ? 'Verified' : 'Verify'}\n        </Button>\n        <Button\n          className={`btn wmax120 ml12 ${\n            this.state.verified ? 'btn--green' : ''\n          }`}\n          onClick={this.onAdd}\n        >\n          Add\n        </Button>\n      </span>\n    );\n  }\n}\n","// @flow\nimport React from 'react';\nimport { Button } from '../button';\n\nexport class WhiteListUser extends React.Component {\n  state = {\n    username: ''\n  };\n\n  onAdd = () => {\n    const username = this.state.username;\n    if (username && username.length > 0) {\n      this.props.onSave(username);\n      this.setState({ username: '' });\n    }\n  };\n\n  render() {\n    return (\n      <span className=\"flex-parent flex-parent--row\">\n        <input\n          className=\"input\"\n          onChange={e => this.setState({ username: e.target.value })}\n          placeholder=\"Username\"\n          type=\"text\"\n        />\n        <Button className=\"btn wmax120 ml12\" onClick={this.onAdd}>\n          Add\n        </Button>\n      </span>\n    );\n  }\n}\n","import React from 'react';\n\nimport { Button } from '../button';\nimport { BlackListUser } from './blacklist_user';\nimport { WhiteListUser } from './whitelist_user';\n\nexport class SaveUser extends React.PureComponent {\n  state = {\n    showInput: false\n  };\n  // onUserChange = (value: ?Array<Object>) => {\n  //   if (Array.isArray(value) && value.length === 0)\n  //     return this.setState({ userValues: null });\n  //   this.setState({\n  //     userValues: value\n  //   });\n  // };\n  // onSave = () => {\n  //   this.setState({\n  //     showInput: false\n  //   });\n  //   if (this.state.userValues) {\n  //     this.props.onCreate(this.state.userValues);\n  //   }\n  // };\n  onSave = (username, uid) => {\n    if (this.props.forBlacklist) {\n      if (!username || !uid) return;\n      this.props.onCreate({ username, uid });\n      this.setState({ showInput: false });\n    } else {\n      if (!username) return;\n      this.props.onCreate({ username });\n      this.setState({ showInput: false });\n    }\n  };\n  render() {\n    return (\n      <span>\n        {this.state.showInput ? (\n          <span className=\"flex-parent flex-parent--row \">\n            {this.props.forBlacklist ? (\n              <BlackListUser onSave={this.onSave} />\n            ) : (\n              <WhiteListUser onSave={this.onSave} />\n            )}\n\n            {/* <UserAutocomplete\n                placeholder=\"user\"\n                className=\"wmin180\"\n                onChange={this.onUserChange}\n                value={this.state.userValues}\n                name=\"blacklist_user\"\n              /> */}\n          </span>\n        ) : (\n          <Button\n            className=\"input wmax120 ml12\"\n            onClick={() => this.setState({ showInput: true })}\n          >\n            Add+\n          </Button>\n        )}\n      </span>\n    );\n  }\n}\n","// @flow\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { Map, List } from 'immutable';\nimport { push } from 'react-router-redux';\nimport { Link } from 'react-router-dom';\n\nimport { getObjAsQueryParam } from '../utils/query_params';\nimport { BlockMarkup } from '../components/user/block_markup';\nimport { SaveUser } from '../components/user/save_user';\nimport {\n  addToWhitelist,\n  removeFromWhitelist\n} from '../store/whitelist_actions';\nimport { modal } from '../store/modal_actions';\nimport { logUserOut } from '../store/auth_actions';\nimport { Avatar } from '../components/avatar';\nimport { Button } from '../components/button';\nimport type { RootStateType } from '../store';\n\nconst WhiteListBlock = ({ data, removeFromWhiteList }) => (\n  <BlockMarkup>\n    <span>\n      <span>{data}</span>\n    </span>\n    <span>\n      <Link\n        className=\"mx3 btn btn--s border border--1 border--darken5 border--darken25-on-hover round bg-darken10 bg-darken5-on-hover color-gray transition\"\n        to={{\n          search: getObjAsQueryParam('filters', {\n            users: [\n              {\n                label: data,\n                value: data\n              }\n            ]\n          })\n        }}\n      >\n        OSMCha\n      </Link>\n      <Button className=\"mr3\" onClick={() => removeFromWhiteList(data)}>\n        Remove\n      </Button>\n    </span>\n  </BlockMarkup>\n);\n\nconst ListFortified = ({\n  onAdd,\n  onRemove,\n  data,\n  TargetBlock,\n  propsToPass,\n  SaveComp\n}) => (\n  <div>\n    {data.map((e, i) => (\n      <TargetBlock key={i} data={e} {...propsToPass} />\n    ))}\n    {SaveComp}\n  </div>\n);\n\ntype propsType = {\n  avatar: ?string,\n  token: string,\n  data: Map<string, any>,\n  location: Object,\n  userDetails: Map<string, any>,\n  reloadData: () => any,\n  logUserOut: () => any,\n  push: any => any,\n  modal: any => any,\n  whitelisted: Map<string, *>,\n  addToWhitelist: string => void,\n  removeFromWhitelist: string => void\n};\nclass TrustedUsers extends React.PureComponent<any, propsType, any> {\n  state = {\n    userValues: null\n  };\n  // whitelist - trusted users\n  addToWhiteList = ({ username }: { username: string }) => {\n    if (!username) return;\n    this.props.addToWhitelist(username);\n  };\n  removeFromWhiteList = (username: string) => {\n    if (!username) return;\n    this.props.removeFromWhitelist(username);\n  };\n  onUserChange = (value: ?Array<Object>) => {\n    if (Array.isArray(value) && value.length === 0)\n      return this.setState({ userValues: null });\n    this.setState({\n      userValues: value\n    });\n  };\n  render() {\n    let trustedUsers = this.props.whitelisted ? this.props.whitelisted : List();\n    trustedUsers = trustedUsers.sortBy(\n      a => a,\n      (a: string, b: string) => a.localeCompare(b)\n    );\n    return (\n      <div\n        className={`flex-parent flex-parent--column changesets-filters bg-white${\n          window.innerWidth < 800 ? 'viewport-full' : ''\n        }`}\n      >\n        <header className=\"h55 hmin55 flex-parent px30 bg-gray-faint flex-parent--center-cross justify--space-between color-gray border-b border--gray-light border--1\">\n          <span className=\"txt-l txt-bold color-gray--dark\">\n            <span className=\"fl\">\n              <Avatar size={36} url={this.props.avatar} />\n            </span>\n            <span className=\"pl6 line45\">Trusted users</span>\n          </span>\n\n          <span className=\"txt-l color-gray--dark\">\n            <Button\n              onClick={this.props.logUserOut}\n              className=\"bg-white-on-hover\"\n            >\n              Logout\n            </Button>\n          </span>\n        </header>\n        <div className=\"px30 flex-child  pb60  filters-scroll\">\n          <div className=\"flex-parent flex-parent--column align justify--space-between\">\n            {this.props.token && (\n              <div>\n                <div className=\"mt24 mb12\">\n                  <h2 className=\"pl12 txt-xl mr6 txt-bold mt24 mb12 border-b border--gray-light border--1\">\n                    My trusted users list\n                  </h2>\n                  <ListFortified\n                    data={trustedUsers}\n                    TargetBlock={WhiteListBlock}\n                    propsToPass={{\n                      removeFromWhiteList: this.removeFromWhiteList\n                    }}\n                    SaveComp={<SaveUser onCreate={this.addToWhiteList} />}\n                  />\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nTrustedUsers = connect(\n  (state: RootStateType, props) => ({\n    location: props.location,\n    whitelisted: state.whitelist.get('whitelist'),\n    oAuthToken: state.auth.get('oAuthToken'),\n    token: state.auth.get('token'),\n    userDetails: state.auth.getIn(['userDetails'], Map()),\n    avatar: state.auth.getIn(['userDetails', 'avatar'])\n  }),\n  {\n    logUserOut,\n    modal,\n    push,\n    addToWhitelist,\n    removeFromWhitelist\n  }\n)(TrustedUsers);\n\nexport { TrustedUsers };\n","// @flow\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { Map, List } from 'immutable';\nimport { push } from 'react-router-redux';\nimport { Link } from 'react-router-dom';\n\nimport { getObjAsQueryParam } from '../utils/query_params';\nimport { BlockMarkup } from '../components/user/block_markup';\nimport { SaveUser } from '../components/user/save_user';\nimport {\n  addToBlacklist,\n  removeFromBlacklist\n} from '../store/blacklist_actions';\nimport { modal } from '../store/modal_actions';\nimport { logUserOut } from '../store/auth_actions';\nimport { Avatar } from '../components/avatar';\nimport { Button } from '../components/button';\nimport type { RootStateType } from '../store';\n\nconst BlackListBlock = ({ data, removeFromBlackList }) => (\n  <BlockMarkup>\n    <span>\n      <span>{data.getIn(['username'])}</span>\n      <span className=\"txt-em color-gray pl6\">({data.getIn(['uid'])})</span>\n    </span>\n    <span>\n      <Link\n        className=\"mx3 btn btn--s border border--1 border--darken5 border--darken25-on-hover round bg-darken10 bg-darken5-on-hover color-gray transition\"\n        to={{\n          search: getObjAsQueryParam('filters', {\n            users: [\n              {\n                label: data.getIn(['username']),\n                value: data.getIn(['username'])\n              }\n            ]\n          })\n        }}\n      >\n        OSMCha\n      </Link>\n      <Button\n        className=\"mr3\"\n        onClick={() => removeFromBlackList(data.getIn(['uid']))}\n      >\n        Remove\n      </Button>\n    </span>\n  </BlockMarkup>\n);\n\nconst ListFortified = ({\n  onAdd,\n  onRemove,\n  data,\n  TargetBlock,\n  propsToPass,\n  SaveComp\n}) => (\n  <div>\n    {data.map((e, i) => (\n      <TargetBlock key={i} data={e} {...propsToPass} />\n    ))}\n    {SaveComp}\n  </div>\n);\n\ntype propsType = {\n  avatar: ?string,\n  token: string,\n  data: Map<string, any>,\n  location: Object,\n  userDetails: Map<string, any>,\n  reloadData: () => any,\n  logUserOut: () => any,\n  push: any => any,\n  modal: any => any,\n  blacklisted: Map<object, *>,\n  addToBlacklist: string => void,\n  removeFromBlacklist: string => void\n};\nclass Watchlist extends React.PureComponent<any, propsType, any> {\n  state = {\n    userValues: null\n  };\n  // blacklist\n  addToBlackList = ({ username, uid }: { username: string, uid: string }) => {\n    if (!username || !uid) return;\n    this.props.addToBlacklist({ username, uid });\n  };\n  removeFromBlackList = (uid: number) => {\n    if (!uid) return;\n    this.props.removeFromBlacklist(uid);\n  };\n  onUserChange = (value: ?Array<Object>) => {\n    if (Array.isArray(value) && value.length === 0)\n      return this.setState({ userValues: null });\n    this.setState({\n      userValues: value\n    });\n  };\n  render() {\n    let blackList = this.props.blacklisted ? this.props.blacklisted : List();\n    blackList = blackList.sortBy(\n      a => a.get('username'),\n      (a: string, b: string) => a.localeCompare(b)\n    );\n\n    return (\n      <div\n        className={`flex-parent flex-parent--column changesets-filters bg-white${\n          window.innerWidth < 800 ? 'viewport-full' : ''\n        }`}\n      >\n        <header className=\"h55 hmin55 flex-parent px30 bg-gray-faint flex-parent--center-cross justify--space-between color-gray border-b border--gray-light border--1\">\n          <span className=\"txt-l txt-bold color-gray--dark\">\n            <span className=\"fl\">\n              <Avatar size={36} url={this.props.avatar} />\n            </span>\n            <span className=\"pl6 line45\">Watchlist</span>\n          </span>\n\n          <span className=\"txt-l color-gray--dark\">\n            <Button\n              onClick={this.props.logUserOut}\n              className=\"bg-white-on-hover\"\n            >\n              Logout\n            </Button>\n          </span>\n        </header>\n        <div className=\"px30 flex-child  pb60  filters-scroll\">\n          <div className=\"flex-parent flex-parent--column align justify--space-between\">\n            {this.props.token && (\n              <div>\n                <div className=\"mt24 mb12\">\n                  <h3 className=\"pl12 txt-xl mr6 txt-bold mt24 mb12 border-b border--gray-light border--1\">\n                    My watchlist\n                  </h3>\n                  <ListFortified\n                    data={blackList}\n                    TargetBlock={BlackListBlock}\n                    propsToPass={{\n                      removeFromBlackList: this.removeFromBlackList\n                    }}\n                    SaveComp={\n                      <SaveUser\n                        onCreate={this.addToBlackList}\n                        forBlacklist={true}\n                      />\n                    }\n                  />\n                </div>\n              </div>\n            )}\n            {this.props.token && (\n              <span>\n                <Link\n                  className=\"input wmax140 ml12 btn btn--s border border--1 border--darken5 border--darken25-on-hover round bg-darken10 bg-darken5-on-hover color-gray transition\"\n                  to={{\n                    search: getObjAsQueryParam('filters', {\n                      blacklist: [{ label: 'Yes', value: 'True' }]\n                    })\n                  }}\n                >\n                  Filter changesets\n                </Link>\n              </span>\n            )}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nWatchlist = connect(\n  (state: RootStateType, props) => ({\n    location: props.location,\n    blacklisted: state.blacklist.get('blacklist'),\n    oAuthToken: state.auth.get('oAuthToken'),\n    token: state.auth.get('token'),\n    userDetails: state.auth.getIn(['userDetails'], Map()),\n    avatar: state.auth.getIn(['userDetails', 'avatar'])\n  }),\n  {\n    logUserOut,\n    modal,\n    push,\n    addToBlacklist,\n    removeFromBlacklist\n  }\n)(Watchlist);\n\nexport { Watchlist };\n","import { API_URL } from '../config';\nimport { handleErrors } from './aoi';\n\nexport function createMappingTeam(token: string, name: string, users: string) {\n  return fetch(`${API_URL}/mapping-team/`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: token ? `Token ${token}` : ''\n    },\n    body: JSON.stringify({\n      name,\n      users\n    })\n  })\n    .then(handleErrors)\n    .then(res => {\n      return res.json();\n    });\n}\n\nexport function fetchMappingTeam(token: string, id: number) {\n  return fetch(`${API_URL}/mapping-team/${id}/`, {\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: token ? `Token ${token}` : ''\n    }\n  })\n    .then(handleErrors)\n    .then(res => {\n      return res.json();\n    });\n}\nexport function deleteMappingTeam(token: string, id: number) {\n  return fetch(`${API_URL}/mapping-team/${id}/`, {\n    method: 'DELETE',\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: token ? `Token ${token}` : ''\n    }\n  }).then(handleErrors);\n}\n\nexport function fetchUserMappingTeams(token: string, owner: string) {\n  return fetch(`${API_URL}/mapping-team/?owner=${owner}`, {\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: token ? `Token ${token}` : ''\n    }\n  })\n    .then(handleErrors)\n    .then(res => {\n      return res.json();\n    });\n}\n\nexport function fetchTrustedMappingTeams(token: string) {\n  return fetch(`${API_URL}/mapping-team/?trusted=true`, {\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: token ? `Token ${token}` : ''\n    }\n  })\n    .then(handleErrors)\n    .then(res => {\n      return res.json();\n    });\n}\n\nexport function updateMappingTeam(\n  token: string,\n  id: number,\n  name: ?string,\n  users: ?object\n) {\n  return fetch(`${API_URL}/mapping-team/${id}`, {\n    method: 'PUT',\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: token ? `Token ${token}` : ''\n    },\n    body: JSON.stringify({\n      name,\n      users\n    })\n  })\n    .then(handleErrors)\n    .then(res => {\n      return res.json();\n    });\n}\n","// @flow\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { Map, List } from 'immutable';\nimport { push } from 'react-router-redux';\n\nimport { modal } from '../store/modal_actions';\nimport { logUserOut } from '../store/auth_actions';\nimport { cancelablePromise } from '../utils/promise';\nimport {\n  createMappingTeam,\n  fetchUserMappingTeams,\n  deleteMappingTeam\n} from '../network/mapping_team';\nimport { Link } from 'react-router-dom';\nimport { withFetchDataSilent } from '../components/fetch_data_enhancer';\nimport { Avatar } from '../components/avatar';\nimport { Button } from '../components/button';\nimport { BlockMarkup } from '../components/user/block_markup';\nimport type { RootStateType } from '../store';\n\nexport type teamsOptionsType = Map<'label' | 'value', ?string>;\nexport type teamType = List<filterOptionsType>;\nexport type teamsType = Map<string, filterType>;\n\nclass SaveButton extends React.PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      editing: props.editing || false,\n      teamName: '',\n      teamUsers: [],\n      validationErrorMessage: ''\n    };\n  }\n  ref;\n  clicked = false;\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.activeTeam) {\n      this.setState({\n        teamName: nextProps.activeTeam.get('name')\n      });\n      this.setState({\n        teamUsers: JSON.stringify(\n          Array.from(nextProps.activeTeam.get('users')).map(i =>\n            Object.fromEntries(i)\n          )\n        )\n      });\n    }\n  }\n  onClick = event => {\n    this.clicked = true;\n    this.setState({ editing: true });\n  };\n  onChangeTeamName = (event: any) => {\n    this.setState({ teamName: event.target.value });\n  };\n  onChangeTeamUsers = (event: any) => {\n    this.setState({ teamUsers: event.target.value });\n  };\n  onKeyDown = event => {\n    if (event.keyCode === 27 && this.props.activeTeam === undefined) {\n      this.setState({\n        editing: false\n      });\n      this.clicked = false;\n    }\n  };\n  validateData() {\n    if (!this.state.teamName) {\n      return { valid: false, error: 'Team name cannot be empty.' };\n    }\n    if (this.state.teamUsers) {\n      try {\n        const users = JSON.parse(this.state.teamUsers);\n        if (typeof users !== 'object') {\n          return { valid: false, error: 'User must be a JSON array' };\n        }\n        if (\n          users.filter(i => i.hasOwnProperty('username')).length ===\n          users.length\n        ) {\n          return { valid: true };\n        } else {\n          return {\n            valid: false,\n            error:\n              'Each object inside the array needs to have a username property.'\n          };\n        }\n      } catch (e) {\n        return {\n          valid: false,\n          error:\n            'Verify if you pasted a correctly formated JSON array in the users field.'\n        };\n      }\n    } else {\n      return { valid: false, error: 'Users cannot be empty' };\n    }\n  }\n  onSave = event => {\n    const validation = this.validateData();\n\n    if (validation.valid) {\n      if (this.props.activeTeam) {\n        this.props.onChange(\n          this.props.activeTeam.get('id'),\n          this.state.teamName,\n          JSON.parse(this.state.teamUsers)\n        );\n        this.setState({ validationErrorMessage: '' });\n      } else {\n        this.props.onCreate(\n          this.state.teamName,\n          JSON.parse(this.state.teamUsers)\n        );\n        this.setState({\n          editing: false,\n          validationErrorMessage: ''\n        });\n      }\n    } else {\n      this.setState({ validationErrorMessage: validation.error });\n    }\n  };\n  render() {\n    return (\n      <span>\n        {this.state.editing ? (\n          <div className=\"pt18\">\n            {this.props.activeTeam ? (\n              <span />\n            ) : (\n                <h3 className=\"txt-h4 txt-bold\">Add a new mapping team</h3>\n              )}\n            <strong className=\"txt-truncate pt6\">Name</strong>\n            <input\n              placeholder=\"New team name\"\n              className=\"input wmax180\"\n              ref={r => {\n                if (this.clicked) {\n                  r && r.select();\n                  this.clicked = false;\n                }\n              }}\n              value={this.state.teamName}\n              onChange={this.onChangeTeamName}\n              onKeyDown={this.onKeyDown}\n              disabled={!this.props.userIsOwner}\n            />\n            <strong className=\"txt-truncate pt6\">Users</strong>\n            <textarea\n              placeholder={'[{\"username\": \"name\"}, {\"username\": \"other_user\"}]'}\n              className=\"textarea h180\"\n              ref={r => {\n                if (this.clicked) {\n                  r && r.select();\n                  this.clicked = false;\n                }\n              }}\n              value={this.state.teamUsers}\n              onChange={this.onChangeTeamUsers}\n              onKeyDown={this.onKeyDown}\n              disabled={!this.props.userIsOwner}\n            />\n            <span className=\"txt-light txt-truncate pt6\">\n              Check the{' '}\n              <a\n                className=\"link\"\n                href=\"https://github.com/mapbox/osmcha-frontend/wiki/Mapping-Teams\"\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n              >\n                reference\n              </a>{' '}\n              about the users field JSON format.\n            </span>\n            <p className=\"txt-light txt-truncate pt6\">\n              The mapping team members are <strong>public</strong> and can be\n              visualized by any logged in OSMCha user.\n            </p>\n            {this.state.validationErrorMessage && (\n              <span className=\"flex-parent flex-parent--row mt12 color-red-dark txt-bold\">\n                {this.state.validationErrorMessage}\n              </span>\n            )}\n            <span className=\"flex-parent flex-parent--row mt12\">\n              {this.props.userIsOwner && (\n                <Button className=\"input wmax120 ml6\" onClick={this.onSave}>\n                  Save\n                </Button>\n              )}\n              {this.props.activeTeam ? (\n                <Link\n                  to={{ pathname: '/teams' }}\n                  className=\"mx3 btn btn--s border border--1 border--darken5 border--darken25-on-hover round bg-darken10 bg-darken5-on-hover color-gray transition input wmax120 ml6\"\n                >\n                  Back to teams\n                </Link>\n              ) : (\n                <Button\n                  className=\"input wmax120 ml6\"\n                  onClick={() => this.setState({ editing: false })}\n                >\n                  Cancel\n                </Button>\n              )}\n            </span>\n          </div>\n        ) : (\n          <Button className=\"input wmax120 ml12\" onClick={this.onClick}>\n            Add+\n          </Button>\n        )}\n      </span>\n    );\n  }\n}\n\nconst TeamsBlock = ({ data, removeTeam, editTeam }) => (\n  <BlockMarkup>\n    <span>\n      <span>{data.get('name')}</span>\n    </span>\n    <span>\n      <Link\n        className=\"mx3 btn btn--s border border--1 border--darken5 border--darken25-on-hover round bg-darken10 bg-darken5-on-hover color-gray transition\"\n        to={{\n          search: `filters={\"mapping_teams\":[{\"label\":\"${data.getIn([\n            'name'\n          ])}\",\"value\":\"${data.getIn(['name'])}\"}]}`,\n          pathname: '/filters'\n        }}\n      >\n        Filter team changesets\n      </Link>\n      <Link\n        className=\"mx3 btn btn--s border border--1 border--darken5 border--darken25-on-hover round bg-darken10 bg-darken5-on-hover color-gray transition\"\n        to={{ pathname: `/teams/${data.getIn(['id'])}` }}\n      >\n        Edit\n      </Link>\n      <Button className=\"mr3\" onClick={() => removeTeam(data.getIn(['id']))}>\n        Remove\n      </Button>\n    </span>\n  </BlockMarkup>\n);\n\nconst ListFortified = ({\n  onAdd,\n  onRemove,\n  data,\n  TargetBlock,\n  propsToPass,\n  SaveComp\n}) => (\n  <div>\n    {data.map((e, i) => (\n      <TargetBlock key={i} data={e} {...propsToPass} />\n    ))}\n    {SaveComp}\n  </div>\n);\n\ntype propsType = {\n  avatar: ?string,\n  token: string,\n  data: Map<string, any>,\n  location: Object,\n  userDetails: Map<string, any>,\n  reloadData: () => any,\n  logUserOut: () => any,\n  push: any => any,\n  modal: any => any\n};\nclass MappingTeams extends React.PureComponent<any, propsType, any> {\n  createTeamPromise;\n  state = {\n    userValues: null,\n    addingTeam: false\n  };\n\n  componentWillUnmount() {\n    this.createTeamPromise && this.createTeamPromise.cancel();\n  }\n\n  createTeam = (name: string, users: object) => {\n    if (name === '' || !name || !users) return;\n    this.setState({ addingTeam: true });\n    this.createTeamPromise = cancelablePromise(\n      createMappingTeam(this.props.token, name, users)\n    );\n    this.createTeamPromise.promise\n      .then(r => {\n        this.props.modal({\n          kind: 'success',\n          title: 'Team Created ',\n          description: `The team ${name} was created successfully!`\n        });\n        this.props.reloadData();\n        this.setState({ addingTeam: false });\n      })\n      .catch(e => console.error(e));\n  };\n\n  removeTeam = (teamId: string) => {\n    if (!teamId) return;\n    deleteMappingTeam(this.props.token, teamId)\n      .then(r => {\n        this.props.modal({\n          kind: 'success',\n          title: 'Team Deleted ',\n          description: `The team with id ${teamId} was deleted`\n        });\n        this.props.reloadData();\n      })\n      .catch(e => {\n        this.props.reloadData();\n        this.props.modal({\n          kind: 'error',\n          title: 'Deletion failed ',\n          error: e\n        });\n      });\n  };\n\n  render() {\n    return (\n      <div\n        className={`flex-parent flex-parent--column changesets-filters bg-white${\n          window.innerWidth < 800 ? 'viewport-full' : ''\n        }`}\n      >\n        <header className=\"h55 hmin55 flex-parent px30 bg-gray-faint flex-parent--center-cross justify--space-between color-gray border-b border--gray-light border--1\">\n          <span className=\"txt-l txt-bold color-gray--dark\">\n            <span className=\"fl\">\n              <Avatar size={36} url={this.props.userDetails.get('avatar')} />\n            </span>\n            <span className=\"pl6 line45\">My Mapping Teams</span>\n          </span>\n\n          <span className=\"txt-l color-gray--dark\">\n            <Button\n              onClick={this.props.logUserOut}\n              className=\"bg-white-on-hover\"\n            >\n              Logout\n            </Button>\n          </span>\n        </header>\n        <div className=\"px30 flex-child  pb60  filters-scroll\">\n          <div className=\"flex-parent flex-parent--column align justify--space-between\">\n            {this.props.token && (\n              <div>\n                <div className=\"mt24 mb12\">\n                  <h2 className=\"pl12 txt-xl mr6 txt-bold border-b border--gray-light border--1\">\n                    My mapping teams\n                  </h2>\n                  <ListFortified\n                    data={this.props.data.getIn(['teams'], List())}\n                    TargetBlock={TeamsBlock}\n                    propsToPass={{\n                      removeTeam: this.removeTeam\n                    }}\n                    SaveComp={\n                      <SaveButton\n                        onCreate={this.createTeam}\n                        editing={this.state.addingTeam}\n                        userIsOwner={true}\n                      />\n                    }\n                  />\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n/**\n * Never use props not required by the Basecomponent in HOCs\n */\nMappingTeams = withFetchDataSilent(\n  (props: propsType) => ({\n    teams: cancelablePromise(\n      fetchUserMappingTeams(props.token, props.userDetails.get('username'))\n    )\n  }),\n  (nextProps: propsType, props: propsType) => true,\n  MappingTeams\n);\n\nMappingTeams = connect(\n  (state: RootStateType, props) => ({\n    location: props.location,\n    oAuthToken: state.auth.get('oAuthToken'),\n    token: state.auth.get('token'),\n    userDetails: state.auth.getIn(['userDetails'], Map())\n  }),\n  {\n    modal,\n    logUserOut,\n    push\n  }\n)(MappingTeams);\n\nexport { MappingTeams, SaveButton };\n","// @flow\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { Map } from 'immutable';\nimport { push } from 'react-router-redux';\n\nimport { modal } from '../store/modal_actions';\nimport { logUserOut } from '../store/auth_actions';\nimport { cancelablePromise } from '../utils/promise';\nimport {\n  fetchMappingTeam,\n  updateMappingTeam,\n  deleteMappingTeam\n} from '../network/mapping_team';\nimport { withFetchDataSilent } from '../components/fetch_data_enhancer';\nimport { Avatar } from '../components/avatar';\nimport { Button } from '../components/button';\nimport { SignIn } from '../components/sign_in';\nimport { SaveButton } from './teams';\nimport type { RootStateType } from '../store';\n\ntype propsType = {\n  avatar: ?string,\n  token: string,\n  data: Map<string, any>,\n  location: Object,\n  userDetails: Map<string, any>,\n  reloadData: () => any,\n  logUserOut: () => any,\n  push: any => any,\n  modal: any => any\n};\nclass EditMappingTeam extends React.PureComponent<any, propsType, any> {\n  updateTeamPromise;\n  state = {\n    userValues: null\n  };\n\n  componentWillUnmount() {\n    this.createTeamPromise && this.createTeamPromise.cancel();\n  }\n\n  editTeam = (id: string, name: string, users: object) => {\n    if (name === '' || !name || !users) return;\n    this.updateTeamPromise = cancelablePromise(\n      updateMappingTeam(this.props.token, id, name, users)\n    );\n    this.updateTeamPromise.promise\n      .then(r => {\n        this.props.modal({\n          kind: 'success',\n          title: 'Team Updated ',\n          description: `The team ${name} was updated successfully!`\n        });\n        this.props.reloadData();\n      })\n      .catch(e => {\n        this.props.modal({\n          kind: 'error',\n          title: 'Update failed ',\n          error: e\n        });\n        console.error(e);\n      });\n  };\n\n  removeTeam = (teamId: string) => {\n    if (!teamId) return;\n    deleteMappingTeam(this.props.token, teamId)\n      .then(r => {\n        this.props.modal({\n          kind: 'success',\n          title: 'Team Deleted ',\n          description: `The team with id ${teamId} was deleted`\n        });\n        this.props.reloadData();\n      })\n      .catch(e => {\n        this.props.reloadData();\n        this.props.modal({\n          kind: 'error',\n          title: 'Deletion failed ',\n          error: e\n        });\n      });\n  };\n\n  render() {\n    return (\n      <div\n        className={`flex-parent flex-parent--column changesets-filters bg-white${\n          window.innerWidth < 800 ? 'viewport-full' : ''\n        }`}\n      >\n        <header className=\"h55 hmin55 flex-parent px30 bg-gray-faint flex-parent--center-cross justify--space-between color-gray border-b border--gray-light border--1\">\n          <span className=\"txt-l txt-bold color-gray--dark\">\n            <span className=\"fl\">\n              <Avatar size={36} url={this.props.userDetails.get('avatar')} />\n            </span>\n            <span className=\"pl6 line45\">Edit Mapping Team</span>\n          </span>\n\n          <span className=\"txt-l color-gray--dark\">\n            <Button\n              onClick={this.props.logUserOut}\n              className=\"bg-white-on-hover\"\n            >\n              Logout\n            </Button>\n          </span>\n        </header>\n        {this.props.token ? (\n          <div className=\"px30 flex-child  pb60  filters-scroll\">\n            <div className=\"flex-parent flex-parent--column align justify--space-between\">\n              <div>\n                <div className=\"mt24 mb12\">\n                  <h2 className=\"pl12 txt-xl mr6 border-b border--gray-light border--1\">\n                    <strong>Editing mapping team: </strong>\n                    {this.props.data.getIn(['team', 'name'])}\n                  </h2>\n                  <SaveButton\n                    onChange={this.editTeam}\n                    editing={true}\n                    activeTeam={this.props.data.get('team')}\n                    userIsOwner={\n                      this.props.data.getIn(['team', 'owner']) ===\n                      this.props.userDetails.get('username')\n                    }\n                  />\n                </div>\n              </div>\n            </div>\n          </div>\n        ) : (\n          <SignIn />\n        )}\n      </div>\n    );\n  }\n}\n/**\n * Never use props not required by the Basecomponent in HOCs\n */\nEditMappingTeam = withFetchDataSilent(\n  (props: propsType) => ({\n    team: cancelablePromise(fetchMappingTeam(props.token, props.teamId))\n  }),\n  (nextProps: propsType, props: propsType) => true,\n  EditMappingTeam\n);\n\nEditMappingTeam = connect(\n  (state: RootStateType, props) => ({\n    location: props.location,\n    teamId: parseInt(props.match.params.id, 10),\n    oAuthToken: state.auth.get('oAuthToken'),\n    token: state.auth.get('token'),\n    userDetails: state.auth.getIn(['userDetails'], Map())\n  }),\n  {\n    modal,\n    logUserOut,\n    push\n  }\n)(EditMappingTeam);\n\nexport { EditMappingTeam };\n","// @flow\nimport React, { Component } from 'react';\nimport { Route } from 'react-router-dom';\nimport { Map } from 'immutable';\nimport CSSTransitionGroup from 'react-transition-group/CSSTransitionGroup';\n\nimport { Changeset } from './views/changeset';\nimport { About } from './views/about';\nimport { Stats } from './views/stats';\nimport { Filters } from './views/filters';\nimport { ChangesetsList } from './views/changesets_list';\nimport { CMap } from './views/map';\nimport { NavbarChangeset } from './views/navbar_changeset';\nimport { NavbarSidebar } from './views/navbar_sidebar';\nimport { Home } from './views/home';\nimport { Modal } from './views/modal';\nimport { User } from './views/user';\nimport { SavedFilters } from './views/saved_filters';\nimport { TrustedUsers } from './views/trusted_users';\nimport { Watchlist } from './views/watchlist';\nimport { MappingTeams } from './views/teams';\nimport { EditMappingTeam } from './views/edit_team';\n\nimport { gaPageView } from './utils/analytics';\nimport { getSearchObj } from './utils/query_params';\n\nexport class App extends Component {\n  resize = null;\n  componentDidMount() {\n    if (document && document.body) {\n      var filters = getSearchObj(window.location.search).getIn(\n        ['filters'],\n        Map()\n      );\n      if (filters && filters.size > 0) {\n        filters = filters\n          .keySeq()\n          .sort((a, b) => a.localeCompare(b))\n          .join(',');\n        gaPageView(`/?filters=${filters}`);\n      } else {\n        gaPageView('/');\n      }\n    }\n  }\n  render() {\n    const width = window.innerWidth;\n    if (width > 800) {\n      return (\n        <div>\n          <div className=\"grid\">\n            <div className=\"col col--3-mxl col--4-ml bg-gray--faint border-r border--gray-light border--1\">\n              <NavbarSidebar />\n              <ChangesetsList />\n            </div>\n            <div className=\"col col--9-mxl col--8-ml col--12-mm\">\n              <Route\n                render={({ location }) => (\n                  <CSSTransitionGroup\n                    transitionName=\"filters\"\n                    transitionEnterTimeout={300}\n                    transitionLeaveTimeout={300}\n                  >\n                    <Route exact path=\"/\" component={Home} />\n                    <Route\n                      location={location}\n                      path=\"/filters\"\n                      component={Filters}\n                      key={location.key}\n                    />\n                    <Route path=\"/changesets\" component={NavbarChangeset} />\n                    <Route\n                      path=\"/changesets\"\n                      // Need to use render to avoid unmounting of\n                      // CMap Ref: https://reacttraining.com/react-router/web/api/Route/render-func\n                      // CMap and views/changeset.js are clubbed so they can be\n                      // loaded on demand in future.\n                      render={() => <CMap className=\"z0 fixed bottom right\" />}\n                    />\n                    <Route path=\"/changesets/:id\" component={Changeset} />\n                    <Route path=\"/about\" component={About} />\n                    <Route path=\"/stats\" component={Stats} />\n                    <Route path=\"/user\" component={User} />\n                    <Route exact path=\"/teams\" component={MappingTeams} />\n                    <Route path=\"/teams/:id\" component={EditMappingTeam} />\n                    <Route path=\"/saved-filters\" component={SavedFilters} />\n                    <Route path=\"/trusted-users\" component={TrustedUsers} />\n                    <Route path=\"/watchlist\" component={Watchlist} />\n                  </CSSTransitionGroup>\n                )}\n              />\n            </div>\n          </div>\n          <Modal />\n        </div>\n      );\n    } else {\n      return (\n        <div>\n          <div className=\"col\">\n            <NavbarSidebar />\n            <Route exact path=\"/\" component={ChangesetsList} />\n            <Route\n              path=\"/changesets\"\n              // Need to use render to avoid unmounting of\n              // CMap Ref: https://reacttraining.com/react-router/web/api/Route/render-func\n              // CMap and views/changeset.js are clubbed so they can be\n              // loaded on demand in future.\n              render={() => <CMap className=\"z0 fixed bottom right\" />}\n            />\n            <Route path={'/changesets/:id'} component={Changeset} />\n            <Route path=\"/about\" component={About} />\n            <Route path=\"/stats\" component={Stats} />\n            <Route path=\"/filters\" component={Filters} />\n            <Route path=\"/user\" component={User} />\n            <Route path=\"/saved-filters\" component={SavedFilters} />\n            <Route path=\"/trusted-users\" component={TrustedUsers} />\n            <Route path=\"/watchlist\" component={Watchlist} />\n            <Route exact path=\"/teams\" component={MappingTeams} />\n            <Route path={'/teams/:id'} component={EditMappingTeam} />\n          </div>\n          <Modal />\n        </div>\n      );\n    }\n  }\n}\n","// @flow\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { ConnectedRouter } from 'react-router-redux';\nimport { Provider } from 'react-redux';\nimport ReactGA from 'react-ga';\nimport Raven from 'raven-js';\nimport { history } from './store/history';\nimport { store } from './store';\nimport { isDev, stack, appVersion } from './config';\nimport { unregisterServiceWorker } from './serviceworker';\n\nimport './assets/index.css';\nimport 'animate.css/animate.css';\nimport '@mapbox/mapbox-gl-draw/dist/mapbox-gl-draw.css';\nimport 'react-select/dist/react-select.css';\n\nimport { App } from './app';\n\nReactGA.initialize('UA-100686765-1', {\n  gaOptions: {\n    anonymizeIp: true,\n    screenResolution: `${window.screen.availWidth}X${window.screen.availHeight}`,\n    appName: stack\n  }\n});\n\nif (process.env.NODE_ENV === 'production') {\n  Raven.config('https://5637ef87f5794e2fb9e1e5fe9119688d@sentry.io/175926', {\n    release: appVersion,\n    environment: process.env.NODE_ENV,\n    debug: isDev\n  }).install();\n}\n// if (process.env.NODE_ENV !== 'production') {\n// const { whyDidYouUpdate } = require('why-did-you-update');\n// whyDidYouUpdate(React);\n// }\nReactDOM.render(\n  <Provider store={store}>\n    <ConnectedRouter history={history}>\n      <App />\n    </ConnectedRouter>\n  </Provider>,\n  document.getElementById('root')\n);\nunregisterServiceWorker();\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nexport function registerServiceWorker() {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n      navigator.serviceWorker\n        .register(swUrl)\n        .then(registration => {\n          registration.onupdatefound = () => {\n            const installingWorker = registration.installing;\n            installingWorker.onstatechange = () => {\n              if (installingWorker.state === 'installed') {\n                if (navigator.serviceWorker.controller) {\n                  // At this point, the old content will have been purged and\n                  // the fresh content will have been added to the cache.\n                  // It's the perfect time to display a \"New content is\n                  // available; please refresh\" message in your web app.\n                  const r = window.confirm(\n                    'New version of OSMCha is available. Would you like to reload?'\n                  );\n                  if (r) {\n                    window.location.reload();\n                  }\n                } else {\n                  // At this point, everything has been precached.\n                  // It's the perfect time to display a\n                  // \"Content is cached for offline use.\" message.\n                  console.log('Content is cached for offline use.');\n                }\n              }\n            };\n          };\n        })\n        .catch(error => {\n          console.error('Error during service worker registration:', error);\n        });\n    });\n  }\n}\n\nexport function unregisterServiceWorker() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","module.exports = __webpack_public_path__ + \"static/media/thumbs-up.13d765c5.svg\";","module.exports = __webpack_public_path__ + \"static/media/thumbs-down.7e04a82a.svg\";","module.exports = \"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4gIcSUNDX1BST0ZJTEUAAQEAAAIMbGNtcwIQAABtbnRyUkdCIFhZWiAH3AABABkAAwApADlhY3NwQVBQTAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA9tYAAQAAAADTLWxjbXMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAApkZXNjAAAA/AAAAF5jcHJ0AAABXAAAAAt3dHB0AAABaAAAABRia3B0AAABfAAAABRyWFlaAAABkAAAABRnWFlaAAABpAAAABRiWFlaAAABuAAAABRyVFJDAAABzAAAAEBnVFJDAAABzAAAAEBiVFJDAAABzAAAAEBkZXNjAAAAAAAAAANjMgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB0ZXh0AAAAAElYAABYWVogAAAAAAAA9tYAAQAAAADTLVhZWiAAAAAAAAADFgAAAzMAAAKkWFlaIAAAAAAAAG+iAAA49QAAA5BYWVogAAAAAAAAYpkAALeFAAAY2lhZWiAAAAAAAAAkoAAAD4QAALbPY3VydgAAAAAAAAAaAAAAywHJA2MFkghrC/YQPxVRGzQh8SmQMhg7kkYFUXdd7WtwegWJsZp8rGm/fdPD6TD////bAEMAAgMDAwQDBAUFBAYGBgYGCAgHBwgIDQkKCQoJDRMMDgwMDgwTERQRDxEUER4YFRUYHiMdHB0jKiUlKjUyNUVFXP/bAEMBAgMDAwQDBAUFBAYGBgYGCAgHBwgIDQkKCQoJDRMMDgwMDgwTERQRDxEUER4YFRUYHiMdHB0jKiUlKjUyNUVFXP/AABEIAEAAQAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/AP2YooooAKKz7u8ito9z9T0UdSa4eXWb1z8pCD0Az+poA9IorzeLWb1D8xDj0Ix+oruLS8iuY9ydR1U9QaANCiiigAooooA8v1Scy3snPCHaPwrHq3d/8fU//XRv51UoAK2NLnMV7Hzw52n8ax6t2n/H1B/10X+dAHrtFFFABRRTHdEUszBQO5OBQBwOs2jJOZgPlfr7N/8AXrmK9En1ixAK4MgPUAcH8689JBY4GBk4FADa6fRrRnnExHyp092/+tXNAgMMjIyMivQoNYsSAuDGB0BHA/KgDpKKYjo6hlYMD3ByKfQBmX17Haxbjyx4VfU/4V5rcXM1w+6Rs+g7D6CtLWJGe+cHogCj+dYVABRRRQAUUUUAW7e5mt33Rtj1HY/UV6VY3sd1FuHDDhl9D/hXlVbujyMl8gHRwVP86AP/2Q==\""],"sourceRoot":""}